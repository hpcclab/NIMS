{"0": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9035b49692a35ecf8da6e9ee2701672cca05a9d207aded800abbe96758da6566", "cni.projectcalico.org/podIP": "10.42.54.200/32", "cni.projectcalico.org/podIPs": "10.42.54.200/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mgsjc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mgsjc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mgsjc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9035b49692a35ecf8da6e9ee2701672cca05a9d207aded800abbe96758da6566\",\"cni.projectcalico.org/podIP\":\"10.42.54.200/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.200/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e8d8c45a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31347\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31347", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:22:49+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:22:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:22:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.200\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:22:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:22:54+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74146580", "uid": "3f8a2a90-21b5-4ac8-93d1-e2ef77ad91e8"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mgsjc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mgsjc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mgsjc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:22:49+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:22:53+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:22:53+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:22:49+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://570072652d42b0babe8881b7279bc1917cdc50d245c10c3db96a7f1641ab7dfc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:22:51+00:00"}}}, {"containerID": "containerd://633db3c2ed799049eec818e2d66f2e60e66b0b47e40c332b0112619cce0ad819", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:22:50+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.200", "podIPs": [{"ip": "10.42.54.200"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:22:49+00:00"}}, "message": "migration complete!", "migration_id": "e8d8c45a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.392, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.303, "file_system_delay": 1.706, "file_system_transfer": 4.753, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.753, "creation": 3.107678, "restoration": 0.762551, "total": 8.707601}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "871b34f2b212dc57e74ae2b1891b1a7f5303d049b432b92f3a784ee879abbd2a", "cni.projectcalico.org/podIP": "10.42.54.238/32", "cni.projectcalico.org/podIPs": "10.42.54.238/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-5q9x5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-5q9x5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-5q9x5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"871b34f2b212dc57e74ae2b1891b1a7f5303d049b432b92f3a784ee879abbd2a\",\"cni.projectcalico.org/podIP\":\"10.42.54.238/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.238/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5036a940\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32685\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32685", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:23:34+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:23:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:23:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:23:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.238\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:23:39+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74146916", "uid": "ac0f38a7-97ad-4edf-ae9c-2eef50a994a0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5q9x5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5q9x5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-5q9x5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:23:34+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:23:39+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:23:39+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:23:34+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://99188f086d42cb0856dd22c8a2aa0a25c7b73636c0d4eac114b2397f4d913c31", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:23:36+00:00"}}}, {"containerID": "containerd://c79f755662ba34861261f78bfd2df3a79054a593bbbb04557da437d47ee9a318", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:23:35+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.238", "podIPs": [{"ip": "10.42.54.238"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:23:34+00:00"}}, "message": "migration complete!", "migration_id": "5036a940", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.386, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.29, "file_system_delay": 1.676, "file_system_transfer": 4.701, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.701, "creation": 3.195207, "restoration": 0.799991, "total": 8.792598}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c66346d1747e9ee049228933a0cbcd58a98dd68f478a72ecd48115ebec35373b", "cni.projectcalico.org/podIP": "10.42.54.248/32", "cni.projectcalico.org/podIPs": "10.42.54.248/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zslkw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zslkw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zslkw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c66346d1747e9ee049228933a0cbcd58a98dd68f478a72ecd48115ebec35373b\",\"cni.projectcalico.org/podIP\":\"10.42.54.248/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.248/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2066ba3f\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30557\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30557", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:24:19+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:24:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:24:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:24:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.248\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:24:24+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74147255", "uid": "ae221faf-6a4c-41ac-81f6-df60bca8cb6f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zslkw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zslkw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zslkw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:24:19+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:24:24+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:24:24+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:24:19+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://da3441043147206676c02799229d7544ba967e4e045b3367326b21f03264b91f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:24:21+00:00"}}}, {"containerID": "containerd://fc661cea6a9dfd92a03815e8f9007ad11981dbd1d15ffdd1865a3623e10db6ae", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:24:21+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.248", "podIPs": [{"ip": "10.42.54.248"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:24:19+00:00"}}, "message": "migration complete!", "migration_id": "2066ba3f", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.375, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.322, "file_system_delay": 1.69, "file_system_transfer": 4.772, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.772, "creation": 3.155081, "restoration": 0.798908, "total": 8.811081}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "779d98f8e1ae1d9d576b5f03d6067db42d47a1f3b9c40e392d0fb22835f79265", "cni.projectcalico.org/podIP": "10.42.54.219/32", "cni.projectcalico.org/podIPs": "10.42.54.219/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-p767r\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-p767r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-p767r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"779d98f8e1ae1d9d576b5f03d6067db42d47a1f3b9c40e392d0fb22835f79265\",\"cni.projectcalico.org/podIP\":\"10.42.54.219/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.219/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5b4037a7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31288\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31288", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:49:09+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:49:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:49:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.219\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:49:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:49:13+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77839382", "uid": "1938bc6a-4300-45e4-9850-c7c5002aa2f5"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-p767r", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-p767r", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-p767r", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:49:09+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:49:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:49:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:49:09+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8728f90cf6e5668c4e9f6e3cb7835120c42d16d44acaf8a5c1d5d7dbc21742e5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:49:11+00:00"}}}, {"containerID": "containerd://9a6f44d8e2496ea713a6882e3c983221796c19187e92c4fb051976825b6dfa2c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:49:10+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.219", "podIPs": [{"ip": "10.42.54.219"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:49:09+00:00"}}, "message": "migration complete!", "migration_id": "5b4037a7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.389, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.392, "file_system_delay": 1.782, "file_system_transfer": 4.936, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.936, "creation": 3.053347, "restoration": 0.787609, "total": 8.870191}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "30407fd1466cc2f1de413072526dbefeca9b63aca583b458cd02c5cde25235ad", "cni.projectcalico.org/podIP": "10.42.54.251/32", "cni.projectcalico.org/podIPs": "10.42.54.251/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-6mqpd\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-6mqpd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-6mqpd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"30407fd1466cc2f1de413072526dbefeca9b63aca583b458cd02c5cde25235ad\",\"cni.projectcalico.org/podIP\":\"10.42.54.251/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.251/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5fea51ba\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30154\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30154", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:49:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:49:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:49:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:49:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.251\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:49:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77839721", "uid": "baff53d3-b2bf-4b43-8ff7-c959c0abb29c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6mqpd", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6mqpd", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-6mqpd", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:49:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:49:58+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:49:58+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:49:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a375822468a6fd407761cd401d9e99774f02693ed086038ca5d21cba23f3207c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:49:56+00:00"}}}, {"containerID": "containerd://969c48e0bc4360459707aeea0c08024b78cbffe8b5b0effe86a0bec38fb18bbc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:49:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.251", "podIPs": [{"ip": "10.42.54.251"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:49:54+00:00"}}, "message": "migration complete!", "migration_id": "5fea51ba", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.355, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.28, "file_system_delay": 1.68, "file_system_transfer": 4.71, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.71, "creation": 3.037084, "restoration": 0.833733, "total": 8.678669}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ee70b82c492111d9bd18a71c9910f4155045900914431e51cd2aef455f6796b7", "cni.projectcalico.org/podIP": "10.42.54.205/32", "cni.projectcalico.org/podIPs": "10.42.54.205/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-j9x6k\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-j9x6k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-j9x6k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ee70b82c492111d9bd18a71c9910f4155045900914431e51cd2aef455f6796b7\",\"cni.projectcalico.org/podIP\":\"10.42.54.205/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.205/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e1533f28\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30266\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30266", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:50:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:50:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:50:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:50:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.205\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:50:43+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77840064", "uid": "833bf4da-d5be-4d9e-accc-c86e5dd5377c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j9x6k", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j9x6k", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-j9x6k", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:50:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:50:43+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:50:43+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:50:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d3faf0ccf7725967be472058140db8c083966c8b1e4b4f82bf613a9f543049cf", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:50:41+00:00"}}}, {"containerID": "containerd://1320e1dab9fbf3b25167ef5a622cf640b6bfd96fd7ada70c85dc46785f0d0c98", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:50:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.205", "podIPs": [{"ip": "10.42.54.205"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:50:39+00:00"}}, "message": "migration complete!", "migration_id": "e1533f28", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.394, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.407, "file_system_delay": 1.784, "file_system_transfer": 4.722, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.722, "creation": 3.030982, "restoration": 0.772917, "total": 8.624689}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ea9ddda0742b9bb7a592f00564314e56ddd85c493b660bc4a0e644f69294d722", "cni.projectcalico.org/podIP": "10.42.54.214/32", "cni.projectcalico.org/podIPs": "10.42.54.214/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-667c6\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-667c6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-667c6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ea9ddda0742b9bb7a592f00564314e56ddd85c493b660bc4a0e644f69294d722\",\"cni.projectcalico.org/podIP\":\"10.42.54.214/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.214/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"13359536\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32574\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32574", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:51:24+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:51:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:51:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:51:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.214\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:51:28+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77840400", "uid": "1f2b6a66-42a7-4785-809e-4194e463800b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-667c6", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-667c6", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-667c6", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:51:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:51:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:51:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:51:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3cf1c431290c7ebce34f6c5f4224355b4f88b25289b29c224707576ffa150689", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:51:26+00:00"}}}, {"containerID": "containerd://ef2d35d308553f78d37944421be585b54d4f0ee1cfae09f53b3112608c76741b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:51:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.214", "podIPs": [{"ip": "10.42.54.214"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:51:25+00:00"}}, "message": "migration complete!", "migration_id": "13359536", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.385, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.298, "file_system_delay": 0.676, "file_system_transfer": 3.729, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.729, "creation": 3.07621, "restoration": 0.793371, "total": 7.693577}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "eb1f64e7501d6515dee53068b456f10f62843e3f0818fbe82ff77bab58352f07", "cni.projectcalico.org/podIP": "10.42.54.243/32", "cni.projectcalico.org/podIPs": "10.42.54.243/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9chzm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9chzm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9chzm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"eb1f64e7501d6515dee53068b456f10f62843e3f0818fbe82ff77bab58352f07\",\"cni.projectcalico.org/podIP\":\"10.42.54.243/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.243/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c2baf4a2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32766\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32766", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:52:09+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:52:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:52:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:52:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.243\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:52:12+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77840739", "uid": "e08f205b-3803-411e-afe5-136e22028fb0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9chzm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9chzm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9chzm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:52:09+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:52:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:52:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:52:09+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://15840193a26783e366068b31c10294f3b14a1236d321f289fe6316548a4d6502", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:52:10+00:00"}}}, {"containerID": "containerd://a99820707e8ef85fa1da5d0656de7087300f7bae9cc613b34cd7973239d8148b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:52:10+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.243", "podIPs": [{"ip": "10.42.54.243"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:52:09+00:00"}}, "message": "migration complete!", "migration_id": "c2baf4a2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.372, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.392, "file_system_delay": 1.786, "file_system_transfer": 4.806, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.806, "creation": 3.060932, "restoration": 0.786135, "total": 8.743609}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "419d494156ae6eb1793c0cf879da7dafe8542b07d9760fe7cdd198903d4dddc9", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-lp2c4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-lp2c4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-lp2c4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"419d494156ae6eb1793c0cf879da7dafe8542b07d9760fe7cdd198903d4dddc9\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"fc3551f8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32271\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32271", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:52:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:52:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:52:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:52:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:52:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77841075", "uid": "1936ca44-2413-40f2-a40c-c79bf0c1fd2e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lp2c4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lp2c4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-lp2c4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:52:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:52:57+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:52:57+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:52:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d970d69a0a0e7854d827bd252cabecfda940f8bcf4f46d869fc6428208037aa4", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:52:56+00:00"}}}, {"containerID": "containerd://964d65aa261101752722c39655ef33198e0736bdb1c51df02313d4a4a6e9f92c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:52:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:52:54+00:00"}}, "message": "migration complete!", "migration_id": "fc3551f8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.398, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.286, "file_system_delay": 0.668, "file_system_transfer": 3.648, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.648, "creation": 3.069044, "restoration": 0.784795, "total": 7.600545}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "81baf7f7645ca16beb00ae57d35fc36cddd351c924999cce7fffa35639152e38", "cni.projectcalico.org/podIP": "10.42.54.226/32", "cni.projectcalico.org/podIPs": "10.42.54.226/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7mfbm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7mfbm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7mfbm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"81baf7f7645ca16beb00ae57d35fc36cddd351c924999cce7fffa35639152e38\",\"cni.projectcalico.org/podIP\":\"10.42.54.226/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.226/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7cf60d65\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30592\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30592", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:53:38+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:53:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:53:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:53:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.226\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:53:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77841420", "uid": "38e4ff29-e606-445f-b5d5-78a9eb16fb92"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7mfbm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7mfbm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7mfbm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:53:38+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:53:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:53:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:53:38+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://260ebe3a99eb0f1ab68196715ccbb905138af95d2454a0243bb32ccd24a2f6d0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:53:40+00:00"}}}, {"containerID": "containerd://ea38a072d8e3630f8e644b402d42b79ab3fa83cb0199ac75f1e48d435a12c848", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:53:39+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.226", "podIPs": [{"ip": "10.42.54.226"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:53:38+00:00"}}, "message": "migration complete!", "migration_id": "7cf60d65", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.398, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.3, "file_system_delay": 1.678, "file_system_transfer": 4.789, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.789, "creation": 3.143505, "restoration": 0.846689, "total": 8.878649}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "183093f1e6c6ed6f3843db8373df071cf94f364cb8dbf089373c1fbfcd86bc9f", "cni.projectcalico.org/podIP": "10.42.54.229/32", "cni.projectcalico.org/podIPs": "10.42.54.229/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rtds7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rtds7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rtds7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"183093f1e6c6ed6f3843db8373df071cf94f364cb8dbf089373c1fbfcd86bc9f\",\"cni.projectcalico.org/podIP\":\"10.42.54.229/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.229/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3255e482\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30515\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30515", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:54:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:54:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:54:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:54:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.229\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:54:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77841749", "uid": "2000980f-a117-4ef9-9fed-272bfe108c33"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rtds7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rtds7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rtds7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:54:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:54:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:54:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:54:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e53e0f026d2412a8e67d1b55d405bacf94602bff54f110c1691bd60082d6a2d9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:54:25+00:00"}}}, {"containerID": "containerd://478247977fcd58909426353b760c44aa3db8ead8d600133abefaa79b97e0263e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:54:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.229", "podIPs": [{"ip": "10.42.54.229"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:54:23+00:00"}}, "message": "migration complete!", "migration_id": "3255e482", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.373, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.168, "file_system_delay": 0.568, "file_system_transfer": 3.718, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.718, "creation": 3.217437, "restoration": 0.728113, "total": 7.760106}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "20956623f598cb2459f1306fb111b3736241662fed7336561326bf8d846a52eb", "cni.projectcalico.org/podIP": "10.42.54.234/32", "cni.projectcalico.org/podIPs": "10.42.54.234/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7ww82\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7ww82\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7ww82\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"20956623f598cb2459f1306fb111b3736241662fed7336561326bf8d846a52eb\",\"cni.projectcalico.org/podIP\":\"10.42.54.234/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.234/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c25115d1\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32359\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32359", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:55:07+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:55:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:55:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:55:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.234\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:55:11+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77842100", "uid": "d80c9d54-2b71-438f-b20a-6ad4f28e7b8b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7ww82", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7ww82", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7ww82", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:55:07+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:55:11+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:55:11+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:55:07+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e0e8370eefaa3172a385b9433aa654c9b3e4b51a3db031ab04d08e41370f5571", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:55:09+00:00"}}}, {"containerID": "containerd://112b2d3c378c1c077bd71cf261262f8b03bc0a7ebb2957305d0140d35a4348b6", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:55:08+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.234", "podIPs": [{"ip": "10.42.54.234"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:55:07+00:00"}}, "message": "migration complete!", "migration_id": "c25115d1", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.369, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.315, "file_system_delay": 1.704, "file_system_transfer": 4.789, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.789, "creation": 3.20457, "restoration": 0.730953, "total": 8.810803}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9846e99a148d9a702bac0df18842dfbf3c5b6b0cb83f32596d4f13ada12f1e93", "cni.projectcalico.org/podIP": "10.42.54.240/32", "cni.projectcalico.org/podIPs": "10.42.54.240/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-th5nv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-th5nv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-th5nv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9846e99a148d9a702bac0df18842dfbf3c5b6b0cb83f32596d4f13ada12f1e93\",\"cni.projectcalico.org/podIP\":\"10.42.54.240/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.240/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2df655c7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31421\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31421", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:55:53+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:55:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:55:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:55:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.240\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:55:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77842438", "uid": "306d0779-f563-4c78-8e41-5ecf224966c9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-th5nv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-th5nv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-th5nv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:55:53+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:55:56+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:55:56+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:55:53+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6e42dbb6b45a27f167bebdaef219d326662897f7fb78e5c28179f81b2c7a9aa8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:55:54+00:00"}}}, {"containerID": "containerd://88049b0dbc76419891cd806d0fc9e985c19b9bf17da921d5e74d74e05846a01f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:55:54+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.240", "podIPs": [{"ip": "10.42.54.240"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:55:53+00:00"}}, "message": "migration complete!", "migration_id": "2df655c7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.372, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.358, "file_system_delay": 1.705, "file_system_transfer": 4.844, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.844, "creation": 3.149957, "restoration": 0.752017, "total": 8.847414}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9486ba933de1f8416ed5f4206171dc7651d317707af0f8b229177feeee6532fc", "cni.projectcalico.org/podIP": "10.42.54.206/32", "cni.projectcalico.org/podIPs": "10.42.54.206/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-b5qkr\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-b5qkr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-b5qkr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9486ba933de1f8416ed5f4206171dc7651d317707af0f8b229177feeee6532fc\",\"cni.projectcalico.org/podIP\":\"10.42.54.206/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.206/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"55aa34b4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32589\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32589", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:56:38+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:56:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:56:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:56:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.206\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:56:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77842775", "uid": "ea74c79e-bc47-4594-bace-632d45544d1b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b5qkr", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b5qkr", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-b5qkr", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:56:38+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:56:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:56:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:56:38+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ed1a1de20127edd143f83059523ab40cfc469ae1b8558c68e09dfc3905370e8f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:56:40+00:00"}}}, {"containerID": "containerd://493dc4ee392bd621b76e28b9ce6107e24e801ded5e33bae5d1f38691d70e4a4a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:56:39+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.206", "podIPs": [{"ip": "10.42.54.206"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:56:38+00:00"}}, "message": "migration complete!", "migration_id": "55aa34b4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.371, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.261, "file_system_delay": 0.667, "file_system_transfer": 3.674, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.674, "creation": 3.068133, "restoration": 0.819196, "total": 7.732282}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b257b0ccdd82b8c8c018c7fdec8772fae9653ad4192e4433745b545c161e675e", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9s52m\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9s52m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9s52m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b257b0ccdd82b8c8c018c7fdec8772fae9653ad4192e4433745b545c161e675e\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8223baae\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32288\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32288", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:57:22+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:57:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:57:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:57:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:57:26+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77843111", "uid": "192f7c57-66fb-435d-bec5-91d0a4ea7a19"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9s52m", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9s52m", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9s52m", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:57:22+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:57:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:57:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:57:22+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0fa8033dc67e958c1f859adb95269ef50a0386ec807c65404bda022c16765ef3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:57:24+00:00"}}}, {"containerID": "containerd://5ec44824949ca9fe1b917d8096768181e29abf478534326f5bbfec5390d84e6a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:57:23+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:57:22+00:00"}}, "message": "migration complete!", "migration_id": "8223baae", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.407, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.426, "file_system_delay": 1.789, "file_system_transfer": 4.833, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.833, "creation": 3.085553, "restoration": 0.744293, "total": 8.760217}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9a7320e304b849bf6718cd0fa606b47527b4453e6e5df7e494a8cf568a85588e", "cni.projectcalico.org/podIP": "10.42.54.220/32", "cni.projectcalico.org/podIPs": "10.42.54.220/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8pgx2\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8pgx2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8pgx2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9a7320e304b849bf6718cd0fa606b47527b4453e6e5df7e494a8cf568a85588e\",\"cni.projectcalico.org/podIP\":\"10.42.54.220/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.220/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"897f9cad\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30898\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30898", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:58:07+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:58:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:58:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:58:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.220\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:58:11+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77843449", "uid": "06db89b0-831b-4c10-830e-32ff6a010b95"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8pgx2", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8pgx2", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8pgx2", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:58:07+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:58:11+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:58:11+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:58:07+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f9f6d2dcfaff5b0756c82b043c9e8bbfd4b5fee2278549fc149f229d239bc9f6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:58:09+00:00"}}}, {"containerID": "containerd://0a6c13cbe8e52838bd64dc3a85e9837df8abe2c34507200979e94e01241b6074", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:58:08+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.220", "podIPs": [{"ip": "10.42.54.220"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:58:07+00:00"}}, "message": "migration complete!", "migration_id": "897f9cad", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.35, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.315, "file_system_delay": 0.667, "file_system_transfer": 3.773, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.773, "creation": 3.136409, "restoration": 0.793985, "total": 7.788336}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2d28fa0a379457b1a4144a85e60bba6607aab19c1b8a865413918d44e4ae2cca", "cni.projectcalico.org/podIP": "10.42.54.208/32", "cni.projectcalico.org/podIPs": "10.42.54.208/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-sslsf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-sslsf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-sslsf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2d28fa0a379457b1a4144a85e60bba6607aab19c1b8a865413918d44e4ae2cca\",\"cni.projectcalico.org/podIP\":\"10.42.54.208/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.208/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"def69f7d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32288\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32288", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:58:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:58:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:58:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:58:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.208\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:58:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77843795", "uid": "f914b378-3071-4b4d-b9d3-4a2ada9366cd"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sslsf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sslsf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-sslsf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:58:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:58:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:58:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:58:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3f3c66e17c34445cecc9915bf842592568b0c54b4325ca7d6f00fd6a96ae5757", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:58:53+00:00"}}}, {"containerID": "containerd://8c8e7d39febcb05fa2af55465f41cd3cefec5c58dd2d7d7be43fab80da3993c8", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:58:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.208", "podIPs": [{"ip": "10.42.54.208"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:58:52+00:00"}}, "message": "migration complete!", "migration_id": "def69f7d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.396, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.304, "file_system_delay": 1.687, "file_system_transfer": 4.765, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.765, "creation": 3.082988, "restoration": 0.793354, "total": 8.725772}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "abcaf4ae7aed05229cdfc00d1140b2feff776ea24aac18627789b2a7520e3486", "cni.projectcalico.org/podIP": "10.42.54.225/32", "cni.projectcalico.org/podIPs": "10.42.54.225/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-5fs7s\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-5fs7s\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-5fs7s\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"abcaf4ae7aed05229cdfc00d1140b2feff776ea24aac18627789b2a7520e3486\",\"cni.projectcalico.org/podIP\":\"10.42.54.225/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.225/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"863b8c5d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30701\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30701", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T20:59:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:59:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T20:59:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.225\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T20:59:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T20:59:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77844130", "uid": "f75a54c9-ded4-43d6-8aa5-eb5ffed8f743"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5fs7s", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5fs7s", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-5fs7s", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T20:59:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T20:59:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T20:59:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T20:59:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ae02ffb823bef3b2b717e84dea23f7b40b5855fb944bd783aa4fea83e8377008", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:59:38+00:00"}}}, {"containerID": "containerd://8ca80aafb47da66ccaa55253852e907bb88136e20b07d1bfc53168c14db1a266", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T20:59:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.225", "podIPs": [{"ip": "10.42.54.225"}], "qosClass": "BestEffort", "startTime": "2023-02-22T20:59:37+00:00"}}, "message": "migration complete!", "migration_id": "863b8c5d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.364, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.297, "file_system_delay": 1.694, "file_system_transfer": 4.648, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.648, "creation": 3.009841, "restoration": 0.739521, "total": 8.485068}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2208cd5369d88d0db456645267d3255f96ab2bab14f7a905801770acad40dbcc", "cni.projectcalico.org/podIP": "10.42.54.235/32", "cni.projectcalico.org/podIPs": "10.42.54.235/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-s84rp\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-s84rp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-s84rp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2208cd5369d88d0db456645267d3255f96ab2bab14f7a905801770acad40dbcc\",\"cni.projectcalico.org/podIP\":\"10.42.54.235/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.235/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"25f3007a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32222\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32222", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:00:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:00:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:00:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:00:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.235\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:00:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77844483", "uid": "b7ffe136-f0ce-4293-ab0b-7d245f44fb54"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-s84rp", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-s84rp", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-s84rp", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:00:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:00:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:00:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:00:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3c62e18f14c64794c7df15d7a8d2ef03637859ef10a92752d6c3a833a1445645", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:00:25+00:00"}}}, {"containerID": "containerd://f251e526d104d0047e6ec06f30cec77e38214a3a11b28e363ca9fb6fe5d77608", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:00:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.235", "podIPs": [{"ip": "10.42.54.235"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:00:23+00:00"}}, "message": "migration complete!", "migration_id": "25f3007a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.395, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 3.445, "file_system_delay": 2.803, "file_system_transfer": 5.926, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.926, "creation": 3.06897, "restoration": 0.737841, "total": 9.822331}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a32fa4bf1097df85230a9a36ee482afc925aaba4f6c4b42d41385292a4b7fcb9", "cni.projectcalico.org/podIP": "10.42.54.196/32", "cni.projectcalico.org/podIPs": "10.42.54.196/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2hqnl\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2hqnl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2hqnl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a32fa4bf1097df85230a9a36ee482afc925aaba4f6c4b42d41385292a4b7fcb9\",\"cni.projectcalico.org/podIP\":\"10.42.54.196/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.196/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"bdc7a1a0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31586\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31586", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:01:10+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:01:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:01:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:01:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.196\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:01:14+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77844830", "uid": "6a266b95-9788-466f-bdcf-c5a0ad6b7985"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2hqnl", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2hqnl", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2hqnl", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:01:10+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:01:14+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:01:14+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:01:10+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4722ea238563c22a684ea155cd8601e0990a2dd80eb8357144337cc68d94413f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:01:12+00:00"}}}, {"containerID": "containerd://c9157179419be1b0404db3f75bf562052513408c0f3aab5290c6a3e38ae10fe2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:01:11+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.196", "podIPs": [{"ip": "10.42.54.196"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:01:10+00:00"}}, "message": "migration complete!", "migration_id": "bdc7a1a0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.377, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.308, "file_system_delay": 0.669, "file_system_transfer": 3.679, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.679, "creation": 3.198432, "restoration": 0.791565, "total": 7.754074}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "827bf863b795d5b4771b9be27bdd8694bdf82a98cff04cbafd0efc24c6cdbd3f", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-j7q4n\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-j7q4n\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-j7q4n\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"827bf863b795d5b4771b9be27bdd8694bdf82a98cff04cbafd0efc24c6cdbd3f\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3832d2a7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30501\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30501", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:01:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:01:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:01:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:01:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:01:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77845227", "uid": "5e768199-49d9-4e3a-91d5-ca54b96af7d4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j7q4n", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j7q4n", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-j7q4n", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:01:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:01:58+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:01:58+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:01:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://49c2dfa30508a6f82e1f0c24d40dbb733cd9353b52406f2e3824f8567a890327", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:01:56+00:00"}}}, {"containerID": "containerd://8d1dcd34b4983f4faf9cd15a90f90b2b4b2cf1b98a931722f57f238025b63207", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:01:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:01:54+00:00"}}, "message": "migration complete!", "migration_id": "3832d2a7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.377, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.286, "file_system_delay": 0.667, "file_system_transfer": 3.692, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.692, "creation": 3.205861, "restoration": 0.770875, "total": 7.750935}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "32a7b7dcb5f4565f3b8c02e6bdd50ab9e020bae8340266edf7f1c8bd27dcd267", "cni.projectcalico.org/podIP": "10.42.54.242/32", "cni.projectcalico.org/podIPs": "10.42.54.242/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-cht54\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-cht54\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-cht54\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"32a7b7dcb5f4565f3b8c02e6bdd50ab9e020bae8340266edf7f1c8bd27dcd267\",\"cni.projectcalico.org/podIP\":\"10.42.54.242/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.242/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4025be88\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32175\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32175", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:02:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:02:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:02:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:02:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.242\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:02:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77845565", "uid": "3f4a7b8d-8e72-4452-bdf9-3f1cd8d449e7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cht54", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cht54", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-cht54", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:02:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:02:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:02:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:02:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://1b7ba4392b153bd9e9f840d5d0f91ad6d4342658a9ba44fd46f613ad245d5546", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:02:40+00:00"}}}, {"containerID": "containerd://115e221383e4f1d9c98bb5ddfacd45990ffb232bf1310cb789bc8beff93a6108", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:02:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.242", "podIPs": [{"ip": "10.42.54.242"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:02:39+00:00"}}, "message": "migration complete!", "migration_id": "4025be88", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.385, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.303, "file_system_delay": 0.669, "file_system_transfer": 3.889, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.889, "creation": 3.157043, "restoration": 0.791731, "total": 7.928402}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "15b2edcc707f97977ea31bf00b08d9e4910c55bbd45d8706171ce2ebb12a3176", "cni.projectcalico.org/podIP": "10.42.54.194/32", "cni.projectcalico.org/podIPs": "10.42.54.194/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tn4gz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tn4gz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tn4gz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"15b2edcc707f97977ea31bf00b08d9e4910c55bbd45d8706171ce2ebb12a3176\",\"cni.projectcalico.org/podIP\":\"10.42.54.194/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.194/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4aea6716\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31526\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31526", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:03:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:03:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:03:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.194\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:03:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:03:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77845893", "uid": "02be4fc6-3166-451b-8488-15a46f7e2271"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tn4gz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tn4gz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tn4gz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:03:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:03:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:03:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:03:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://068ba6d080b293e5689b76ae0bb95b1edcb15bbf7c6baa788eb2b6d67d779a07", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:03:25+00:00"}}}, {"containerID": "containerd://fd728c2a30a483ce81b21056f8847bbc54912720ed1db43142a2390f4e2fc28e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:03:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.194", "podIPs": [{"ip": "10.42.54.194"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:03:23+00:00"}}, "message": "migration complete!", "migration_id": "4aea6716", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.383, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.279, "file_system_delay": 0.673, "file_system_transfer": 3.592, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.592, "creation": 3.136381, "restoration": 0.801107, "total": 7.621833}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "fe76df0c31bbdb1a7663eba1b76e327cf05860960301ebec61df945516a104fe", "cni.projectcalico.org/podIP": "10.42.54.232/32", "cni.projectcalico.org/podIPs": "10.42.54.232/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-fd6cf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-fd6cf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-fd6cf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"fe76df0c31bbdb1a7663eba1b76e327cf05860960301ebec61df945516a104fe\",\"cni.projectcalico.org/podIP\":\"10.42.54.232/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.232/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b9622738\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30586\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30586", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:04:07+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:04:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:04:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:04:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.232\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:04:11+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77846229", "uid": "c3301f48-464d-47b3-a5dc-839673cdd08c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fd6cf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fd6cf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-fd6cf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:04:07+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:04:11+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:04:11+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:04:07+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4347081a6fc3d11b8c490751771299316025e3d8006cd567996300771e88b92e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:04:09+00:00"}}}, {"containerID": "containerd://2bcd2d472c91206f2a45551338bd70f1569a0577a05799011655fa7b15eb26e0", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:04:08+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.232", "podIPs": [{"ip": "10.42.54.232"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:04:07+00:00"}}, "message": "migration complete!", "migration_id": "b9622738", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.365, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.298, "file_system_delay": 0.67, "file_system_transfer": 3.828, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.828, "creation": 3.156406, "restoration": 0.751929, "total": 7.825518}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d934d5aa314e6b07b3c5d7b814b38b2533b4d7f0cba2abde7ff2c18b050670f8", "cni.projectcalico.org/podIP": "10.42.54.200/32", "cni.projectcalico.org/podIPs": "10.42.54.200/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tkjx9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tkjx9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tkjx9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d934d5aa314e6b07b3c5d7b814b38b2533b4d7f0cba2abde7ff2c18b050670f8\",\"cni.projectcalico.org/podIP\":\"10.42.54.200/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.200/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"856c19c2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31428\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31428", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:04:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:04:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:04:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:04:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.200\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:04:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77846558", "uid": "546fe107-914a-46b5-b225-4aadad1e6150"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tkjx9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tkjx9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tkjx9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:04:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:04:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:04:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:04:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6dd9be186c57843783b6425bdf4f0c6e6b914c05bf5ee12279c8e7f547f11b20", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:04:53+00:00"}}}, {"containerID": "containerd://458f884cdc9deb25809524be89a4b09289075b06a67a7540171146901953d0c1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:04:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.200", "podIPs": [{"ip": "10.42.54.200"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:04:51+00:00"}}, "message": "migration complete!", "migration_id": "856c19c2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.358, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.324, "file_system_delay": 0.67, "file_system_transfer": 3.731, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.731, "creation": 3.154213, "restoration": 0.782632, "total": 7.767142}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "624d2d2d1040a38a5cc561d481a601ba1fb8dc9cf13f2464151e47aa32bcb749", "cni.projectcalico.org/podIP": "10.42.54.202/32", "cni.projectcalico.org/podIPs": "10.42.54.202/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4h8rk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4h8rk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4h8rk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"624d2d2d1040a38a5cc561d481a601ba1fb8dc9cf13f2464151e47aa32bcb749\",\"cni.projectcalico.org/podIP\":\"10.42.54.202/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.202/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f6a6a4c8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31537\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31537", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:05:35+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:05:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:05:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:05:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.202\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:05:39+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77846892", "uid": "14a236a7-e7d7-46ee-85e4-0f701ad569c7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4h8rk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4h8rk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4h8rk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:05:35+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:05:39+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:05:39+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:05:35+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://37cb7d477ea19756547535d4ed0f77838f837e281dc9fa4f5b0867de6bdc8a01", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:05:37+00:00"}}}, {"containerID": "containerd://7a534ebe81753c50a9b06c741a3fe0c90782b0580b3ce4acd05e7da5b62701fc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:05:36+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.202", "podIPs": [{"ip": "10.42.54.202"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:05:35+00:00"}}, "message": "migration complete!", "migration_id": "f6a6a4c8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.349, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 1.281, "file_system_delay": 0.669, "file_system_transfer": 3.721, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 3.721, "creation": 3.175546, "restoration": 0.761854, "total": 7.745167}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "11cd383c8cf2575e4571ea597c6bfb3c03a22546dfbdfebda9354107071709ce", "cni.projectcalico.org/podIP": "10.42.54.239/32", "cni.projectcalico.org/podIPs": "10.42.54.239/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g9ds6\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g9ds6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g9ds6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"11cd383c8cf2575e4571ea597c6bfb3c03a22546dfbdfebda9354107071709ce\",\"cni.projectcalico.org/podIP\":\"10.42.54.239/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.239/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d99dc394\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31255\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31255", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:06:20+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:06:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:06:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:06:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.239\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:06:23+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77847240", "uid": "3d1cd27f-394d-453a-b5cf-548fed891643"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g9ds6", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g9ds6", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g9ds6", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:06:20+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:06:23+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:06:23+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:06:20+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4d8448cc3e27f89d7fb82a490e24819ac64db84f88cfea367fb1083f5134bdfe", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:06:21+00:00"}}}, {"containerID": "containerd://2e42cce27d0739bad7a64e82624b7d35454c5560868e5cee607530571e89cb6c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:06:21+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.239", "podIPs": [{"ip": "10.42.54.239"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:06:20+00:00"}}, "message": "migration complete!", "migration_id": "d99dc394", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.353, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 3.431, "file_system_delay": 2.814, "file_system_transfer": 5.88, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.88, "creation": 2.937061, "restoration": 0.767983, "total": 9.675143}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "45eaea3ed4579d34f34c2a900260be494724d633e9afb9e80d38e1729b295221", "cni.projectcalico.org/podIP": "10.42.54.249/32", "cni.projectcalico.org/podIPs": "10.42.54.249/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-426zm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-426zm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-426zm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"45eaea3ed4579d34f34c2a900260be494724d633e9afb9e80d38e1729b295221\",\"cni.projectcalico.org/podIP\":\"10.42.54.249/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.249/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"74f0a2a0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32360\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32360", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:07:06+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:07:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:07:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.249\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:07:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:07:10+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77847574", "uid": "62a68d34-d927-4c4d-af4e-39cbe92d93c2"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-426zm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-426zm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-426zm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:07:06+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:07:09+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:07:09+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:07:06+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b93a1af6c68f9744776aabad2b0ea856f62f66295fcc5e58b742ff8653d3cc68", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:07:08+00:00"}}}, {"containerID": "containerd://797a2cf8a1d05185e3e73a0dd54af00e728416dd6287fcac71e4f7941b393e06", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:07:07+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.249", "podIPs": [{"ip": "10.42.54.249"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:07:06+00:00"}}, "message": "migration complete!", "migration_id": "74f0a2a0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.367, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.33, "file_system_delay": 1.704, "file_system_transfer": 4.689, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.689, "creation": 3.174092, "restoration": 0.792326, "total": 8.751227}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "32510adc8c1b67f2118ec42b954aed1f0a8b019cce4c3070d92f06aaba1d2fc4", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-z4dgj\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-z4dgj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-z4dgj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"32510adc8c1b67f2118ec42b954aed1f0a8b019cce4c3070d92f06aaba1d2fc4\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"db0de157\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30964\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30964", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:07:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:07:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:07:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:07:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:07:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77847906", "uid": "ec7a90cd-7319-4c3b-bc75-ba62c28e4a66"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z4dgj", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z4dgj", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-z4dgj", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:07:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:07:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:07:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:07:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://39294453709872d0f0697857334c977b05feb2a92b0ffd67daf906ddcacbd0e8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:07:53+00:00"}}}, {"containerID": "containerd://1d914cd8a053b7d7b85984d4228fece1892f50a771d1a8460d2aac353011bd11", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:07:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:07:51+00:00"}}, "message": "migration complete!", "migration_id": "db0de157", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.398, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.305, "file_system_delay": 1.689, "file_system_transfer": 4.716, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.716, "creation": 3.196938, "restoration": 0.745947, "total": 8.751587}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0a5f206f1ff04ffb0569e947981bf6eccb410e9248ce81bc6703c4e3ba1b0d93", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4p25t\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4p25t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4p25t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0a5f206f1ff04ffb0569e947981bf6eccb410e9248ce81bc6703c4e3ba1b0d93\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"0\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8b4a9799\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32361\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"0\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32361", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:08:36+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:08:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:08:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:08:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:08:40+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77848252", "uid": "cb8e2033-ed51-40e9-9970-ee9e865b8811"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4p25t", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4p25t", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4p25t", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:08:36+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:08:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:08:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:08:36+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e0449d4520def857934036d1a28832221e5b30fcae01354d000783cde7c9d5cb", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:08:38+00:00"}}}, {"containerID": "containerd://da89652423d32dec3e48641ae5440952fdf3b612d306a0587be39486c20e9d35", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:08:37+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:08:36+00:00"}}, "message": "migration complete!", "migration_id": "8b4a9799", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 0.379, "checkpoint_files_delay": 0, "checkpoint_files_transfer": 2.356, "file_system_delay": 1.678, "file_system_transfer": 4.901, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.901, "creation": 3.052107, "restoration": 0.807951, "total": 8.84597}}], "128": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "47691a58d3b77869df696debb27dbfb1fdbf4a1ce890a14592230e72d0623b7e", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-phh2d\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-phh2d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-phh2d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"47691a58d3b77869df696debb27dbfb1fdbf4a1ce890a14592230e72d0623b7e\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f41c098c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30093\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30093", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:27:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:27:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:27:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:27:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:27:44+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74148764", "uid": "88df12e2-1f79-4cb6-9622-4777194d4fdc"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-phh2d", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-phh2d", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-phh2d", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:27:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:27:44+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:27:44+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:27:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://fb29308c40dc7df4fc616dc38be79ecfe6de3756998de58b0a7eaba5f2ca7e00", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:27:41+00:00"}}}, {"containerID": "containerd://684de73f1b5d32ade483f99ea9b3406a5f4465d0ac08e2b1fd574109e2d05e29", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:27:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:27:39+00:00"}}, "message": "migration complete!", "migration_id": "f41c098c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.803, "checkpoint_files_delay": 2.458, "checkpoint_files_transfer": 8.095, "file_system_delay": 1.69, "file_system_transfer": 5.338, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.095, "creation": 3.035635, "restoration": 3.593901, "total": 14.819234}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "63a0acacee0050cf1a5dc1c7677f9c6c75560af13de03f050a269d9222436d5d", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-fn7c6\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-fn7c6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-fn7c6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"63a0acacee0050cf1a5dc1c7677f9c6c75560af13de03f050a269d9222436d5d\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1f990227\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31191\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31191", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:28:32+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:28:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:28:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:28:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:28:36+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74149148", "uid": "a7c4d03d-12db-4392-9035-b49065fa3d12"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fn7c6", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fn7c6", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-fn7c6", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:28:32+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:28:36+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:28:36+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:28:32+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f3682b72d74a6add7a471bd4f80f2a77f42de5985c9e2071d56e97815fc7d137", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:28:33+00:00"}}}, {"containerID": "containerd://5fd1d314431dd1ef2d18d300068ed33febfbd62f95fdf25bb356859fe65f2d38", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:28:33+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:28:32+00:00"}}, "message": "migration complete!", "migration_id": "1f990227", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.516, "checkpoint_files_delay": 2.325, "checkpoint_files_transfer": 8.077, "file_system_delay": 1.697, "file_system_transfer": 5.483, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.077, "creation": 3.120497, "restoration": 3.569197, "total": 14.851154}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ecc6219060c8e8470a60ad675c0beb6b7fec649fa5f977e5eedb5d98a11c0e99", "cni.projectcalico.org/podIP": "10.42.54.247/32", "cni.projectcalico.org/podIPs": "10.42.54.247/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g2lg5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g2lg5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g2lg5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ecc6219060c8e8470a60ad675c0beb6b7fec649fa5f977e5eedb5d98a11c0e99\",\"cni.projectcalico.org/podIP\":\"10.42.54.247/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.247/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"9fbf22d4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30213\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30213", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:29:24+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:29:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:29:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:29:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.247\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:29:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74149531", "uid": "056cbbc3-d69b-4ade-aef0-60685451a3a0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g2lg5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g2lg5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g2lg5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:29:24+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:29:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:29:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:29:24+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a13b27121c8469f44649ecda7485448fde2c82f34c0f0ac557431b16010cb96a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:29:26+00:00"}}}, {"containerID": "containerd://a41d4c09500e45a6c443cc152b76775211c29447458e4feaa381650160a25f60", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:29:25+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.247", "podIPs": [{"ip": "10.42.54.247"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:29:24+00:00"}}, "message": "migration complete!", "migration_id": "9fbf22d4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.423, "checkpoint_files_delay": 2.299, "checkpoint_files_transfer": 7.998, "file_system_delay": 0.462, "file_system_transfer": 4.121, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.998, "creation": 3.093396, "restoration": 3.616134, "total": 14.811441}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5393842a096b07f874dba84dd6d472e09cd0544d9444b7f37ee58544558ab155", "cni.projectcalico.org/podIP": "10.42.54.238/32", "cni.projectcalico.org/podIPs": "10.42.54.238/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zzhjx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zzhjx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zzhjx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5393842a096b07f874dba84dd6d472e09cd0544d9444b7f37ee58544558ab155\",\"cni.projectcalico.org/podIP\":\"10.42.54.238/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.238/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d9ed3d89\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31593\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31593", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:53:53+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:53:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:53:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:53:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.238\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:53:57+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78019988", "uid": "009c8a3d-a2ab-4f0a-be63-b74c9ea5cc25"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zzhjx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zzhjx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zzhjx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:53:53+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:53:57+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:53:57+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:53:53+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://189d7b195f33fc284afd27e99ce2012d3a4788b1159be93a4e1ce9e6e239b065", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:53:55+00:00"}}}, {"containerID": "containerd://14e79f70f6a757352ec740a1515fae6b892a2883e1ef00090561e5a89d58d72d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:53:54+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.238", "podIPs": [{"ip": "10.42.54.238"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:53:53+00:00"}}, "message": "migration complete!", "migration_id": "d9ed3d89", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.482, "checkpoint_files_delay": 2.342, "checkpoint_files_transfer": 7.821, "file_system_delay": 1.818, "file_system_transfer": 5.298, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.821, "creation": 3.291416, "restoration": 3.7272, "total": 14.927763}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d47a18b9a51776c21d067bab12c32f6cb88bbe587baf1762c7d70f12ac120039", "cni.projectcalico.org/podIP": "10.42.54.252/32", "cni.projectcalico.org/podIPs": "10.42.54.252/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-hf5g4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-hf5g4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-hf5g4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d47a18b9a51776c21d067bab12c32f6cb88bbe587baf1762c7d70f12ac120039\",\"cni.projectcalico.org/podIP\":\"10.42.54.252/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.252/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b9cba995\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32018\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32018", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:54:46+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:54:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:54:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:54:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.252\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:54:50+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78020380", "uid": "16e0ea78-312e-4d32-96bd-689dc1c85d11"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hf5g4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hf5g4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-hf5g4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:54:46+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:54:50+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:54:50+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:54:46+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6ab2a5b6c3f5bfe1740a41b6a980eb2f731cf2a6a94e434c9c6f012d257d6272", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:54:48+00:00"}}}, {"containerID": "containerd://892ee1a5b13f45546c9dd10ded8cfd78a8c4eb311eeef50d4c0fb9bf3929af15", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:54:47+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.252", "podIPs": [{"ip": "10.42.54.252"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:54:46+00:00"}}, "message": "migration complete!", "migration_id": "b9cba995", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.348, "checkpoint_files_delay": 2.269, "checkpoint_files_transfer": 7.801, "file_system_delay": 1.707, "file_system_transfer": 5.431, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.801, "creation": 3.305533, "restoration": 3.666062, "total": 14.870349}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3701149ba5eef34355371f75acb12ac52787ae35df98f2a9eea93e930077b3bc", "cni.projectcalico.org/podIP": "10.42.54.198/32", "cni.projectcalico.org/podIPs": "10.42.54.198/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jrjmh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jrjmh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jrjmh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3701149ba5eef34355371f75acb12ac52787ae35df98f2a9eea93e930077b3bc\",\"cni.projectcalico.org/podIP\":\"10.42.54.198/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.198/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4bcc160e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31450\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31450", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:55:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:55:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:55:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:55:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.198\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:55:43+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78020763", "uid": "f4f378bc-ff27-470d-8fff-6c2a03a15fba"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jrjmh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jrjmh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jrjmh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:55:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:55:43+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:55:43+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:55:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://baf6f134003012abaa39ce65f69786eeab91cb115937944562f1492a680a65b2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:55:41+00:00"}}}, {"containerID": "containerd://15c209b02d863175537748a8f49546885762efc2fac78ace14ed5a57f8d9ef0c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:55:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.198", "podIPs": [{"ip": "10.42.54.198"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:55:39+00:00"}}, "message": "migration complete!", "migration_id": "4bcc160e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.493, "checkpoint_files_delay": 2.808, "checkpoint_files_transfer": 7.805, "file_system_delay": 2.801, "file_system_transfer": 6.528, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.805, "creation": 3.027453, "restoration": 3.520942, "total": 14.444911}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e8ba8518b557250012f5840a67a6b19a25f4d6cb4f9ce9981d216cb55a9a76ce", "cni.projectcalico.org/podIP": "10.42.54.228/32", "cni.projectcalico.org/podIPs": "10.42.54.228/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xtvbh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xtvbh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xtvbh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e8ba8518b557250012f5840a67a6b19a25f4d6cb4f9ce9981d216cb55a9a76ce\",\"cni.projectcalico.org/podIP\":\"10.42.54.228/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.228/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"fc70ba68\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30024\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30024", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:56:31+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:56:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:56:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:56:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.228\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:56:35+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78021152", "uid": "103aaad3-25a0-48dd-a059-e05bed880881"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xtvbh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xtvbh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xtvbh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:56:31+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:56:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:56:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:56:31+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5518a21e33334f881add27fe8783ad62d8fb41136583bf517733b9154fa25027", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:56:33+00:00"}}}, {"containerID": "containerd://701dc973ded9866069fba8339651ee4d6c5c9445a80ff89cf8aa907f0fdea4cd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:56:33+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.228", "podIPs": [{"ip": "10.42.54.228"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:56:31+00:00"}}, "message": "migration complete!", "migration_id": "fc70ba68", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.521, "checkpoint_files_delay": 2.821, "checkpoint_files_transfer": 7.849, "file_system_delay": 2.811, "file_system_transfer": 6.467, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.849, "creation": 3.160319, "restoration": 3.636835, "total": 14.74663}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "62cdf481f873b78d4e359acb0ea59f80d1f36f6796431c2e316f4cef3b47ec57", "cni.projectcalico.org/podIP": "10.42.54.222/32", "cni.projectcalico.org/podIPs": "10.42.54.222/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-97w8w\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-97w8w\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-97w8w\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"62cdf481f873b78d4e359acb0ea59f80d1f36f6796431c2e316f4cef3b47ec57\",\"cni.projectcalico.org/podIP\":\"10.42.54.222/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.222/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"a69d5586\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31926\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31926", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:57:24+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:57:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:57:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:57:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.222\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:57:28+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78021529", "uid": "7ea15598-59da-489a-89f4-279bcfaa6c0d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-97w8w", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-97w8w", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-97w8w", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:57:24+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:57:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:57:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:57:24+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://2e8bd88b21efbdb8c7aec47bbdec134880cccb199a031f4c8d09db54c5aa07cc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:57:25+00:00"}}}, {"containerID": "containerd://4ffdfd7d0ea95a2f4474a349cce4a1eab7442efd9b8e4aa538cd01acf0c36643", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:57:25+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.222", "podIPs": [{"ip": "10.42.54.222"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:57:24+00:00"}}, "message": "migration complete!", "migration_id": "a69d5586", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.456, "checkpoint_files_delay": 2.295, "checkpoint_files_transfer": 7.643, "file_system_delay": 1.709, "file_system_transfer": 5.341, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.643, "creation": 3.183882, "restoration": 3.689092, "total": 14.601794}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5f2b83bbbbff5d101b0baa4e772d0ba7032c5e66c3647ca98c5bc556278c716c", "cni.projectcalico.org/podIP": "10.42.54.204/32", "cni.projectcalico.org/podIPs": "10.42.54.204/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-b95qm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-b95qm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-b95qm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5f2b83bbbbff5d101b0baa4e772d0ba7032c5e66c3647ca98c5bc556278c716c\",\"cni.projectcalico.org/podIP\":\"10.42.54.204/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.204/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0b760b19\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31368\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31368", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:58:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:58:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:58:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:58:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.204\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:58:20+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78021915", "uid": "0845563f-0c55-45b8-936e-10a13cceac1f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b95qm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b95qm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-b95qm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:58:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:58:20+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:58:20+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:58:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e242bb5ab0b71553e20e60ea3d1797893186dfa9d07c0c260061c183f9b49e9d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:58:18+00:00"}}}, {"containerID": "containerd://0c38666ee96e5221278a8b5b08c238375c2b13ef50f44236724222fe66fb2242", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:58:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.204", "podIPs": [{"ip": "10.42.54.204"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:58:16+00:00"}}, "message": "migration complete!", "migration_id": "0b760b19", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.389, "checkpoint_files_delay": 2.237, "checkpoint_files_transfer": 7.689, "file_system_delay": 1.7, "file_system_transfer": 5.517, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.689, "creation": 3.09186, "restoration": 3.588867, "total": 14.461991}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "90cb003fbd6575c75b54718e0bb8854c9fff6ebefd3ddc2f8fb9f7667e28af98", "cni.projectcalico.org/podIP": "10.42.54.231/32", "cni.projectcalico.org/podIPs": "10.42.54.231/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-b76fg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-b76fg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-b76fg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"90cb003fbd6575c75b54718e0bb8854c9fff6ebefd3ddc2f8fb9f7667e28af98\",\"cni.projectcalico.org/podIP\":\"10.42.54.231/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.231/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8da622db\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32671\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32671", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:59:08+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:59:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:59:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:59:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.231\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:59:12+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78022295", "uid": "c80e5756-f4a3-4c47-ba2b-a7fcfdfcede4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b76fg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b76fg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-b76fg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:59:08+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:59:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:59:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:59:08+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://7868db1ba851fe2a2adb4f75bdc7f278820a5bb9834f70e6edf117f5dc2ef792", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:59:10+00:00"}}}, {"containerID": "containerd://e6091ff3dbc3cf5d623ade5e318078b18ebf487e3e9ea3e0a5632367057e2165", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:59:09+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.231", "podIPs": [{"ip": "10.42.54.231"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:59:08+00:00"}}, "message": "migration complete!", "migration_id": "8da622db", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.506, "checkpoint_files_delay": 2.832, "checkpoint_files_transfer": 7.759, "file_system_delay": 2.826, "file_system_transfer": 6.739, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.759, "creation": 3.036132, "restoration": 3.544259, "total": 14.425654}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5efebd931cd9731589d06a4d9850bd7d70fc2fbe4822e63965068cc41249c666", "cni.projectcalico.org/podIP": "10.42.54.227/32", "cni.projectcalico.org/podIPs": "10.42.54.227/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vz4xs\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vz4xs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vz4xs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5efebd931cd9731589d06a4d9850bd7d70fc2fbe4822e63965068cc41249c666\",\"cni.projectcalico.org/podIP\":\"10.42.54.227/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.227/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0ffd29c2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32078\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32078", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:00:00+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:00:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:00:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:00:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.227\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:00:04+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78022684", "uid": "e78572a5-505a-44ae-a112-bb8598982d33"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vz4xs", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vz4xs", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vz4xs", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:00:00+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:00:04+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:00:04+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:00:00+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4d636daac8ae265400fa2becde43f468f795de03af8cba0270d2f526674d5bda", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:00:02+00:00"}}}, {"containerID": "containerd://c3cb6f59b4137683b0a6ea31c8467362ffb2e3fb00576005a345029702a74020", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:00:01+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.227", "podIPs": [{"ip": "10.42.54.227"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:00:00+00:00"}}, "message": "migration complete!", "migration_id": "0ffd29c2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.42, "checkpoint_files_delay": 2.293, "checkpoint_files_transfer": 7.799, "file_system_delay": 1.722, "file_system_transfer": 5.273, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.799, "creation": 3.110014, "restoration": 3.576374, "total": 14.582747}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "055005c521a14a23238c14b39ebda2fc8d282b74d5a1e16f04d2307e4904b6ab", "cni.projectcalico.org/podIP": "10.42.54.237/32", "cni.projectcalico.org/podIPs": "10.42.54.237/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-5sdb5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-5sdb5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-5sdb5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"055005c521a14a23238c14b39ebda2fc8d282b74d5a1e16f04d2307e4904b6ab\",\"cni.projectcalico.org/podIP\":\"10.42.54.237/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.237/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e9f86b13\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31932\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31932", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:00:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:00:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:00:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:00:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.237\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:00:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78023070", "uid": "44a68765-6b4c-4f29-a9e2-a6052ec539f7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5sdb5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5sdb5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-5sdb5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:00:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:00:57+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:00:57+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:00:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a1a27afcdd60f4780d8a46f0ef148819ab95c310535e301f063653963cc8cece", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:00:55+00:00"}}}, {"containerID": "containerd://2cd44534a970707e06bc187235f4884f26cbfd69152f2367329669ce590a879e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:00:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.237", "podIPs": [{"ip": "10.42.54.237"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:00:54+00:00"}}, "message": "migration complete!", "migration_id": "e9f86b13", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.592, "checkpoint_files_delay": 2.82, "checkpoint_files_transfer": 7.73, "file_system_delay": 2.813, "file_system_transfer": 6.357, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.73, "creation": 3.060841, "restoration": 3.553214, "total": 14.43662}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "87a80cdca5acb7119e03cd3a9122a73bdbb6dc23b348e74f952b48937908f653", "cni.projectcalico.org/podIP": "10.42.54.245/32", "cni.projectcalico.org/podIPs": "10.42.54.245/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zkn4c\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zkn4c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zkn4c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"87a80cdca5acb7119e03cd3a9122a73bdbb6dc23b348e74f952b48937908f653\",\"cni.projectcalico.org/podIP\":\"10.42.54.245/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.245/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"cfa575a1\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30866\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30866", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:01:46+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:01:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:01:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:01:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.245\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:01:50+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78023462", "uid": "65f3805d-e6a1-4af3-b807-186feea58e62"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zkn4c", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zkn4c", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zkn4c", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:01:46+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:01:50+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:01:50+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:01:46+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://2feb5abaab88f9dcd163ef03e55eb3a0578d2028bb6db3e0808592aa857eedb8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:01:48+00:00"}}}, {"containerID": "containerd://02ef997a1a6fc1079e0ec6d78611c71469f403af10fc8419269e3bb0abb2f414", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:01:47+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.245", "podIPs": [{"ip": "10.42.54.245"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:01:46+00:00"}}, "message": "migration complete!", "migration_id": "cfa575a1", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.75, "checkpoint_files_delay": 2.206, "checkpoint_files_transfer": 8.108, "file_system_delay": 1.691, "file_system_transfer": 5.263, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.108, "creation": 3.035486, "restoration": 3.808314, "total": 15.042212}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "54501265374b06c8b41cea764ff394d2bba216c6098077ae7252038bee128b6c", "cni.projectcalico.org/podIP": "10.42.54.219/32", "cni.projectcalico.org/podIPs": "10.42.54.219/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8d9xj\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8d9xj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8d9xj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"54501265374b06c8b41cea764ff394d2bba216c6098077ae7252038bee128b6c\",\"cni.projectcalico.org/podIP\":\"10.42.54.219/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.219/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"973a134c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30161\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30161", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:02:40+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:02:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:02:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:02:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.219\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:02:44+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78023853", "uid": "1e00ad02-15b0-449d-ac1d-f087e9152b67"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8d9xj", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8d9xj", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8d9xj", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:02:40+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:02:44+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:02:44+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:02:40+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6c0723c7dae964c0a6323e49497719715f04eaf0b992461e57dba8edc99f1176", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:02:42+00:00"}}}, {"containerID": "containerd://50d47e2fb7fd987004501cc523a7fbd732cd6a8f32b8df7a7f896ca0d22d606b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:02:41+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.219", "podIPs": [{"ip": "10.42.54.219"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:02:40+00:00"}}, "message": "migration complete!", "migration_id": "973a134c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.675, "checkpoint_files_delay": 2.381, "checkpoint_files_transfer": 8.029, "file_system_delay": 1.717, "file_system_transfer": 5.439, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.029, "creation": 3.046655, "restoration": 3.690467, "total": 14.861198}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "be344d5910d423e1686bacd1f7d00b9db2a36e9e409d390b1ed4c9c6142cd842", "cni.projectcalico.org/podIP": "10.42.54.251/32", "cni.projectcalico.org/podIPs": "10.42.54.251/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8wfgk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8wfgk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8wfgk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"be344d5910d423e1686bacd1f7d00b9db2a36e9e409d390b1ed4c9c6142cd842\",\"cni.projectcalico.org/podIP\":\"10.42.54.251/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.251/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"befca9d4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32553\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32553", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:03:34+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:03:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:03:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:03:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.251\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:03:38+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78024250", "uid": "558d0c21-99eb-4918-b35f-4b9114dfd49c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8wfgk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8wfgk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8wfgk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:03:34+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:03:38+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:03:38+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:03:34+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://57eb913173175b7ed65bdec5e087df110fd4dad5a0c9c42500bed6ffcfe4e7bc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:03:36+00:00"}}}, {"containerID": "containerd://816c5a9693df120bc2cf266e351be968aea8bc0a06913f3c38147b039a0c07e4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:03:35+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.251", "podIPs": [{"ip": "10.42.54.251"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:03:34+00:00"}}, "message": "migration complete!", "migration_id": "befca9d4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.464, "checkpoint_files_delay": 2.266, "checkpoint_files_transfer": 7.819, "file_system_delay": 1.679, "file_system_transfer": 5.391, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.819, "creation": 3.356684, "restoration": 3.790484, "total": 15.063948}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "be1da33153b35edb8e04db013b0aa618fb22a6776dd1de47ecbe3caeed73cfdc", "cni.projectcalico.org/podIP": "10.42.54.205/32", "cni.projectcalico.org/podIPs": "10.42.54.205/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-z6vcx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-z6vcx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-z6vcx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"be1da33153b35edb8e04db013b0aa618fb22a6776dd1de47ecbe3caeed73cfdc\",\"cni.projectcalico.org/podIP\":\"10.42.54.205/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.205/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"067cc323\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31009\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31009", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:04:28+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:04:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:04:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.205\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:04:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:04:32+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78024640", "uid": "a3fbe2b8-ddb3-409b-9b21-1ada305f9bc7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z6vcx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z6vcx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-z6vcx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:04:28+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:04:31+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:04:31+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:04:28+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://130a5e480101a2b8cd0b4a74c53b10b4b2274f5cc1cbac69b3ad9947aa6c0867", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:04:29+00:00"}}}, {"containerID": "containerd://0ed8475923cef2a1a85031a4aab08287983d866c55b4002e5597e0f37e646293", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:04:29+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.205", "podIPs": [{"ip": "10.42.54.205"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:04:28+00:00"}}, "message": "migration complete!", "migration_id": "067cc323", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.484, "checkpoint_files_delay": 2.234, "checkpoint_files_transfer": 7.999, "file_system_delay": 1.688, "file_system_transfer": 5.286, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.999, "creation": 3.067644, "restoration": 3.584683, "total": 14.755703}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cc106bc22d945617281a000fb88104125e476252f69f231b41a8198156ba717b", "cni.projectcalico.org/podIP": "10.42.54.214/32", "cni.projectcalico.org/podIPs": "10.42.54.214/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8qdpw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8qdpw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8qdpw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cc106bc22d945617281a000fb88104125e476252f69f231b41a8198156ba717b\",\"cni.projectcalico.org/podIP\":\"10.42.54.214/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.214/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"aa50a4e0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30276\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30276", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:05:21+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:05:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:05:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:05:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.214\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:05:25+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78025025", "uid": "03b654d5-4c3d-42ff-b359-a89c879d07b2"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8qdpw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8qdpw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8qdpw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:05:21+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:05:25+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:05:25+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:05:21+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://687ae15ba437e0cb30a8a5f3398052ea6e4a6e46ba24d43e6a7aa1891d456cbb", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:05:23+00:00"}}}, {"containerID": "containerd://7885d405a4209ae5d613937422fba8143e28a1482374c2330646645ce9e78225", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:05:22+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.214", "podIPs": [{"ip": "10.42.54.214"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:05:21+00:00"}}, "message": "migration complete!", "migration_id": "aa50a4e0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.625, "checkpoint_files_delay": 2.281, "checkpoint_files_transfer": 8.08, "file_system_delay": 1.698, "file_system_transfer": 5.476, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.08, "creation": 2.999065, "restoration": 3.578404, "total": 14.74994}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "4ea6b7ee54743a9964422da2d142e2c62480f507a1b311ceca9c5db7d2beb68e", "cni.projectcalico.org/podIP": "10.42.54.243/32", "cni.projectcalico.org/podIPs": "10.42.54.243/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-hnvw5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-hnvw5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-hnvw5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"4ea6b7ee54743a9964422da2d142e2c62480f507a1b311ceca9c5db7d2beb68e\",\"cni.projectcalico.org/podIP\":\"10.42.54.243/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.243/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"06b581ea\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31021\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31021", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:06:14+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:06:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:06:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:06:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.243\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:06:18+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78025419", "uid": "14b60646-d630-475f-973b-e28685eed9cf"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hnvw5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hnvw5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-hnvw5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:06:14+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:06:18+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:06:18+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:06:14+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://236e53bba3d135e3faac1ed033a7600abd162ca98f83855310c99390a8f6c0d0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:06:16+00:00"}}}, {"containerID": "containerd://629ac528de6a4c836b2d411ad0008e3edd94c307261a44ec529304548f1acf77", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:06:15+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.243", "podIPs": [{"ip": "10.42.54.243"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:06:14+00:00"}}, "message": "migration complete!", "migration_id": "06b581ea", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.423, "checkpoint_files_delay": 2.825, "checkpoint_files_transfer": 7.921, "file_system_delay": 2.815, "file_system_transfer": 6.481, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.921, "creation": 3.08076, "restoration": 3.661457, "total": 14.764292}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "4daa8d61c054fa840f80881ecb963919d156e1c978998ff6f5166aacbd1c7d45", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-v2t45\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-v2t45\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-v2t45\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"4daa8d61c054fa840f80881ecb963919d156e1c978998ff6f5166aacbd1c7d45\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"11165c97\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31159\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31159", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:07:08+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:07:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:07:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:07:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:07:12+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78025814", "uid": "03d5e6d3-6e1e-4065-9e99-4e7659e70d8d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v2t45", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v2t45", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-v2t45", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:07:09+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:07:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:07:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:07:08+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d21cb5b66947e55b9eac578f42d0e7cb988476f0d4b04821edcc166b6521caac", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:07:10+00:00"}}}, {"containerID": "containerd://47793118f00fa81dbda44d30de6f96d127cfe1899774ac2c5dcca6935eea6bfc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:07:10+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:07:09+00:00"}}, "message": "migration complete!", "migration_id": "11165c97", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.774, "checkpoint_files_delay": 2.35, "checkpoint_files_transfer": 8.015, "file_system_delay": 0.673, "file_system_transfer": 4.232, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 8.015, "creation": 3.250534, "restoration": 3.608347, "total": 14.955769}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2919efb2faf1019a69f52713466b5e7373fa0bcfec8364c980263303c84019c0", "cni.projectcalico.org/podIP": "10.42.54.229/32", "cni.projectcalico.org/podIPs": "10.42.54.229/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-btbhx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-btbhx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-btbhx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2919efb2faf1019a69f52713466b5e7373fa0bcfec8364c980263303c84019c0\",\"cni.projectcalico.org/podIP\":\"10.42.54.229/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.229/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"88411800\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30679\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30679", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:08:02+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:08:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:08:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.229\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:08:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:08:06+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78026266", "uid": "1d41e901-1b0f-47c7-afe6-62f8d01cb335"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-btbhx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-btbhx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-btbhx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:08:02+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:08:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:08:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:08:02+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://61fa6f8c740e8910dba3d594285dac96518a22da46e342514019a3db47bbbf5d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:08:03+00:00"}}}, {"containerID": "containerd://02e460dbc29764ff8796ff1627793a0afe3a324920a859396268ce10ddf24260", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:08:03+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.229", "podIPs": [{"ip": "10.42.54.229"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:08:02+00:00"}}, "message": "migration complete!", "migration_id": "88411800", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.531, "checkpoint_files_delay": 2.348, "checkpoint_files_transfer": 7.604, "file_system_delay": 1.741, "file_system_transfer": 5.537, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.604, "creation": 3.094046, "restoration": 3.643087, "total": 14.438495}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f8c7943cb69e5c72d1fe5dba2c2bdd737dea9bae53ca6ef5f7c0d1c3b1f6e1fb", "cni.projectcalico.org/podIP": "10.42.54.234/32", "cni.projectcalico.org/podIPs": "10.42.54.234/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tqvrh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tqvrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tqvrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f8c7943cb69e5c72d1fe5dba2c2bdd737dea9bae53ca6ef5f7c0d1c3b1f6e1fb\",\"cni.projectcalico.org/podIP\":\"10.42.54.234/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.234/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2f659b3c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32368\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32368", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:08:55+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:08:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:08:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:08:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.234\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:08:59+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78026651", "uid": "0a0a5146-21ad-4b0a-8d33-37873542f69b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tqvrh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tqvrh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tqvrh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:08:55+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:08:59+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:08:59+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:08:55+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3617d664ecc6ddf25e987b4d96d28d89ecb15c67349898e00b28be002ed10886", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:08:57+00:00"}}}, {"containerID": "containerd://9e61aa4e93de547e3782239434fdee1bc674ca3bd730fa4611fe00ad54c3c9d4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:08:56+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.234", "podIPs": [{"ip": "10.42.54.234"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:08:55+00:00"}}, "message": "migration complete!", "migration_id": "2f659b3c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.386, "checkpoint_files_delay": 2.166, "checkpoint_files_transfer": 7.445, "file_system_delay": 1.684, "file_system_transfer": 5.592, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.445, "creation": 3.047226, "restoration": 3.665804, "total": 14.247557}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ca712f4aae465dcc228ae383017f759d68a089db3ca8951c148c0d79b13508e3", "cni.projectcalico.org/podIP": "10.42.54.240/32", "cni.projectcalico.org/podIPs": "10.42.54.240/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-54jrw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-54jrw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-54jrw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ca712f4aae465dcc228ae383017f759d68a089db3ca8951c148c0d79b13508e3\",\"cni.projectcalico.org/podIP\":\"10.42.54.240/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.240/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"a958d8c8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31742\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31742", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:09:48+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:09:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:09:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:09:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.240\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:09:52+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78027046", "uid": "376c37c2-cb1d-4a92-a461-e83b60c0fc7e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-54jrw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-54jrw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-54jrw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:09:48+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:09:52+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:09:52+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:09:48+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ef42bc71ad97b086c4d124f5150c890953a2f478815cee01389c2d82664114d0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:09:50+00:00"}}}, {"containerID": "containerd://e02699b725706e0b1d5781402ab37502431b312b8bc77901869e45670489c1bd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:09:49+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.240", "podIPs": [{"ip": "10.42.54.240"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:09:48+00:00"}}, "message": "migration complete!", "migration_id": "a958d8c8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.363, "checkpoint_files_delay": 2.214, "checkpoint_files_transfer": 7.929, "file_system_delay": 0.573, "file_system_transfer": 4.015, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.929, "creation": 3.257214, "restoration": 3.548089, "total": 14.82776}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c239550602c11804eb0b0cddd7a6b4dcd4798961796fec12e974d41fe1bb0152", "cni.projectcalico.org/podIP": "10.42.54.206/32", "cni.projectcalico.org/podIPs": "10.42.54.206/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9kl2h\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9kl2h\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9kl2h\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c239550602c11804eb0b0cddd7a6b4dcd4798961796fec12e974d41fe1bb0152\",\"cni.projectcalico.org/podIP\":\"10.42.54.206/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.206/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e8d12f0a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31601\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31601", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:10:41+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:10:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:10:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:10:45+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.206\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:10:45+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78027433", "uid": "bd077e96-514b-4ce4-8352-5da4c5cfe78f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9kl2h", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9kl2h", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9kl2h", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:10:41+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:10:45+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:10:45+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:10:41+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3cc5f0a7cbf695530a31f091b6016223dcd37a0481020c79965d81f443bed13f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:10:43+00:00"}}}, {"containerID": "containerd://616095b8615ba3cf8a03aebd6ac9db862435cefad83e264003628d3af5c45e6d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:10:42+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.206", "podIPs": [{"ip": "10.42.54.206"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:10:41+00:00"}}, "message": "migration complete!", "migration_id": "e8d12f0a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.338, "checkpoint_files_delay": 2.821, "checkpoint_files_transfer": 7.657, "file_system_delay": 2.812, "file_system_transfer": 6.714, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.657, "creation": 3.0802, "restoration": 3.588364, "total": 14.412494}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "37a5f0cbd668c64582f8a65dff688913f42cb956dc742c1adcbe25da063cf392", "cni.projectcalico.org/podIP": "10.42.54.221/32", "cni.projectcalico.org/podIPs": "10.42.54.221/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-gjcm5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-gjcm5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-gjcm5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"37a5f0cbd668c64582f8a65dff688913f42cb956dc742c1adcbe25da063cf392\",\"cni.projectcalico.org/podIP\":\"10.42.54.221/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.221/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b47536d5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32225\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32225", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:11:35+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:11:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:11:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.221\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:11:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:11:39+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78027824", "uid": "8bce6ac6-ec2b-48ff-867c-14f2ad1572d1"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gjcm5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gjcm5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-gjcm5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:11:35+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:11:38+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:11:38+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:11:35+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://663abeb737184e5088a56114077ff7d152ca37cf67ff6f183a4848988e7cd6e9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:11:36+00:00"}}}, {"containerID": "containerd://7e4622e0b93e31c4b1413f6f3920e18ed7fbb2de6466a4df6a8bb6f887b05001", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:11:36+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.221", "podIPs": [{"ip": "10.42.54.221"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:11:35+00:00"}}, "message": "migration complete!", "migration_id": "b47536d5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.661, "checkpoint_files_delay": 2.279, "checkpoint_files_transfer": 7.935, "file_system_delay": 1.677, "file_system_transfer": 5.705, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.935, "creation": 3.311661, "restoration": 3.600344, "total": 14.949942}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "99b6fa489bd7b2b25770b4d66dcafcde41d273c6999a3b7cea002314470e133e", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-pxrfz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-pxrfz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-pxrfz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"99b6fa489bd7b2b25770b4d66dcafcde41d273c6999a3b7cea002314470e133e\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5c49dc61\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30724\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30724", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:12:29+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:12:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:12:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:12:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:12:33+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78028215", "uid": "df5bec8a-2367-48cd-adbf-eb72187dbc1a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-pxrfz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-pxrfz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-pxrfz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:12:29+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:12:33+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:12:33+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:12:29+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://df37ed9f6287e6a1b342bfd1aa51959d6c7b52d2f92a239d8a618840b7f1afa9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:12:31+00:00"}}}, {"containerID": "containerd://e0f058e4be01459f41f1c5d31d092562ba8c4be12e9c0046ed85d12ed747700c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:12:30+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:12:29+00:00"}}, "message": "migration complete!", "migration_id": "5c49dc61", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.69, "checkpoint_files_delay": 2.418, "checkpoint_files_transfer": 7.778, "file_system_delay": 1.705, "file_system_transfer": 5.54, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.778, "creation": 3.268985, "restoration": 3.594312, "total": 14.746968}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2883c6001b3175334e6bb45c901af7e07eb8fd26073c315e021e3e067a094437", "cni.projectcalico.org/podIP": "10.42.54.220/32", "cni.projectcalico.org/podIPs": "10.42.54.220/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-52g52\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-52g52\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-52g52\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2883c6001b3175334e6bb45c901af7e07eb8fd26073c315e021e3e067a094437\",\"cni.projectcalico.org/podIP\":\"10.42.54.220/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.220/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b37bb245\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31408\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31408", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:13:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:13:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:13:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:13:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.220\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:13:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78028606", "uid": "332fa524-6abd-4a55-b382-3a848950f422"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-52g52", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-52g52", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-52g52", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:13:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:13:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:13:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:13:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://334a3e7af51fb83945f3d60d10f94f95cedeb565e0b3832225dc48d462dee9cb", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:13:25+00:00"}}}, {"containerID": "containerd://fdc7c42745298989392b4be02fee41e9b3931374456c91534f7a2bec0107a43f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:13:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.220", "podIPs": [{"ip": "10.42.54.220"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:13:23+00:00"}}, "message": "migration complete!", "migration_id": "b37bb245", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.543, "checkpoint_files_delay": 2.245, "checkpoint_files_transfer": 7.845, "file_system_delay": 1.683, "file_system_transfer": 5.479, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.845, "creation": 3.003428, "restoration": 3.743201, "total": 14.690002}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b3565f792e862ca6963b40f7038efbc10e82e635bd472d8be0efa6f814154b6f", "cni.projectcalico.org/podIP": "10.42.54.230/32", "cni.projectcalico.org/podIPs": "10.42.54.230/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8wrd7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8wrd7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8wrd7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b3565f792e862ca6963b40f7038efbc10e82e635bd472d8be0efa6f814154b6f\",\"cni.projectcalico.org/podIP\":\"10.42.54.230/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.230/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"86ee94db\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32508\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32508", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:14:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:14:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:14:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:14:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.230\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:14:20+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78028999", "uid": "5c37eb4f-ea59-4a79-a11f-2620e79f7a5e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8wrd7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8wrd7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8wrd7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:14:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:14:20+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:14:20+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:14:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://9f710366e1d194b0d2b7a1d55265487d1cc52c1a84420f07dbe9c57e41b189d5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:14:18+00:00"}}}, {"containerID": "containerd://d568f58fca86826486c248d6779dbebb5d76a80b542d080226590102cd0da7ac", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:14:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.230", "podIPs": [{"ip": "10.42.54.230"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:14:16+00:00"}}, "message": "migration complete!", "migration_id": "86ee94db", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.428, "checkpoint_files_delay": 2.22, "checkpoint_files_transfer": 7.799, "file_system_delay": 1.693, "file_system_transfer": 5.424, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.799, "creation": 3.076657, "restoration": 3.719974, "total": 14.683365}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9988ef6430289023e83bdf8ad5f80a81ee87980af9878dc2c00c2f407af3a885", "cni.projectcalico.org/podIP": "10.42.54.225/32", "cni.projectcalico.org/podIPs": "10.42.54.225/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-44vpx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-44vpx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-44vpx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9988ef6430289023e83bdf8ad5f80a81ee87980af9878dc2c00c2f407af3a885\",\"cni.projectcalico.org/podIP\":\"10.42.54.225/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.225/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"956bfe50\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31891\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31891", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:15:10+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:15:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:15:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.225\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:15:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:15:14+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78029391", "uid": "fa05585d-7242-4f6b-8978-b36282e1db7f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-44vpx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-44vpx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-44vpx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:15:10+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:15:13+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:15:13+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:15:10+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://2fec7f2cb524c0d4ebeb2b171b3b87a09279d708d6c1bfa97b2cc57295c4c4a6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:15:11+00:00"}}}, {"containerID": "containerd://39beea510d081eede31cd06967181a02ca24413477930e741e085d9b58b73316", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:15:11+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.225", "podIPs": [{"ip": "10.42.54.225"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:15:10+00:00"}}, "message": "migration complete!", "migration_id": "956bfe50", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.602, "checkpoint_files_delay": 2.815, "checkpoint_files_transfer": 7.89, "file_system_delay": 2.807, "file_system_transfer": 6.181, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.89, "creation": 3.046701, "restoration": 3.901136, "total": 14.932768}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c31f527ef944adeb49e7a288a716899863ed994556c95b153f85526bced6c8da", "cni.projectcalico.org/podIP": "10.42.54.235/32", "cni.projectcalico.org/podIPs": "10.42.54.235/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vhbg7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vhbg7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vhbg7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c31f527ef944adeb49e7a288a716899863ed994556c95b153f85526bced6c8da\",\"cni.projectcalico.org/podIP\":\"10.42.54.235/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.235/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1b4a811d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32042\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32042", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:16:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:16:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:16:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:16:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.235\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:16:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78029780", "uid": "02673862-f390-48a2-8c03-6f37691093b1"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vhbg7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vhbg7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vhbg7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:16:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:16:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:16:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:16:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0182316c26fd008c56659933683c26ef51624972c905c63cd767558eda0ec322", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:16:05+00:00"}}}, {"containerID": "containerd://e119deaaf4dc3d66c50d5342526f54f2c3b83e4fa651d8ef54a27e57076af24d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:16:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.235", "podIPs": [{"ip": "10.42.54.235"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:16:03+00:00"}}, "message": "migration complete!", "migration_id": "1b4a811d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.461, "checkpoint_files_delay": 2.336, "checkpoint_files_transfer": 7.877, "file_system_delay": 0.694, "file_system_transfer": 4.345, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.877, "creation": 3.155602, "restoration": 3.691732, "total": 14.823465}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f7650f081c10da942b491ec93585186c0c58c239a824a1233faad7b6a92dde39", "cni.projectcalico.org/podIP": "10.42.54.218/32", "cni.projectcalico.org/podIPs": "10.42.54.218/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-p5nzf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-p5nzf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-p5nzf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f7650f081c10da942b491ec93585186c0c58c239a824a1233faad7b6a92dde39\",\"cni.projectcalico.org/podIP\":\"10.42.54.218/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.218/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"128\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"a279d72d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31529\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"128\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31529", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:16:56+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:16:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:16:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:17:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.218\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:17:00+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78030166", "uid": "e16fddc0-6d24-45db-ab19-0dcf00f961c0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-p5nzf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-p5nzf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-p5nzf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:16:56+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:17:00+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:17:00+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:16:56+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d58a4616faab88a5daf42dab00a40abf177e6017a1eae7b609a33e8e024cea28", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:16:58+00:00"}}}, {"containerID": "containerd://aa5a249b8e20c195e007a4787b8774788e01089b236b799223a573ef58d77baf", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:16:57+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.218", "podIPs": [{"ip": "10.42.54.218"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:16:56+00:00"}}, "message": "migration complete!", "migration_id": "a279d72d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 6.471, "checkpoint_files_delay": 2.244, "checkpoint_files_transfer": 7.754, "file_system_delay": 1.696, "file_system_transfer": 5.206, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 7.754, "creation": 3.168097, "restoration": 3.531635, "total": 14.549923}}], "256": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7b1f21616a10cbff30d7e40951cb9189bebacb6149324a4228e18adb396fff10", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-gtrkl\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-gtrkl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-gtrkl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7b1f21616a10cbff30d7e40951cb9189bebacb6149324a4228e18adb396fff10\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"75fd4b29\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32471\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32471", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:30:17+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:30:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:30:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:30:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:30:22+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74149976", "uid": "8b20616b-0e2a-4170-ba6b-f76fc0d7e4a8"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gtrkl", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gtrkl", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-gtrkl", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:30:17+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:30:22+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:30:22+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:30:17+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://fa5fedb923a204c35f5d2fe19236a10fddf2daa6a6f71937a6602c82eaa6d57e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:30:19+00:00"}}}, {"containerID": "containerd://5e454e7f9d881bbcd8783d84931e5ee845f034e8d3507e8bbc10c4abc1c6f172", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:30:18+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:30:17+00:00"}}, "message": "migration complete!", "migration_id": "75fd4b29", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.773, "checkpoint_files_delay": 4.606, "checkpoint_files_transfer": 14.06, "file_system_delay": 1.702, "file_system_transfer": 4.871, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.06, "creation": 3.146621, "restoration": 7.09505, "total": 24.394241}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7b7fef948d95638f57ecf9674fe321e2eb2aa8df628ec88e81e13d9e3597a6a2", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-m74rc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-m74rc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-m74rc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7b7fef948d95638f57ecf9674fe321e2eb2aa8df628ec88e81e13d9e3597a6a2\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"01406913\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30398\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30398", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:31:19+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:31:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:31:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:31:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:31:24+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74150404", "uid": "03db03d2-1fc4-4ee6-a2b2-8310d61d4073"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-m74rc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-m74rc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-m74rc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:31:19+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:31:24+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:31:24+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:31:19+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e70e848e42c6549f8e32268d71826c23d6c75f0d58832c580221a963d9b1e706", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:31:21+00:00"}}}, {"containerID": "containerd://88941e679080a5f87babfad69bbea1b2be81c6e9d07bd4979c0cc835fe09cb23", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:31:20+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:31:19+00:00"}}, "message": "migration complete!", "migration_id": "01406913", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.134, "checkpoint_files_delay": 4.223, "checkpoint_files_transfer": 13.478, "file_system_delay": 1.672, "file_system_transfer": 5.02, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.478, "creation": 3.046088, "restoration": 6.586567, "total": 23.200985}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "256d2bca8bae4f6c2dbfd9f9390e78ff266ae37f95e7363abd2b9194750ca849", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-lmvmc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-lmvmc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-lmvmc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"256d2bca8bae4f6c2dbfd9f9390e78ff266ae37f95e7363abd2b9194750ca849\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"9368f6aa\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30455\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30455", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:32:21+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:32:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:32:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:32:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:32:25+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74150830", "uid": "44ebe5c4-c1c2-431a-b203-0ff901ff8d3d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lmvmc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lmvmc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-lmvmc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:32:21+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:32:25+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:32:25+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:32:21+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6283f72e77a85436c276ed2248a2466e22114a830b92fd6842343a7f42d382cd", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:32:22+00:00"}}}, {"containerID": "containerd://d20417767d1a8fce914a4d01627da982a2188ff9cb2677eec18d6f0dd39deaf7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:32:22+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:32:21+00:00"}}, "message": "migration complete!", "migration_id": "9368f6aa", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 11.707, "checkpoint_files_delay": 3.941, "checkpoint_files_transfer": 12.911, "file_system_delay": 1.687, "file_system_transfer": 5.012, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 12.911, "creation": 3.120333, "restoration": 6.276129, "total": 22.404957}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "74964c422414f25c9341998c6836fcf834689a7b1906abbd55c6d5503f3fb0af", "cni.projectcalico.org/podIP": "10.42.54.196/32", "cni.projectcalico.org/podIPs": "10.42.54.196/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-kvn9g\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-kvn9g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-kvn9g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"74964c422414f25c9341998c6836fcf834689a7b1906abbd55c6d5503f3fb0af\",\"cni.projectcalico.org/podIP\":\"10.42.54.196/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.196/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e59360d0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30850\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30850", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:17:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:17:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:17:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:17:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.196\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:17:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78030623", "uid": "673949f1-96ef-4fbf-b49d-67e3e347e121"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kvn9g", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kvn9g", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-kvn9g", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:17:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:17:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:17:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:17:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b67f24a4af4bceb6bc3d1955d7e03b57e6ee07b89f7bad1132d049a90160f787", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:17:53+00:00"}}}, {"containerID": "containerd://2f4b17b341f877d0fba14a34a46d67aac5aea40c099182ec8ac58b213441261a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:17:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.196", "podIPs": [{"ip": "10.42.54.196"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:17:51+00:00"}}, "message": "migration complete!", "migration_id": "e59360d0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.903, "checkpoint_files_delay": 4.721, "checkpoint_files_transfer": 14.421, "file_system_delay": 1.673, "file_system_transfer": 4.661, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.421, "creation": 3.053435, "restoration": 6.671981, "total": 24.245922}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "4706cbef3b70937e306bf741da14b6bb5380a48da3c22d39f640856f003033ec", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g95n5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g95n5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g95n5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"4706cbef3b70937e306bf741da14b6bb5380a48da3c22d39f640856f003033ec\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"dbbcfed4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31830\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31830", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:18:56+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:18:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:18:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:18:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:19:00+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78031076", "uid": "af7e5a1a-2c07-45ce-bb99-1b89fda48ec1"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g95n5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g95n5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g95n5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:18:56+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:18:59+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:18:59+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:18:56+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://1541f5f857a92a45d6e01e524c619fd0d27d5f49938e3633caf7fe01294033f4", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:18:58+00:00"}}}, {"containerID": "containerd://27e81e96dc7f6a0b25f9448123b2adf30100c32c46eb71eb100f226951f2239b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:18:57+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:18:56+00:00"}}, "message": "migration complete!", "migration_id": "dbbcfed4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.64, "checkpoint_files_delay": 4.33, "checkpoint_files_transfer": 13.541, "file_system_delay": 0.684, "file_system_transfer": 3.892, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.541, "creation": 3.169594, "restoration": 6.554416, "total": 23.349507}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5277e0ad7672e24edbdd443cb361c09f446b052c8e94fdc719a72dd40fb2ae49", "cni.projectcalico.org/podIP": "10.42.54.194/32", "cni.projectcalico.org/podIPs": "10.42.54.194/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-75ffc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-75ffc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-75ffc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5277e0ad7672e24edbdd443cb361c09f446b052c8e94fdc719a72dd40fb2ae49\",\"cni.projectcalico.org/podIP\":\"10.42.54.194/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.194/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f333f3b5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32379\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32379", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:19:59+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:19:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:20:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:20:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.194\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:20:04+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78031521", "uid": "60fde1e7-bcbd-4621-abc4-eaed5ecbb67f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-75ffc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-75ffc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-75ffc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:19:59+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:20:04+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:20:04+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:19:59+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://aad68ec083faebe6f701ba80c14494b82d5431927ec6a74fb1b5264dbda0f9ba", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:20:01+00:00"}}}, {"containerID": "containerd://5bf5150ffb9fdaab0f41cec5f63a8237f55d6f0c8a7998f1b6f0919523122ad0", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:20:00+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.194", "podIPs": [{"ip": "10.42.54.194"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:19:59+00:00"}}, "message": "migration complete!", "migration_id": "f333f3b5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 13.012, "checkpoint_files_delay": 4.205, "checkpoint_files_transfer": 14.285, "file_system_delay": 1.697, "file_system_transfer": 4.856, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.285, "creation": 3.136761, "restoration": 6.654694, "total": 24.174858}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "528c579d84c579fbb120d67e9c8721cb6258521a1590b28979d87effd760be85", "cni.projectcalico.org/podIP": "10.42.54.242/32", "cni.projectcalico.org/podIPs": "10.42.54.242/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wn5jq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wn5jq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wn5jq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"528c579d84c579fbb120d67e9c8721cb6258521a1590b28979d87effd760be85\",\"cni.projectcalico.org/podIP\":\"10.42.54.242/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.242/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"37edbc3f\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30418\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30418", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:21:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:21:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:21:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:21:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.242\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:21:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78031974", "uid": "8d2c795d-6121-49c5-9641-78b357a8dd99"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wn5jq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wn5jq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wn5jq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:21:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:21:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:21:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:21:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://07af1170b3658a2da3a90cc2ecf03c64634e5e61ab1684d0d70422dec104a74f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:21:05+00:00"}}}, {"containerID": "containerd://617cbb4d66519b4f1b343c4c1370e6bdce4b8ee83ed72fc1776d236920d4e831", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:21:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.242", "podIPs": [{"ip": "10.42.54.242"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:21:03+00:00"}}, "message": "migration complete!", "migration_id": "37edbc3f", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.512, "checkpoint_files_delay": 4.284, "checkpoint_files_transfer": 13.721, "file_system_delay": 1.698, "file_system_transfer": 4.763, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.721, "creation": 3.17055, "restoration": 6.494763, "total": 23.493815}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2b563d55744cc0f3f8111d68e5db3b1d1beb1d071bd8252068db661c60094b74", "cni.projectcalico.org/podIP": "10.42.54.208/32", "cni.projectcalico.org/podIPs": "10.42.54.208/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-kbvtd\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-kbvtd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-kbvtd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2b563d55744cc0f3f8111d68e5db3b1d1beb1d071bd8252068db661c60094b74\",\"cni.projectcalico.org/podIP\":\"10.42.54.208/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.208/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7c23779f\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31377\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31377", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:30:42+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:30:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:30:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:30:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.208\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:30:46+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78035574", "uid": "b561058a-a9b1-4c2d-858d-618c190302a6"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kbvtd", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kbvtd", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-kbvtd", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:30:42+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:30:46+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:30:46+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:30:42+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://38bd0554db6d714a658b8b07062701ff3d36196c6a4602450ec7c48e8a1c8a3d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:30:43+00:00"}}}, {"containerID": "containerd://368151d9f711175899ff1c0e5ce5611251ca86953d2425cf93aac15b5dc3d732", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:30:43+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.208", "podIPs": [{"ip": "10.42.54.208"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:30:42+00:00"}}, "message": "migration complete!", "migration_id": "7c23779f", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.719, "checkpoint_files_delay": 4.484, "checkpoint_files_transfer": 14.135, "file_system_delay": 1.681, "file_system_transfer": 4.984, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.135, "creation": 3.154971, "restoration": 7.024956, "total": 24.395955}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b003c634141af82575b5b93e97b81dc4a3b5ac09bfacadac7698f306e6b283a8", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2cc5p\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2cc5p\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2cc5p\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b003c634141af82575b5b93e97b81dc4a3b5ac09bfacadac7698f306e6b283a8\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8e900224\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30336\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30336", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:31:46+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:31:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:31:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:31:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:31:50+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78036081", "uid": "391b3b58-b733-4de6-b170-1f3aff1fa626"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2cc5p", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2cc5p", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2cc5p", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:31:46+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:31:50+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:31:50+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:31:46+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://87d0ae8d5bbde55687d8a385c8fb92e7b176f3f178ffe56fd70f711b64c23d69", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:31:48+00:00"}}}, {"containerID": "containerd://a363d588dfc833a0cab93c9b732d4ed6484d2ea8448147ee18aa47bd3e371e61", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:31:47+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:31:46+00:00"}}, "message": "migration complete!", "migration_id": "8e900224", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.459, "checkpoint_files_delay": 4.073, "checkpoint_files_transfer": 13.639, "file_system_delay": 1.679, "file_system_transfer": 5.214, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.639, "creation": 3.123504, "restoration": 6.489709, "total": 23.337119}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "32367ab9bea080587f7881b91567a5873298a4a5925165b0fa6ae9480081f74e", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-hnj9q\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-hnj9q\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-hnj9q\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"32367ab9bea080587f7881b91567a5873298a4a5925165b0fa6ae9480081f74e\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3a32ae3b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30254\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30254", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:32:50+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:32:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:32:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:32:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:32:54+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78036536", "uid": "951778e7-d6d0-4e2b-b218-8ea7544de31d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hnj9q", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hnj9q", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-hnj9q", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:32:50+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:32:54+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:32:54+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:32:50+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8b4956a18ae5132a5c626fac98e59e58e043cf0101a011db8f2c034c0aacb6c4", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:32:52+00:00"}}}, {"containerID": "containerd://7ea7223fc262e55d28db733fc64f825746c5afc8aa10e6c08e52e7e4ee9ac71f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:32:51+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:32:50+00:00"}}, "message": "migration complete!", "migration_id": "3a32ae3b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.358, "checkpoint_files_delay": 4.225, "checkpoint_files_transfer": 13.904, "file_system_delay": 1.693, "file_system_transfer": 4.737, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.904, "creation": 3.000267, "restoration": 6.554169, "total": 23.550432}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "210e2de4178542718a3dac45cb924cbbc2d84c4f775f1272aac1241ffc184460", "cni.projectcalico.org/podIP": "10.42.54.216/32", "cni.projectcalico.org/podIPs": "10.42.54.216/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mj7zq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mj7zq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mj7zq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"210e2de4178542718a3dac45cb924cbbc2d84c4f775f1272aac1241ffc184460\",\"cni.projectcalico.org/podIP\":\"10.42.54.216/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.216/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d0757ebe\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31623\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31623", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:33:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:33:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:33:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.216\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:33:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:33:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78036982", "uid": "4eef6171-8bc1-4da3-8670-99868b7d60e9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mj7zq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mj7zq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mj7zq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:33:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:33:57+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:33:57+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:33:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b133af3354acbf6ca9c98c8621c2f6fe9b79b088ebd2ebb511a8f6a4d51611d0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:33:55+00:00"}}}, {"containerID": "containerd://fc6ba57f7faf7a6d7fff73f035158cd58057e353e73a00487cc7009484cf1597", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:33:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.216", "podIPs": [{"ip": "10.42.54.216"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:33:54+00:00"}}, "message": "migration complete!", "migration_id": "d0757ebe", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.698, "checkpoint_files_delay": 4.187, "checkpoint_files_transfer": 13.904, "file_system_delay": 1.702, "file_system_transfer": 4.989, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.904, "creation": 3.135103, "restoration": 6.18137, "total": 23.316795}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3e413aba49deefacc08798a5f115be0b6768588dab0172cf89a49823f6585c77", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zdz2b\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zdz2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zdz2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3e413aba49deefacc08798a5f115be0b6768588dab0172cf89a49823f6585c77\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"bb0fdb76\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31627\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31627", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:34:58+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:34:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:34:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:35:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:35:02+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78037438", "uid": "2767c216-4283-4de9-93f0-272fd28234a4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zdz2b", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zdz2b", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zdz2b", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:34:58+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:35:02+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:35:02+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:34:58+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://2a3c67299b426c3e95fcee6f0aad3dc888e839ba367744223f81f37271d701b0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:35:00+00:00"}}}, {"containerID": "containerd://500b20834cf78ae4ecb1371f48dd61685f7aa8f35f51fc3628ae948e40a5f720", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:34:59+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:34:58+00:00"}}, "message": "migration complete!", "migration_id": "bb0fdb76", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.461, "checkpoint_files_delay": 4.355, "checkpoint_files_transfer": 13.946, "file_system_delay": 1.694, "file_system_transfer": 4.905, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.946, "creation": 3.113508, "restoration": 6.404894, "total": 23.557634}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7ea9b31e275f9aa08964076017b007cd7380186df6c687e0ba08cc7f3c276ce2", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jw5gm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jw5gm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jw5gm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7ea9b31e275f9aa08964076017b007cd7380186df6c687e0ba08cc7f3c276ce2\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1052461a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30131\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30131", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:36:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:36:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:36:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:36:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:36:05+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78037889", "uid": "af074e33-4de1-4592-bfbe-ac3071dfb701"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jw5gm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jw5gm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jw5gm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:36:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:36:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:36:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:36:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d5ae00886004c054d0ce0b515460d283eaf322ee9f51d9ae6f6bc69ae09bc9ed", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:36:03+00:00"}}}, {"containerID": "containerd://ce48c553833d72a3a77f666a0a0528a079dbc6c2f4e48186cc2cbf305e4abff0", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:36:02+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:36:01+00:00"}}, "message": "migration complete!", "migration_id": "1052461a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.747, "checkpoint_files_delay": 4.524, "checkpoint_files_transfer": 13.827, "file_system_delay": 2.817, "file_system_transfer": 6.162, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.827, "creation": 3.050664, "restoration": 6.423793, "total": 23.392099}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a2412ce2d5a31285ffd585eb18fef07d29a64c34a810b0bb8ac5bc1d36cfaf34", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-kbwxs\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-kbwxs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-kbwxs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a2412ce2d5a31285ffd585eb18fef07d29a64c34a810b0bb8ac5bc1d36cfaf34\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"61761e92\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31856\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31856", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:37:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:37:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:37:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:37:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:37:08+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78038338", "uid": "68577746-3815-4977-9af4-c058c9850d5e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kbwxs", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kbwxs", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-kbwxs", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:37:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:37:08+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:37:08+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:37:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b1501723ddf4b0c6784eb9a308437d6a9e6ee33f4e4c32abd63bb54e85371035", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:37:06+00:00"}}}, {"containerID": "containerd://1227e64871d8a53244287c508a4cde4b5b566130ec6476ef962fe0de22d7f3de", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:37:06+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:37:04+00:00"}}, "message": "migration complete!", "migration_id": "61761e92", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.647, "checkpoint_files_delay": 4.281, "checkpoint_files_transfer": 13.757, "file_system_delay": 1.712, "file_system_transfer": 4.985, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.757, "creation": 3.060346, "restoration": 6.488983, "total": 23.42528}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3b5a67dad63a13b5b8ad046b7e0691b5e96379030fde8eecf7c0f2d3bfaa8722", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-sg24j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-sg24j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-sg24j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3b5a67dad63a13b5b8ad046b7e0691b5e96379030fde8eecf7c0f2d3bfaa8722\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"211c4c74\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32422\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32422", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:38:08+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:38:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:38:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:38:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:38:12+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78038779", "uid": "1ebda74e-d532-4d6d-bcd7-19dc0cd27912"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sg24j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sg24j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-sg24j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:38:08+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:38:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:38:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:38:08+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8d06b3e927e23a8be9811530eadb1149e39b73c4074a71e4aad9b09cfd58e1c8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:38:10+00:00"}}}, {"containerID": "containerd://30905a342827855db09627168217e0b0dc7df721280618d60abe603ae4a4ff81", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:38:09+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:38:08+00:00"}}, "message": "migration complete!", "migration_id": "211c4c74", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.373, "checkpoint_files_delay": 4.269, "checkpoint_files_transfer": 14.046, "file_system_delay": 0.574, "file_system_transfer": 3.626, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.046, "creation": 3.284187, "restoration": 6.470662, "total": 23.89604}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a1c5b23c2c8edcfd42e21e5091c3dbe8877e371e8373db5cf1840ba9bda02681", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wlxj7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wlxj7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wlxj7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a1c5b23c2c8edcfd42e21e5091c3dbe8877e371e8373db5cf1840ba9bda02681\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0e2d2b22\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32308\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32308", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:39:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:39:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:39:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:39:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:39:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78039234", "uid": "5c599e7a-e533-4941-977d-37980a1b32ee"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wlxj7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wlxj7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wlxj7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:39:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:39:16+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:39:16+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:39:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://bff5a26f2217ebaf646c3d77d82e75c90a7499c2c07ba8e390f11a3a0736f9fa", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:39:14+00:00"}}}, {"containerID": "containerd://8bb7c5968326167f4dc694fdeb1f61f83c5ace17859eb9149a3fce5ffece5e3d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:39:13+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:39:12+00:00"}}, "message": "migration complete!", "migration_id": "0e2d2b22", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.368, "checkpoint_files_delay": 4.283, "checkpoint_files_transfer": 13.979, "file_system_delay": 1.713, "file_system_transfer": 4.937, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.979, "creation": 3.090606, "restoration": 6.321941, "total": 23.496954}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "160a827b1eff88a3948ec91b224bd7e53cca5a611009054a2b89744e91844d87", "cni.projectcalico.org/podIP": "10.42.54.232/32", "cni.projectcalico.org/podIPs": "10.42.54.232/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-w4snj\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-w4snj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-w4snj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"160a827b1eff88a3948ec91b224bd7e53cca5a611009054a2b89744e91844d87\",\"cni.projectcalico.org/podIP\":\"10.42.54.232/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.232/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e52450d0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32379\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32379", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:40:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:40:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:40:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:40:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.232\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:40:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78039680", "uid": "90cc09e8-de96-4506-b978-df0fcc21eee4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-w4snj", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-w4snj", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-w4snj", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:40:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:40:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:40:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:40:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://dec381974e8d9daa1e88a5a95e13e4d2bbdab20d17aa97320d87610f86e78aa7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:40:17+00:00"}}}, {"containerID": "containerd://e0094edeb051242886ae3aca497c4b1ff6c939bdae8013ebfb4fcb8f10c55e32", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:40:16+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.232", "podIPs": [{"ip": "10.42.54.232"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:40:15+00:00"}}, "message": "migration complete!", "migration_id": "e52450d0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.449, "checkpoint_files_delay": 4.125, "checkpoint_files_transfer": 13.575, "file_system_delay": 0.672, "file_system_transfer": 3.799, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.575, "creation": 3.294232, "restoration": 6.27437, "total": 23.22912}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5eab1ca0bbf1d5610999039bd236c062962a99aec38db7495e586db8241c5216", "cni.projectcalico.org/podIP": "10.42.54.213/32", "cni.projectcalico.org/podIPs": "10.42.54.213/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-stnpf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-stnpf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-stnpf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5eab1ca0bbf1d5610999039bd236c062962a99aec38db7495e586db8241c5216\",\"cni.projectcalico.org/podIP\":\"10.42.54.213/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.213/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b9560ccd\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30127\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30127", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:41:19+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:41:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:41:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.213\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:41:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:41:23+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78040134", "uid": "4a0e0b5c-0276-438f-a892-dd98e3917fcd"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-stnpf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-stnpf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-stnpf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:41:19+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:41:22+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:41:22+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:41:19+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a9f61bdcaa98ae5667c6f2a43b413cb26295d943945402dcdf58ce9d4d20be1a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:41:20+00:00"}}}, {"containerID": "containerd://5be7ee5c4423ffc8df2b0261b0bfbfa2a0f86ade050c3e8aab79b374b06cfb61", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:41:20+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.213", "podIPs": [{"ip": "10.42.54.213"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:41:19+00:00"}}, "message": "migration complete!", "migration_id": "b9560ccd", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.257, "checkpoint_files_delay": 4.104, "checkpoint_files_transfer": 13.816, "file_system_delay": 1.688, "file_system_transfer": 4.924, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.816, "creation": 3.098753, "restoration": 6.416617, "total": 23.416523}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "15c8fd51e114264ce46c5fb0ecbf899d673dcce427daa61f2169aba230488833", "cni.projectcalico.org/podIP": "10.42.54.239/32", "cni.projectcalico.org/podIPs": "10.42.54.239/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-hshl4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-hshl4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-hshl4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"15c8fd51e114264ce46c5fb0ecbf899d673dcce427daa61f2169aba230488833\",\"cni.projectcalico.org/podIP\":\"10.42.54.239/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.239/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"ac49481b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31175\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31175", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:42:22+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:42:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:42:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:42:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.239\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:42:26+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78040578", "uid": "fa3f094b-01b0-4ee8-bf01-0f63cde9133c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hshl4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hshl4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-hshl4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:42:22+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:42:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:42:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:42:22+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://525e69ad5b54e5b7a98eadd06dd5f5a989df9e1d83bc33ac705ba373519e102f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:42:24+00:00"}}}, {"containerID": "containerd://b4e9d56ba6b03a1b1f30d63ddb90ab480f28934a9fcd39c10318776dd36cbef7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:42:23+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.239", "podIPs": [{"ip": "10.42.54.239"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:42:22+00:00"}}, "message": "migration complete!", "migration_id": "ac49481b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.198, "checkpoint_files_delay": 4.265, "checkpoint_files_transfer": 13.611, "file_system_delay": 1.678, "file_system_transfer": 4.928, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.611, "creation": 3.070982, "restoration": 6.683842, "total": 23.457192}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "327ebfffe8d868c5407ab66e3c52a2856d1567600d58ad2e1dbc96ae8570c34b", "cni.projectcalico.org/podIP": "10.42.54.223/32", "cni.projectcalico.org/podIPs": "10.42.54.223/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8tdqv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8tdqv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8tdqv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"327ebfffe8d868c5407ab66e3c52a2856d1567600d58ad2e1dbc96ae8570c34b\",\"cni.projectcalico.org/podIP\":\"10.42.54.223/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.223/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e968778a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31603\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31603", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:43:25+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:43:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:43:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:43:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.223\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:43:29+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78041028", "uid": "4c966761-c33e-45b8-b660-dd5c72327ee8"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8tdqv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8tdqv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8tdqv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:43:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:43:29+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:43:29+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:43:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8709a6118619a0190f205c5e58a925da2fd7e8d3a63f28b454e767b4d0aa8bcf", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:43:27+00:00"}}}, {"containerID": "containerd://1a94579d08dcb5a03e77d48cdb7a825ae1ba42135aa222541dc5c7ca039165d0", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:43:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.223", "podIPs": [{"ip": "10.42.54.223"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:43:25+00:00"}}, "message": "migration complete!", "migration_id": "e968778a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.666, "checkpoint_files_delay": 4.368, "checkpoint_files_transfer": 13.79, "file_system_delay": 1.699, "file_system_transfer": 4.795, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.79, "creation": 3.067192, "restoration": 6.710252, "total": 23.666778}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ec8e50330cf2ca112bd5012b1a06a9b211c02f2a3cd3b478b11af47215aecc3a", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wb658\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wb658\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wb658\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ec8e50330cf2ca112bd5012b1a06a9b211c02f2a3cd3b478b11af47215aecc3a\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"524884c8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30822\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30822", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:44:28+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:44:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:44:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:44:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:44:32+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78041481", "uid": "fbfa4de2-1d51-415e-aabc-0fd4cc7739da"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wb658", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wb658", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wb658", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:44:28+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:44:32+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:44:32+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:44:28+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://112f41e93a38868655eac717e4fb58bda6a201daca605987acb703b7ad0bae40", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:44:30+00:00"}}}, {"containerID": "containerd://77e6c92e56e8f0379ab50f3d15805b7a57935e782e5a8077a1d4ddd612a9eda6", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:44:30+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:44:28+00:00"}}, "message": "migration complete!", "migration_id": "524884c8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 13.389, "checkpoint_files_delay": 4.377, "checkpoint_files_transfer": 14.751, "file_system_delay": 1.697, "file_system_transfer": 5.425, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.751, "creation": 3.046631, "restoration": 6.470386, "total": 24.36973}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "dcbf522e33e35f3f507ca5e21ccd6d1c7999948216fc7abb0c1ac6900e6de577", "cni.projectcalico.org/podIP": "10.42.54.215/32", "cni.projectcalico.org/podIPs": "10.42.54.215/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wfbnp\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wfbnp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wfbnp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"dcbf522e33e35f3f507ca5e21ccd6d1c7999948216fc7abb0c1ac6900e6de577\",\"cni.projectcalico.org/podIP\":\"10.42.54.215/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.215/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e50c98c7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30848\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30848", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:45:33+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:45:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:45:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:45:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.215\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:45:37+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78041938", "uid": "8be4dd2a-28c4-4bf7-b4c8-341c90760d97"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wfbnp", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wfbnp", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wfbnp", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:45:33+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:45:37+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:45:37+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:45:33+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4de55dc58871fecbd14e58af95fbec50b88c6bbb5ca95bba0c8518a250b4213e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:45:35+00:00"}}}, {"containerID": "containerd://05c20f12fadc2686c292b0d01491ed988f1d24e22b5b2f02e5f17af101d99aca", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:45:34+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.215", "podIPs": [{"ip": "10.42.54.215"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:45:33+00:00"}}, "message": "migration complete!", "migration_id": "e50c98c7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.188, "checkpoint_files_delay": 4.301, "checkpoint_files_transfer": 13.727, "file_system_delay": 0.463, "file_system_transfer": 3.555, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.727, "creation": 3.429392, "restoration": 6.543563, "total": 23.797204}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "679758bdb42d4e9390d55dfe4c648e9dc7a4e8e2fd127290a5f07b871cee0c18", "cni.projectcalico.org/podIP": "10.42.54.193/32", "cni.projectcalico.org/podIPs": "10.42.54.193/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dk4qs\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dk4qs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dk4qs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"679758bdb42d4e9390d55dfe4c648e9dc7a4e8e2fd127290a5f07b871cee0c18\",\"cni.projectcalico.org/podIP\":\"10.42.54.193/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.193/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0932002e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31710\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31710", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:46:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:46:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:46:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:46:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.193\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:46:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78042380", "uid": "f0d04b9e-7704-4774-933b-15002badebc0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dk4qs", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dk4qs", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dk4qs", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:46:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:46:41+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:46:41+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:46:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3ff74a790430b20e7a28a89f72ebd3911a5bb53eff622ad0a00f2e91da1c1b42", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:46:39+00:00"}}}, {"containerID": "containerd://fc86da4f53ec86140f97adb9cb2e1f9bb9d621174fc56448f75f41282c69583b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:46:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.193", "podIPs": [{"ip": "10.42.54.193"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:46:37+00:00"}}, "message": "migration complete!", "migration_id": "0932002e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.316, "checkpoint_files_delay": 4.138, "checkpoint_files_transfer": 13.811, "file_system_delay": 0.669, "file_system_transfer": 3.846, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.811, "creation": 3.28165, "restoration": 6.491388, "total": 23.674353}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e8cdc570a3a63be566e717bc93c5a3e196dc1c38ab92b53e50f09b9eec533947", "cni.projectcalico.org/podIP": "10.42.54.247/32", "cni.projectcalico.org/podIPs": "10.42.54.247/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-qvw2z\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-qvw2z\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-qvw2z\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e8cdc570a3a63be566e717bc93c5a3e196dc1c38ab92b53e50f09b9eec533947\",\"cni.projectcalico.org/podIP\":\"10.42.54.247/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.247/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0e691d14\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32015\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32015", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:47:40+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:47:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:47:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:47:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.247\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:47:44+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78042829", "uid": "c37143ea-b8ae-4bc0-a51e-67d7b3cd4ad9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qvw2z", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qvw2z", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-qvw2z", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:47:40+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:47:44+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:47:44+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:47:40+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e24107709ebb2603f9d8bab7f39d6393c34699c5e90a6335ad274add62a61705", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:47:42+00:00"}}}, {"containerID": "containerd://c9a18fb2860b2c6ba005eaa9d6f2c4b13fb10f9de0b4768e0555b666dacc9569", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:47:41+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.247", "podIPs": [{"ip": "10.42.54.247"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:47:40+00:00"}}, "message": "migration complete!", "migration_id": "0e691d14", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.312, "checkpoint_files_delay": 4.11, "checkpoint_files_transfer": 13.56, "file_system_delay": 1.695, "file_system_transfer": 4.947, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.56, "creation": 3.068119, "restoration": 6.495095, "total": 23.212185}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e8f17e0afb9afcc74a9daf07b37f7b831f24f9f9da37722b968b0af2b1b67e07", "cni.projectcalico.org/podIP": "10.42.54.238/32", "cni.projectcalico.org/podIPs": "10.42.54.238/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-l877p\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-l877p\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-l877p\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e8f17e0afb9afcc74a9daf07b37f7b831f24f9f9da37722b968b0af2b1b67e07\",\"cni.projectcalico.org/podIP\":\"10.42.54.238/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.238/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b66b594d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30241\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30241", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:48:44+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:48:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:48:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.238\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:48:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:48:48+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78043285", "uid": "e8b5910e-8844-48f7-b9fc-b7af89075b2f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l877p", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l877p", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-l877p", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:48:44+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:48:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:48:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:48:44+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://74951a3c0a50fbbb3c535bb7c8b5b84bc05fa486a3186e145bf6608036f61164", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:48:45+00:00"}}}, {"containerID": "containerd://0503a7eab769bfdd54f0eca1e93d24a4fed97dd6455f8c43f5b29d2ff66dbea9", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:48:45+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.238", "podIPs": [{"ip": "10.42.54.238"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:48:44+00:00"}}, "message": "migration complete!", "migration_id": "b66b594d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.843, "checkpoint_files_delay": 4.409, "checkpoint_files_transfer": 14.112, "file_system_delay": 0.67, "file_system_transfer": 3.836, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.112, "creation": 3.269071, "restoration": 6.455757, "total": 23.931787}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cbdeb22a4b2626338e6a9fc25e20bc24f8bfc30db40d70a22a173628cf86a67a", "cni.projectcalico.org/podIP": "10.42.54.252/32", "cni.projectcalico.org/podIPs": "10.42.54.252/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jqbrh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jqbrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jqbrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cbdeb22a4b2626338e6a9fc25e20bc24f8bfc30db40d70a22a173628cf86a67a\",\"cni.projectcalico.org/podIP\":\"10.42.54.252/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.252/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"26c530e0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31701\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31701", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:49:48+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:49:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:49:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:49:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.252\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:49:52+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78043800", "uid": "8fc519de-e38d-46c0-a668-7a2c4d67afe6"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jqbrh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jqbrh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jqbrh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:49:48+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:49:52+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:49:52+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:49:48+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://36495d642e02c6aa395c0d04dd96609660e64483c7ddfa4ad3e285527d35d93a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:49:50+00:00"}}}, {"containerID": "containerd://fc6a2a1ff9d5a7b86dd4b214159b4d6da41e0e82ca78c68b33a14cfdeca85a4e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:49:49+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.252", "podIPs": [{"ip": "10.42.54.252"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:49:48+00:00"}}, "message": "migration complete!", "migration_id": "26c530e0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.754, "checkpoint_files_delay": 4.48, "checkpoint_files_transfer": 14.234, "file_system_delay": 0.679, "file_system_transfer": 3.609, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.234, "creation": 3.285593, "restoration": 6.29487, "total": 23.911668}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9c625aed2754bc50c30b7e6c661a95e798d23ab45c21e94edb2e62fd9e0b18b5", "cni.projectcalico.org/podIP": "10.42.54.228/32", "cni.projectcalico.org/podIPs": "10.42.54.228/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-pdh79\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-pdh79\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-pdh79\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9c625aed2754bc50c30b7e6c661a95e798d23ab45c21e94edb2e62fd9e0b18b5\",\"cni.projectcalico.org/podIP\":\"10.42.54.228/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.228/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b62bcd52\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30900\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30900", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:50:52+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:50:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:50:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:50:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.228\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:50:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78044246", "uid": "019902a3-8b88-4a6d-9233-dd33413da701"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-pdh79", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-pdh79", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-pdh79", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:50:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:50:56+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:50:56+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:50:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a819428edfea9e176d31a380f651f128cf0be05bd09a78d9d4df1bd29a3d3286", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:50:54+00:00"}}}, {"containerID": "containerd://877af1b3e05240be4fbe55e56d4fda162451a39ba25ff8b872ee1e4c8627d6d9", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:50:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.228", "podIPs": [{"ip": "10.42.54.228"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:50:52+00:00"}}, "message": "migration complete!", "migration_id": "b62bcd52", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.491, "checkpoint_files_delay": 4.331, "checkpoint_files_transfer": 13.744, "file_system_delay": 1.715, "file_system_transfer": 4.964, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.744, "creation": 3.038664, "restoration": 6.664337, "total": 23.545383}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "dc18addc49db827ad7a91a3e14ed176a6914c3d6b6c0f75d8d02e85278e7cb4c", "cni.projectcalico.org/podIP": "10.42.54.222/32", "cni.projectcalico.org/podIPs": "10.42.54.222/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2mb6c\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2mb6c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2mb6c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"dc18addc49db827ad7a91a3e14ed176a6914c3d6b6c0f75d8d02e85278e7cb4c\",\"cni.projectcalico.org/podIP\":\"10.42.54.222/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.222/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c25f4c7b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32161\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32161", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:51:57+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:51:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:51:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:52:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.222\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:52:00+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78044701", "uid": "16692d2a-82ef-46c5-942a-a92dfa01590e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2mb6c", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2mb6c", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2mb6c", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:51:57+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:52:00+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:52:00+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:51:57+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f4c28c481b05b39c7a752a3191fe7172fa9ce05651fde818e5542703b6e2c2f8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:51:58+00:00"}}}, {"containerID": "containerd://76fab8f9d9a73c7745f1edabbdc1983e00ca2b9c6e3ad980b94fed41d12ba151", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:51:58+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.222", "podIPs": [{"ip": "10.42.54.222"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:51:57+00:00"}}, "message": "migration complete!", "migration_id": "c25f4c7b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.625, "checkpoint_files_delay": 4.184, "checkpoint_files_transfer": 14.081, "file_system_delay": 2.809, "file_system_transfer": 6.344, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 14.081, "creation": 3.040205, "restoration": 6.490617, "total": 23.706642}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "354d3e47b682e3042c38cd3f1f541f149ff7545ce0f85742f8703dd58094dfa8", "cni.projectcalico.org/podIP": "10.42.54.204/32", "cni.projectcalico.org/podIPs": "10.42.54.204/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-lrjpc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-lrjpc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-lrjpc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"354d3e47b682e3042c38cd3f1f541f149ff7545ce0f85742f8703dd58094dfa8\",\"cni.projectcalico.org/podIP\":\"10.42.54.204/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.204/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"26ef0cd9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30055\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30055", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:53:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:53:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:53:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:53:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.204\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:53:05+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78045158", "uid": "4a48e246-c802-4a44-96a2-d924f8b609ea"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lrjpc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lrjpc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-lrjpc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:53:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:53:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:53:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:53:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b6530b510672c984f8f60f7d05097a163ecc464324605501d92a008697e5944b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:53:02+00:00"}}}, {"containerID": "containerd://612f02f017c0a2d2807a75db9228e6b0e774e0ceadba4990f64f43c5b9558e41", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:53:02+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.204", "podIPs": [{"ip": "10.42.54.204"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:53:01+00:00"}}, "message": "migration complete!", "migration_id": "26ef0cd9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.317, "checkpoint_files_delay": 4.178, "checkpoint_files_transfer": 13.636, "file_system_delay": 1.679, "file_system_transfer": 4.97, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.636, "creation": 2.998015, "restoration": 6.44804, "total": 23.196748}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "920f2def90a10e9b02e1f15d97f493313f4f18158fb6ebdac375d445b1c4f069", "cni.projectcalico.org/podIP": "10.42.54.231/32", "cni.projectcalico.org/podIPs": "10.42.54.231/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-5t6xk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-5t6xk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-5t6xk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"920f2def90a10e9b02e1f15d97f493313f4f18158fb6ebdac375d445b1c4f069\",\"cni.projectcalico.org/podIP\":\"10.42.54.231/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.231/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"256\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e59526dd\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30624\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"256\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30624", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:54:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:54:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:54:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:54:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.231\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:54:08+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78045610", "uid": "64dfadf0-ea4e-4f87-b208-4906a65c71e3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5t6xk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5t6xk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-5t6xk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:54:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:54:08+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:54:08+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:54:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://39342ea16fa558be22e1ba77912af15fc634ab0940b647c8004ee4ab99a08200", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:54:06+00:00"}}}, {"containerID": "containerd://6d5346714535877f27526db126df3eb0665d230595d12342ce3f710b4fd24863", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:54:05+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.231", "podIPs": [{"ip": "10.42.54.231"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:54:04+00:00"}}, "message": "migration complete!", "migration_id": "e59526dd", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 12.728, "checkpoint_files_delay": 4.209, "checkpoint_files_transfer": 13.952, "file_system_delay": 1.677, "file_system_transfer": 4.942, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 13.952, "creation": 3.133634, "restoration": 6.628077, "total": 23.804916}}], "512": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "6eb14fd3aa736f54c594f58ca107a443158a8622be92e8d3a0ef2246b77e243a", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ld96r\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ld96r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ld96r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"6eb14fd3aa736f54c594f58ca107a443158a8622be92e8d3a0ef2246b77e243a\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3f38627c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30477\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30477", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:33:24+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:33:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:33:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:33:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:33:28+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74151405", "uid": "2ebc9547-f628-4acb-b854-658a53212abf"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ld96r", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ld96r", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ld96r", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:33:24+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:33:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:33:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:33:24+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://70fe1573c2d1a07d169182d774b2db4b56739ef71d696396931a81d3ed1e1360", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:33:26+00:00"}}}, {"containerID": "containerd://384b3522826015b6a4185937d46a4bc6eb8bee4edcfccd4f487509f794f35149", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:33:25+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:33:24+00:00"}}, "message": "migration complete!", "migration_id": "3f38627c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.873, "checkpoint_files_delay": 8.441, "checkpoint_files_transfer": 26.485, "file_system_delay": 1.707, "file_system_transfer": 4.78, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.485, "creation": 3.077962, "restoration": 13.551268, "total": 43.217872}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "6ac3f87363e2ae337fbe3d7a8f39dc36fd31fc315bdd25408ea84e9ca73e4bb7", "cni.projectcalico.org/podIP": "10.42.54.209/32", "cni.projectcalico.org/podIPs": "10.42.54.209/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-l7l8j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-l7l8j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-l7l8j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"6ac3f87363e2ae337fbe3d7a8f39dc36fd31fc315bdd25408ea84e9ca73e4bb7\",\"cni.projectcalico.org/podIP\":\"10.42.54.209/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.209/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"a7fe7fe5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30093\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30093", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:34:47+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:34:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:34:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:34:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.209\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:34:52+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74151955", "uid": "836c827e-8ea6-4662-a45f-63bb18e85b51"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l7l8j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l7l8j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-l7l8j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:34:47+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:34:52+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:34:52+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:34:47+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3ce9352b05c2498b8c56f96653b8384f30cb70a2bdaf6868e9f0cd6ccb8487e6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:34:49+00:00"}}}, {"containerID": "containerd://a71abcb7d1ba65d909cae47ae4dcf7eb99fe66c68954422980bf12a01b6dc3bc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:34:48+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.209", "podIPs": [{"ip": "10.42.54.209"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:34:47+00:00"}}, "message": "migration complete!", "migration_id": "a7fe7fe5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.962, "checkpoint_files_delay": 7.926, "checkpoint_files_transfer": 26.061, "file_system_delay": 1.708, "file_system_transfer": 4.703, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.061, "creation": 3.124636, "restoration": 12.06099, "total": 41.357875}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "704bedde25725a7770f675c507f219258a91cd78bee69ba15e8e6d708fa45e96", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dmw5j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dmw5j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dmw5j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"704bedde25725a7770f675c507f219258a91cd78bee69ba15e8e6d708fa45e96\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"389dd258\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31151\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31151", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:36:09+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:36:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:36:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:36:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:36:13+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74152506", "uid": "d2113020-42eb-4e94-9883-b0b370e56fc3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dmw5j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dmw5j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dmw5j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:36:09+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:36:13+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:36:13+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:36:09+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://836249d65e514e480495c9e122d80fe639fff884added94875abb7cc0c861b5b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:36:10+00:00"}}}, {"containerID": "containerd://d940f6a6796788fa05fee4c65e4d13b3e3fc33b063da04f0f4d35aa3eefce2a3", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:36:10+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:36:09+00:00"}}, "message": "migration complete!", "migration_id": "389dd258", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.168, "checkpoint_files_delay": 7.731, "checkpoint_files_transfer": 24.457, "file_system_delay": 1.701, "file_system_transfer": 4.793, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 24.457, "creation": 3.205793, "restoration": 12.393896, "total": 40.150743}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "bdec1fbf80426a5c65c29d4e068ecadf3f5ca0ef18d4b7e0a751b2449a1768c5", "cni.projectcalico.org/podIP": "10.42.54.227/32", "cni.projectcalico.org/podIPs": "10.42.54.227/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8p8v9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8p8v9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8p8v9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"bdec1fbf80426a5c65c29d4e068ecadf3f5ca0ef18d4b7e0a751b2449a1768c5\",\"cni.projectcalico.org/podIP\":\"10.42.54.227/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.227/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"6d3e4f74\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31891\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31891", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:55:13+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:55:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:55:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:55:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.227\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:55:17+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78046204", "uid": "01834fae-5bd3-4e6f-8bb5-b75ba8cc9e58"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8p8v9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8p8v9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8p8v9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:55:13+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:55:17+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:55:17+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:55:13+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3433554f113fbb46aff7bfc3c56c60ffe049f898bfe14149033b5cba4644d883", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:55:15+00:00"}}}, {"containerID": "containerd://e6c7b25c862c2ad160086d131757f1be936cfec9798ba91f49b8c985646292e2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:55:14+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.227", "podIPs": [{"ip": "10.42.54.227"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:55:13+00:00"}}, "message": "migration complete!", "migration_id": "6d3e4f74", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.983, "checkpoint_files_delay": 8.822, "checkpoint_files_transfer": 26.215, "file_system_delay": 1.714, "file_system_transfer": 4.989, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.215, "creation": 3.186618, "restoration": 13.554563, "total": 43.046895}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9e0f6a0452655a77f170c550feaf832a1b32c155369cae014d11651a584c0e15", "cni.projectcalico.org/podIP": "10.42.54.237/32", "cni.projectcalico.org/podIPs": "10.42.54.237/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tfgl7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tfgl7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tfgl7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9e0f6a0452655a77f170c550feaf832a1b32c155369cae014d11651a584c0e15\",\"cni.projectcalico.org/podIP\":\"10.42.54.237/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.237/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"cfee72a4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32197\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32197", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:56:41+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:56:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:56:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:56:45+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.237\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:56:45+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78046786", "uid": "79dd9e2c-0a87-42c8-a862-6259d0c24ac2"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tfgl7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tfgl7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tfgl7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:56:41+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:56:45+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:56:45+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:56:41+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://53dc68f40d27ca0584abf29717e88b9f55b6e9aac08f54d04ab98ffb439c08e3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:56:42+00:00"}}}, {"containerID": "containerd://9503c706a1b43fb995f1d0f8b12bd594351cb8dc3490a1be4a7003af8fa0fcd1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:56:42+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.237", "podIPs": [{"ip": "10.42.54.237"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:56:41+00:00"}}, "message": "migration complete!", "migration_id": "cfee72a4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.874, "checkpoint_files_delay": 7.819, "checkpoint_files_transfer": 25.267, "file_system_delay": 2.812, "file_system_transfer": 5.954, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.267, "creation": 3.106051, "restoration": 12.122052, "total": 40.590953}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "12f545cfb1f654af2b6109150d1ff405b11ef23c53120e4d9eaf8b291d3cf3fd", "cni.projectcalico.org/podIP": "10.42.54.245/32", "cni.projectcalico.org/podIPs": "10.42.54.245/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-qdz77\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-qdz77\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-qdz77\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"12f545cfb1f654af2b6109150d1ff405b11ef23c53120e4d9eaf8b291d3cf3fd\",\"cni.projectcalico.org/podIP\":\"10.42.54.245/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.245/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5ee6dbf3\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30907\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30907", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:58:05+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:58:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:58:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:58:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.245\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:58:09+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78047361", "uid": "02ec2bd3-572c-441d-9047-cf0777c5fa9c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qdz77", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qdz77", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-qdz77", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:58:05+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:58:09+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:58:09+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:58:05+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8e0ab8f3552b5667201a5e135a9c10824e2a112c1341bcc27a6b25b3011be48c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:58:07+00:00"}}}, {"containerID": "containerd://a71d1e42db98a70bb7120cec8642e554c50bd4dda900519c0694865526960a2d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:58:06+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.245", "podIPs": [{"ip": "10.42.54.245"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:58:05+00:00"}}, "message": "migration complete!", "migration_id": "5ee6dbf3", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.146, "checkpoint_files_delay": 8.514, "checkpoint_files_transfer": 26.362, "file_system_delay": 1.704, "file_system_transfer": 4.82, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.362, "creation": 3.244847, "restoration": 12.080802, "total": 41.772207}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b5e76a9da19426e7e00e11ec5bf0ebd7d6516a23c312b4139bcbc64cc9718365", "cni.projectcalico.org/podIP": "10.42.54.219/32", "cni.projectcalico.org/podIPs": "10.42.54.219/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-sqfs6\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-sqfs6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-sqfs6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b5e76a9da19426e7e00e11ec5bf0ebd7d6516a23c312b4139bcbc64cc9718365\",\"cni.projectcalico.org/podIP\":\"10.42.54.219/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.219/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"58c066e0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31611\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31611", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T05:59:32+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:59:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T05:59:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T05:59:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.219\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T05:59:35+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78047940", "uid": "30e3f2df-7cb7-4b38-85cc-8725c00a55c4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sqfs6", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sqfs6", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-sqfs6", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T05:59:32+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T05:59:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T05:59:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T05:59:32+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://9b5dd1cfece1653b66ca398d30747b5f39750bf896bc174d7653e8897b5cc36e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:59:33+00:00"}}}, {"containerID": "containerd://15e134720e667de28e3eb8eab307049fcee3ab4074f95cfad6be8fd6e7538d66", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T05:59:33+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.219", "podIPs": [{"ip": "10.42.54.219"}], "qosClass": "BestEffort", "startTime": "2023-02-23T05:59:32+00:00"}}, "message": "migration complete!", "migration_id": "58c066e0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.852, "checkpoint_files_delay": 8.103, "checkpoint_files_transfer": 25.371, "file_system_delay": 1.789, "file_system_transfer": 4.895, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.371, "creation": 3.191001, "restoration": 11.960876, "total": 40.60495}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ad41d8714efce049a2c6a42892de20907b22507a72e19ca72564cc07be705900", "cni.projectcalico.org/podIP": "10.42.54.251/32", "cni.projectcalico.org/podIPs": "10.42.54.251/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rtfhv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rtfhv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rtfhv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ad41d8714efce049a2c6a42892de20907b22507a72e19ca72564cc07be705900\",\"cni.projectcalico.org/podIP\":\"10.42.54.251/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.251/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"fbc5161c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30782\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30782", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:00:56+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:00:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:00:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:01:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.251\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:01:00+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78048517", "uid": "e961f509-432d-4e63-8bf0-5278615755b5"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rtfhv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rtfhv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rtfhv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:00:56+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:01:00+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:01:00+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:00:56+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://67c6cd97b00ca3bf488d36d594077e78a12bf6ebaa0223d10a26247f7e85e984", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:00:58+00:00"}}}, {"containerID": "containerd://7d39bc83669e86f47fdc4a59dd1681f7c2883c4758e0bed26417c5c11716c879", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:00:57+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.251", "podIPs": [{"ip": "10.42.54.251"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:00:56+00:00"}}, "message": "migration complete!", "migration_id": "fbc5161c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.606, "checkpoint_files_delay": 8.161, "checkpoint_files_transfer": 26.207, "file_system_delay": 1.699, "file_system_transfer": 4.826, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.207, "creation": 3.110292, "restoration": 11.834699, "total": 41.236516}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5f0dce784f715b972b9783d385e93d202a683b34f4726305db58f14fe77cef6b", "cni.projectcalico.org/podIP": "10.42.54.205/32", "cni.projectcalico.org/podIPs": "10.42.54.205/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-kqdtg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-kqdtg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-kqdtg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5f0dce784f715b972b9783d385e93d202a683b34f4726305db58f14fe77cef6b\",\"cni.projectcalico.org/podIP\":\"10.42.54.205/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.205/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e43e4bec\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32203\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32203", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:02:21+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:02:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:02:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:02:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.205\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:02:25+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78049095", "uid": "bbe0fcc7-a616-4b28-ad9b-43346238c714"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kqdtg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kqdtg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-kqdtg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:02:21+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:02:25+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:02:25+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:02:21+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://617b6403f2081d8fe2fb3f4ac4f62c48d449bf2733c71d3503b41df711d1aeeb", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:02:23+00:00"}}}, {"containerID": "containerd://5e88f84ed5a7c626886b4b137807e33e90fafa8efb3b1683a3bce906a07b6317", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:02:22+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.205", "podIPs": [{"ip": "10.42.54.205"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:02:21+00:00"}}, "message": "migration complete!", "migration_id": "e43e4bec", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.847, "checkpoint_files_delay": 8.114, "checkpoint_files_transfer": 26.102, "file_system_delay": 1.7, "file_system_transfer": 4.761, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.102, "creation": 3.065442, "restoration": 11.96148, "total": 41.221177}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3e57cdd44e8b448e3d3fe34580c7920fe5b7e2ef79eaa1765eefa48f561e7226", "cni.projectcalico.org/podIP": "10.42.54.214/32", "cni.projectcalico.org/podIPs": "10.42.54.214/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rdv4t\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rdv4t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rdv4t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3e57cdd44e8b448e3d3fe34580c7920fe5b7e2ef79eaa1765eefa48f561e7226\",\"cni.projectcalico.org/podIP\":\"10.42.54.214/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.214/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"9cce48a5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30025\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30025", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:03:47+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:03:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:03:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.214\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:03:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:03:51+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78049669", "uid": "c5fb4a89-89fe-49bb-b23b-026989dad1e3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rdv4t", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rdv4t", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rdv4t", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:03:47+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:03:50+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:03:50+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:03:47+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://24dffaf65345d666930ac5b4e8e7334d9f5c2530354dbfb5d57b18f89a8555e2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:03:48+00:00"}}}, {"containerID": "containerd://94f6f7f9e12505893fc1104ab358b5b67c3f7fdcd9d8ff7c670f4db0bec6e5f7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:03:48+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.214", "podIPs": [{"ip": "10.42.54.214"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:03:47+00:00"}}, "message": "migration complete!", "migration_id": "9cce48a5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.043, "checkpoint_files_delay": 7.789, "checkpoint_files_transfer": 25.081, "file_system_delay": 0.674, "file_system_transfer": 3.859, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.081, "creation": 3.158698, "restoration": 11.89503, "total": 40.22831}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cc4032b63a2b3b93e4a7fea63f1b664bf412fe9b42bb050c48e88c9cd6bc86e8", "cni.projectcalico.org/podIP": "10.42.54.243/32", "cni.projectcalico.org/podIPs": "10.42.54.243/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-l5g85\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-l5g85\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-l5g85\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cc4032b63a2b3b93e4a7fea63f1b664bf412fe9b42bb050c48e88c9cd6bc86e8\",\"cni.projectcalico.org/podIP\":\"10.42.54.243/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.243/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"9cefedae\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30332\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30332", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:05:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:05:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:05:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:05:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.243\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:05:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78050245", "uid": "d5a6595a-59eb-4565-8b3d-84313f5c2865"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l5g85", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l5g85", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-l5g85", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:05:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:05:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:05:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:05:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://41797baa2df993dcd69058d69d0a579113f30134062b6b213635b008d02f714c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:05:13+00:00"}}}, {"containerID": "containerd://5f62cfe7882daf533a3145cf88ee8ca615c2bbf67b05e2d2069d9689d08624f4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:05:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.243", "podIPs": [{"ip": "10.42.54.243"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:05:11+00:00"}}, "message": "migration complete!", "migration_id": "9cefedae", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.452, "checkpoint_files_delay": 7.935, "checkpoint_files_transfer": 25.81, "file_system_delay": 0.564, "file_system_transfer": 3.674, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.81, "creation": 3.194591, "restoration": 12.164426, "total": 41.271907}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a4087f6a4aa09b32c303be1d8da3b1c109db22554326fc642ad8bbd1db1cb064", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-z62lq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-z62lq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-z62lq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a4087f6a4aa09b32c303be1d8da3b1c109db22554326fc642ad8bbd1db1cb064\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c658b4ac\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31113\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31113", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:06:36+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:06:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:06:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:06:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:06:40+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78050821", "uid": "50f00113-976f-4772-9802-c235e2e78a96"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z62lq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z62lq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-z62lq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:06:36+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:06:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:06:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:06:36+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://91d62db1307638851dbbe1c53f793effc94183ec24da4d088a9ad1d59f33f52f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:06:38+00:00"}}}, {"containerID": "containerd://9d454601d1cbdfe02b63119f9750bb0854b3aa0429fd290969a8cca1bd761608", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:06:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:06:36+00:00"}}, "message": "migration complete!", "migration_id": "c658b4ac", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.025, "checkpoint_files_delay": 7.842, "checkpoint_files_transfer": 25.081, "file_system_delay": 1.801, "file_system_transfer": 4.874, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.081, "creation": 3.078312, "restoration": 11.96582, "total": 40.217457}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e94aed4e7c2333bad450a76a8502b694237dd395deaec4e06d6b91bcadaa40c3", "cni.projectcalico.org/podIP": "10.42.54.209/32", "cni.projectcalico.org/podIPs": "10.42.54.209/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-cjjlr\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-cjjlr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-cjjlr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e94aed4e7c2333bad450a76a8502b694237dd395deaec4e06d6b91bcadaa40c3\",\"cni.projectcalico.org/podIP\":\"10.42.54.209/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.209/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8f0b58ce\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31733\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31733", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:08:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:08:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:08:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:08:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.209\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:08:05+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78051396", "uid": "9d917b9a-07c0-457c-af68-23e63c3f8e05"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cjjlr", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cjjlr", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-cjjlr", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:08:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:08:04+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:08:04+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:08:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://25948e5f1d46995d1815511b35818f8fa7aea172a1b64b3498e54af4adf63861", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:08:03+00:00"}}}, {"containerID": "containerd://d667dcda6e0ec1a13426f3c76db496a711bbafef4ed57f1a38320b55e9d66f7d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:08:02+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.209", "podIPs": [{"ip": "10.42.54.209"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:08:01+00:00"}}, "message": "migration complete!", "migration_id": "8f0b58ce", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.376, "checkpoint_files_delay": 8.004, "checkpoint_files_transfer": 25.797, "file_system_delay": 0.674, "file_system_transfer": 3.906, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.797, "creation": 3.127134, "restoration": 12.394589, "total": 41.422418}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "168b6577501e5873de02455d6faba714da112ba506ac84b853549ee02c733fb8", "cni.projectcalico.org/podIP": "10.42.54.229/32", "cni.projectcalico.org/podIPs": "10.42.54.229/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zkqrh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zkqrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zkqrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"168b6577501e5873de02455d6faba714da112ba506ac84b853549ee02c733fb8\",\"cni.projectcalico.org/podIP\":\"10.42.54.229/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.229/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4a5c7dd0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31305\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31305", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:09:26+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:09:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:09:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:09:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.229\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:09:30+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78051974", "uid": "fdc4704d-f652-46c6-a571-fe9896d13ba6"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zkqrh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zkqrh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zkqrh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:09:26+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:09:30+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:09:30+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:09:26+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://1780088a657858e95312a8068b51e7f8a458e48ac1e995133f35f9a7687d78ec", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:09:28+00:00"}}}, {"containerID": "containerd://f412d57708dd27fc54e840287118bedb1fff26ced28b7f4f832855abd9a43030", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:09:27+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.229", "podIPs": [{"ip": "10.42.54.229"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:09:26+00:00"}}, "message": "migration complete!", "migration_id": "4a5c7dd0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.671, "checkpoint_files_delay": 7.787, "checkpoint_files_transfer": 24.762, "file_system_delay": 0.568, "file_system_transfer": 3.722, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 24.762, "creation": 3.133661, "restoration": 12.432741, "total": 40.424675}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f03c412a716726ba2badd30b8a645da85c0df7cf36cd27da7d5eb385f86066c8", "cni.projectcalico.org/podIP": "10.42.54.234/32", "cni.projectcalico.org/podIPs": "10.42.54.234/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-sv4l9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-sv4l9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-sv4l9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f03c412a716726ba2badd30b8a645da85c0df7cf36cd27da7d5eb385f86066c8\",\"cni.projectcalico.org/podIP\":\"10.42.54.234/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.234/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"bd513b58\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30315\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30315", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:10:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:10:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:10:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:10:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.234\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:10:54+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78052544", "uid": "98194d84-77d2-48d2-b011-7847f281fcb3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sv4l9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sv4l9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-sv4l9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:10:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:10:54+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:10:54+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:10:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://aea811c19b55d30b8add82a20405acb376ea4ef53d181c9c31381a9b5d76ace6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:10:52+00:00"}}}, {"containerID": "containerd://e81a5d8a18bf78cf2161f8e743f99c3bd6bb6c35b947d690badceed8dc2f5da1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:10:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.234", "podIPs": [{"ip": "10.42.54.234"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:10:51+00:00"}}, "message": "migration complete!", "migration_id": "bd513b58", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.824, "checkpoint_files_delay": 8.436, "checkpoint_files_transfer": 25.837, "file_system_delay": 1.681, "file_system_transfer": 4.652, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.837, "creation": 3.142816, "restoration": 11.987186, "total": 41.067204}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cda5b482b97070d93272592b9bdfd20ed51eb5b5e192c46cf046d2ae5a512a13", "cni.projectcalico.org/podIP": "10.42.54.240/32", "cni.projectcalico.org/podIPs": "10.42.54.240/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-bv46k\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-bv46k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-bv46k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cda5b482b97070d93272592b9bdfd20ed51eb5b5e192c46cf046d2ae5a512a13\",\"cni.projectcalico.org/podIP\":\"10.42.54.240/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.240/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"69408f45\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31005\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31005", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:12:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:12:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:12:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:12:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.240\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:12:20+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78053125", "uid": "d338d243-8104-4377-a76a-3d7a6b75a1cb"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bv46k", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bv46k", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-bv46k", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:12:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:12:20+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:12:20+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:12:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cfbccbad0ac0d14e3b6f8b13e38a1deaa358060514a0ba6613343ffa899c17b0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:12:18+00:00"}}}, {"containerID": "containerd://900b7f1bec7c15b2ac4fda6ae2ed87008f071f5cae630449043346bd373712ed", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:12:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.240", "podIPs": [{"ip": "10.42.54.240"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:12:16+00:00"}}, "message": "migration complete!", "migration_id": "69408f45", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.103, "checkpoint_files_delay": 8.388, "checkpoint_files_transfer": 25.642, "file_system_delay": 0.679, "file_system_transfer": 3.943, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.642, "creation": 3.148935, "restoration": 12.010333, "total": 40.886921}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0076e79f783b969ceb9232d34407855a10c85d687cfc6e3da90cd53ba41ced14", "cni.projectcalico.org/podIP": "10.42.54.206/32", "cni.projectcalico.org/podIPs": "10.42.54.206/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-z9m4m\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-z9m4m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-z9m4m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0076e79f783b969ceb9232d34407855a10c85d687cfc6e3da90cd53ba41ced14\",\"cni.projectcalico.org/podIP\":\"10.42.54.206/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.206/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"88ff89f4\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32420\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32420", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:13:41+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:13:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:13:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:13:45+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.206\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:13:45+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78053701", "uid": "e29e220a-9d85-491b-b59c-8dae32976c22"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z9m4m", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-z9m4m", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-z9m4m", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:13:41+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:13:45+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:13:45+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:13:41+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://73ba4437ef4290fa59586d53c5c681b4a3c5bfb96dd3cf28598e7007e2604607", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:13:43+00:00"}}}, {"containerID": "containerd://1c7e84ef2bc0533c5c04cb2da193534f746815e85b9cab552223ed0def36d62c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:13:42+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.206", "podIPs": [{"ip": "10.42.54.206"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:13:41+00:00"}}, "message": "migration complete!", "migration_id": "88ff89f4", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.398, "checkpoint_files_delay": 7.934, "checkpoint_files_transfer": 25.76, "file_system_delay": 0.672, "file_system_transfer": 3.81, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.76, "creation": 3.112498, "restoration": 12.191041, "total": 41.155362}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "8dcb3e60739d00a24987b7b50caa9e9b15d53a067df109eb23364fc94991b3e0", "cni.projectcalico.org/podIP": "10.42.54.221/32", "cni.projectcalico.org/podIPs": "10.42.54.221/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-v77jg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-v77jg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-v77jg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"8dcb3e60739d00a24987b7b50caa9e9b15d53a067df109eb23364fc94991b3e0\",\"cni.projectcalico.org/podIP\":\"10.42.54.221/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.221/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e3a61bb0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31315\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31315", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:15:07+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:15:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:15:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.221\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:15:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:15:11+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78054279", "uid": "e63a12ff-aa0c-461c-8df3-3ef359eea2d4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v77jg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v77jg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-v77jg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:15:07+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:15:10+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:15:10+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:15:07+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://7b6edba3c1233db181c51d0118121dfb859b1fc9e8dffdea932794487616b066", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:15:08+00:00"}}}, {"containerID": "containerd://850106f43fc45e2f921d2b3571218f9f9fd1dee3c4c60addd7f3a72ac7482858", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:15:08+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.221", "podIPs": [{"ip": "10.42.54.221"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:15:07+00:00"}}, "message": "migration complete!", "migration_id": "e3a61bb0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.815, "checkpoint_files_delay": 8.031, "checkpoint_files_transfer": 25.187, "file_system_delay": 1.706, "file_system_transfer": 4.811, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.187, "creation": 3.173765, "restoration": 11.860348, "total": 40.307506}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "74793621894a639f5baad71e3fbad249100baac5af3b65548777d87c2bd6b9a0", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rmbwz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rmbwz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rmbwz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"74793621894a639f5baad71e3fbad249100baac5af3b65548777d87c2bd6b9a0\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3ffa5b3a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31149\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31149", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:16:31+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:16:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:16:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:16:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:16:35+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78054852", "uid": "ba76d630-2ba2-4ddd-811f-386aaa214e50"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rmbwz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rmbwz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rmbwz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:16:31+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:16:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:16:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:16:31+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://c991507e2d8365676169f0e0447f92eae83335923944652693ab5523345ecfb2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:16:33+00:00"}}}, {"containerID": "containerd://d487e98bce20b86880616c62b9a4e0469cab615585f5bc6e8f6dcbe720cb182a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:16:32+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:16:31+00:00"}}, "message": "migration complete!", "migration_id": "3ffa5b3a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.265, "checkpoint_files_delay": 7.985, "checkpoint_files_transfer": 26.281, "file_system_delay": 1.684, "file_system_transfer": 4.738, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.281, "creation": 3.060946, "restoration": 11.87606, "total": 41.313725}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3a1e06c91d5aa1f3b6d680bec39215ff2f9c642dc7cca45262a550ce9e65b7c8", "cni.projectcalico.org/podIP": "10.42.54.220/32", "cni.projectcalico.org/podIPs": "10.42.54.220/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-v8gf9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-v8gf9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-v8gf9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3a1e06c91d5aa1f3b6d680bec39215ff2f9c642dc7cca45262a550ce9e65b7c8\",\"cni.projectcalico.org/podIP\":\"10.42.54.220/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.220/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"97cccc23\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32327\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32327", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:17:57+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:17:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:17:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:18:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.220\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:18:00+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78055498", "uid": "c629e2af-8e07-460a-95f5-f7b3121f7050"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v8gf9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v8gf9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-v8gf9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:17:57+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:18:00+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:18:00+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:17:57+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://1b0b860acdc6ffe250ecd6c81e092e8a8b4520baec50901d9b0a02cc8915d090", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:17:58+00:00"}}}, {"containerID": "containerd://d4deec3807c68640f44fbb1dfd4e13fc85780998d8942c47ec23d1fd5e52fc59", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:17:58+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.220", "podIPs": [{"ip": "10.42.54.220"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:17:57+00:00"}}, "message": "migration complete!", "migration_id": "97cccc23", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.83, "checkpoint_files_delay": 7.85, "checkpoint_files_transfer": 26.412, "file_system_delay": 1.69, "file_system_transfer": 4.819, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.412, "creation": 3.183225, "restoration": 12.509375, "total": 42.195893}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f3e7be3592a080e754dfec5db7a136b34dd8651718fe9c0b16b7136af2df96a1", "cni.projectcalico.org/podIP": "10.42.54.225/32", "cni.projectcalico.org/podIPs": "10.42.54.225/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9dwjf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9dwjf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9dwjf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f3e7be3592a080e754dfec5db7a136b34dd8651718fe9c0b16b7136af2df96a1\",\"cni.projectcalico.org/podIP\":\"10.42.54.225/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.225/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5640914c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30469\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30469", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:19:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:19:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:19:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:19:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.225\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:19:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78056079", "uid": "518b8522-62d5-4b70-b380-913bc3455f03"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9dwjf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9dwjf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9dwjf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:19:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:19:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:19:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:19:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://297bc0b8822364b33bf815ea5be3f352784c12d7f94ab8a632bffc4943e0bbf1", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:19:24+00:00"}}}, {"containerID": "containerd://f9708ede1d2980969585c9efa576eb211316cd4bd97b0dbd38e193fde66f2d2a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:19:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.225", "podIPs": [{"ip": "10.42.54.225"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:19:23+00:00"}}, "message": "migration complete!", "migration_id": "5640914c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.308, "checkpoint_files_delay": 7.938, "checkpoint_files_transfer": 25.505, "file_system_delay": 1.694, "file_system_transfer": 4.818, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.505, "creation": 3.1043, "restoration": 12.170809, "total": 40.876145}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b268814e7dc99d5cf942ec1c4a49aab7522e99eb38fe74ea3c012f78dc114d4a", "cni.projectcalico.org/podIP": "10.42.54.226/32", "cni.projectcalico.org/podIPs": "10.42.54.226/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-65ksg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-65ksg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-65ksg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b268814e7dc99d5cf942ec1c4a49aab7522e99eb38fe74ea3c012f78dc114d4a\",\"cni.projectcalico.org/podIP\":\"10.42.54.226/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.226/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7a449aa6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30281\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30281", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:44:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:44:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:44:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:44:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.226\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:44:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78065568", "uid": "7e60a3ea-bff0-432f-aca1-45de8ba0ab0e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-65ksg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-65ksg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-65ksg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:44:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:44:16+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:44:16+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:44:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://db8139e0e8a6615ee0c4f0db1b11b9ca26581852ae15e039da846b0d065d9646", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:44:14+00:00"}}}, {"containerID": "containerd://e09775bfec08e34e0bae550779bd087d19dc9856d89e3ca11b1bf5481c970727", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:44:13+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.226", "podIPs": [{"ip": "10.42.54.226"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:44:12+00:00"}}, "message": "migration complete!", "migration_id": "7a449aa6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.426, "checkpoint_files_delay": 8.115, "checkpoint_files_transfer": 26.468, "file_system_delay": 2.839, "file_system_transfer": 5.98, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.468, "creation": 3.005991, "restoration": 12.594799, "total": 42.170362}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "11cbf2a59860ba581d49b3d8f72aa6799e6f0d9a82699f98cd5681fb1626a191", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-x29v9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-x29v9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-x29v9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"11cbf2a59860ba581d49b3d8f72aa6799e6f0d9a82699f98cd5681fb1626a191\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"24e34f1a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31549\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31549", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:45:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:45:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:45:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:45:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:45:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78066140", "uid": "e73fde83-e10a-4a9e-a160-8fa0f86267f4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-x29v9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-x29v9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-x29v9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:45:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:45:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:45:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:45:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://381fed2ab1685f8f558787454a7b1fd39ed329128a68eafc8aefb3bf6c24496a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:45:40+00:00"}}}, {"containerID": "containerd://7c665860103e697a7e2e18fdc929cc55a48e7610cb89813cce90120168f6b1d8", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:45:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:45:39+00:00"}}, "message": "migration complete!", "migration_id": "24e34f1a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.8, "checkpoint_files_delay": 7.768, "checkpoint_files_transfer": 24.799, "file_system_delay": 0.464, "file_system_transfer": 3.632, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 24.799, "creation": 3.385181, "restoration": 11.819852, "total": 40.101118}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c6437bc8c22c55331f4ff6923c77275e088f16b0e654beaf030a9116c55e19f5", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mshxx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mshxx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mshxx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c6437bc8c22c55331f4ff6923c77275e088f16b0e654beaf030a9116c55e19f5\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7d00fec6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32447\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32447", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:47:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:47:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:47:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:47:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:47:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78066725", "uid": "bf573274-5008-4580-b458-fc796f2c53b5"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mshxx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mshxx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mshxx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:47:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:47:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:47:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:47:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://90ee488c3d0385a377516035660356cf1e0053f4f30c62c1d963e3b6c8809616", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:47:05+00:00"}}}, {"containerID": "containerd://24574c6876487ad539d49ff04043b9b098d705d7eafc3ba35676cd118f05965e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:47:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:47:03+00:00"}}, "message": "migration complete!", "migration_id": "7d00fec6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.145, "checkpoint_files_delay": 8.431, "checkpoint_files_transfer": 26.257, "file_system_delay": 0.575, "file_system_transfer": 3.735, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.257, "creation": 3.361336, "restoration": 11.760998, "total": 41.469451}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c59d47129103ad9c6f5c88a372658c5f19b465a58c09695c849f962e943d51b3", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-cp6t7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-cp6t7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-cp6t7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c59d47129103ad9c6f5c88a372658c5f19b465a58c09695c849f962e943d51b3\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"82d1b4c2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31861\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31861", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:48:28+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:48:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:48:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:48:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:48:32+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78067363", "uid": "27edd510-5344-4396-bc04-5fc27d3b322a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cp6t7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cp6t7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-cp6t7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:48:28+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:48:32+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:48:32+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:48:28+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d44d45a169f8e46513322f8c7b7911bb2d4d402e0e66365808b4586379adee77", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:48:30+00:00"}}}, {"containerID": "containerd://4fb5a543739d5fc4c54f7d65b736619deb66a86c56ee0b34e0a01c16fa35d162", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:48:29+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:48:28+00:00"}}, "message": "migration complete!", "migration_id": "82d1b4c2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.879, "checkpoint_files_delay": 8.525, "checkpoint_files_transfer": 25.954, "file_system_delay": 0.674, "file_system_transfer": 3.814, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.954, "creation": 3.081276, "restoration": 12.020618, "total": 41.155734}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f56222cf2038edda8bb37fa917d8c46844f6ffc577779d675c7f6703d51d8974", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xfdkd\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xfdkd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xfdkd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f56222cf2038edda8bb37fa917d8c46844f6ffc577779d675c7f6703d51d8974\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1a91ccae\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31036\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31036", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:49:54+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:49:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:49:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:49:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:49:58+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78067944", "uid": "1d276956-4b39-40de-b63f-656948d8acbf"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xfdkd", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xfdkd", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xfdkd", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:49:54+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:49:57+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:49:57+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:49:54+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3a41529dfbb4dc0d4a372b107eb21d938627361a0aa50476b955a652b4226e0b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:49:55+00:00"}}}, {"containerID": "containerd://eb404eb5a30e1061f6cdab22a7e23a4f38af2d5302e508eaefe52c1fbd0ccbf4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:49:55+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:49:54+00:00"}}, "message": "migration complete!", "migration_id": "1a91ccae", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.152, "checkpoint_files_delay": 7.978, "checkpoint_files_transfer": 26.27, "file_system_delay": 0.715, "file_system_transfer": 3.866, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 26.27, "creation": 3.072639, "restoration": 12.436111, "total": 41.86916}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "15168fe9c318ece8e081f07b14043c48f500d87bdba73a75b6470705fc6a21f9", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8mfrn\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8mfrn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8mfrn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"15168fe9c318ece8e081f07b14043c48f500d87bdba73a75b6470705fc6a21f9\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"ecdd2a86\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30264\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30264", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:51:20+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:51:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:51:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:51:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:51:24+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78068520", "uid": "07acf35f-a5fb-4a38-8bf5-de84fd75a9d4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8mfrn", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8mfrn", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8mfrn", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:51:20+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:51:24+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:51:24+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:51:20+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d4a3dfe027efa2ddd6544aaa73e4b9e93b51372658a1141c7594433b1068d15d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:51:22+00:00"}}}, {"containerID": "containerd://c69ba1ae8b4d524fecfa60c1be813bd8009d47f7640ad3a0f29a5dfc1b128e02", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:51:21+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:51:20+00:00"}}, "message": "migration complete!", "migration_id": "ecdd2a86", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.097, "checkpoint_files_delay": 8.023, "checkpoint_files_transfer": 25.059, "file_system_delay": 0.575, "file_system_transfer": 3.665, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.059, "creation": 3.238928, "restoration": 12.455603, "total": 40.848119}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e58c3b4528c1bd4d7d987c5d796d1e80901808af7bbd2c7b6302aea9c7eb2046", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-bwrph\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-bwrph\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-bwrph\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e58c3b4528c1bd4d7d987c5d796d1e80901808af7bbd2c7b6302aea9c7eb2046\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"be864008\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30585\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30585", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:52:46+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:52:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:52:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:52:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:52:49+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78069105", "uid": "539e5416-ca0b-4b7f-8c32-1cc3ed99241a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bwrph", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bwrph", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-bwrph", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:52:46+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:52:49+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:52:49+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:52:46+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://54669a494e56709cb1abf901281ce46f1b9bc51763429585c3744ab0daf0ba3d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:52:47+00:00"}}}, {"containerID": "containerd://34274bcd368cd4528d9bbbdf7cfffc6973fdd6b25be9752598292b66efc5bbe5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:52:47+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:52:46+00:00"}}, "message": "migration complete!", "migration_id": "be864008", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 24.236, "checkpoint_files_delay": 7.992, "checkpoint_files_transfer": 25.57, "file_system_delay": 1.707, "file_system_transfer": 4.724, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 25.57, "creation": 3.09282, "restoration": 12.075323, "total": 40.82404}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0efa62a8c482dfe54d1adf364859411b67b65bd0edf04eef4f6c369818cfb92d", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jlx5k\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jlx5k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jlx5k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0efa62a8c482dfe54d1adf364859411b67b65bd0edf04eef4f6c369818cfb92d\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"82ce8d09\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30858\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30858", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:54:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:54:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:54:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:54:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:54:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78069671", "uid": "d4b6feca-24da-47fc-b29b-4f4e27b6c959"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jlx5k", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jlx5k", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jlx5k", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:54:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:54:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:54:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:54:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ba4912e7b8acfcbb96c967826083d3e6b65fbe03d81507a99ecd97f17d1307d9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:54:12+00:00"}}}, {"containerID": "containerd://3315f91641833e4dd09c08f87ba704fd2094bf53de075f3e50ff0426465bc868", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:54:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:54:11+00:00"}}, "message": "migration complete!", "migration_id": "82ce8d09", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 23.496, "checkpoint_files_delay": 7.616, "checkpoint_files_transfer": 24.789, "file_system_delay": 0.697, "file_system_transfer": 3.787, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 24.789, "creation": 3.021186, "restoration": 11.859704, "total": 39.762412}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a3d28d5da3e44ce840f5f309492a9218dcdf1899f0e5b11a35a68f5d0a399e60", "cni.projectcalico.org/podIP": "10.42.54.206/32", "cni.projectcalico.org/podIPs": "10.42.54.206/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mkqmk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mkqmk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mkqmk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a3d28d5da3e44ce840f5f309492a9218dcdf1899f0e5b11a35a68f5d0a399e60\",\"cni.projectcalico.org/podIP\":\"10.42.54.206/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.206/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"512\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"be9fa1cf\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30065\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"512\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30065", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:30:14+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:30:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:30:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:30:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.206\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:30:18+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78273106", "uid": "df30a34d-e872-4a44-bd54-6c4fe56697be"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mkqmk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mkqmk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mkqmk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:30:14+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:30:18+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:30:18+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:30:14+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://36ba3a637081097d927616d5e9797bf38d9325d5c9ff8d1c7c7838aa283457b7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:30:15+00:00"}}}, {"containerID": "containerd://e647a46fbff86e5dc7b2eec7c425bdbcf8d84848b5356b251825acb8968e93e2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:30:15+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.206", "podIPs": [{"ip": "10.42.54.206"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:30:14+00:00"}}, "message": "migration complete!", "migration_id": "be9fa1cf", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 25.961, "checkpoint_files_delay": 9.029, "checkpoint_files_transfer": 27.093, "file_system_delay": 1.69, "file_system_transfer": 4.82, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 27.093, "creation": 3.394622, "restoration": 13.219551, "total": 43.80193}}], "1024": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2063cf8082e661cbf037075f19edc5c4f10d219ef7ae6a572834f3851ab50dc5", "cni.projectcalico.org/podIP": "10.42.54.215/32", "cni.projectcalico.org/podIPs": "10.42.54.215/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-cck8d\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-cck8d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-cck8d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2063cf8082e661cbf037075f19edc5c4f10d219ef7ae6a572834f3851ab50dc5\",\"cni.projectcalico.org/podIP\":\"10.42.54.215/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.215/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3e11a9eb\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31723\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31723", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:37:33+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:37:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:37:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.215\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:37:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:37:38+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74153293", "uid": "1f7a9a91-4572-4fec-854b-4418c18befaa"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cck8d", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cck8d", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-cck8d", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:37:33+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:37:37+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:37:37+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:37:33+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://eccfbdd89f23746804d520cdcd31c78ed2191bd22e55cf36cb625662f957b67c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:37:35+00:00"}}}, {"containerID": "containerd://68a289e64056ce5981916ff084c51de6962bc8945aa111f0ccfe66e80e051236", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:37:34+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.215", "podIPs": [{"ip": "10.42.54.215"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:37:33+00:00"}}, "message": "migration complete!", "migration_id": "3e11a9eb", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.529, "checkpoint_files_delay": 16.583, "checkpoint_files_transfer": 49.805, "file_system_delay": 1.691, "file_system_transfer": 4.826, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.805, "creation": 3.043666, "restoration": 24.014119, "total": 76.945804}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "61f16633059d0fb897f9de4842bb5d0b647481b867a71bf82edce805972eb27f", "cni.projectcalico.org/podIP": "10.42.54.223/32", "cni.projectcalico.org/podIPs": "10.42.54.223/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vhww8\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vhww8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vhww8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"61f16633059d0fb897f9de4842bb5d0b647481b867a71bf82edce805972eb27f\",\"cni.projectcalico.org/podIP\":\"10.42.54.223/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.223/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8f96bae0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30661\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30661", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:39:35+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:39:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:39:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:39:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.223\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:39:39+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74154086", "uid": "1932424a-2d68-405c-a313-f9c4a20bf7f3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vhww8", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vhww8", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vhww8", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:39:35+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:39:39+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:39:39+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:39:35+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f07ba34f288ce4a639b8f9449b6172ba46841730216dd357dcbd0f3187fe98c9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:39:36+00:00"}}}, {"containerID": "containerd://97ff96d21b18899c0c8779fd3826b8ec128e6eed28f89c1635982b33464249d5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:39:36+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.223", "podIPs": [{"ip": "10.42.54.223"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:39:35+00:00"}}, "message": "migration complete!", "migration_id": "8f96bae0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 50.801, "checkpoint_files_delay": 15.764, "checkpoint_files_transfer": 51.706, "file_system_delay": 1.698, "file_system_transfer": 4.987, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 51.706, "creation": 3.297209, "restoration": 23.122534, "total": 78.225147}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "09286d20c58ccf235bb2557232daf821d9ba57337e022862098b6f6c5f4d8aa5", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rqlgp\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rqlgp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rqlgp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"09286d20c58ccf235bb2557232daf821d9ba57337e022862098b6f6c5f4d8aa5\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e663258b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30411\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30411", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T15:41:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T15:41:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:41:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T15:41:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T15:41:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74154858", "uid": "94bbe529-2a1c-40e4-85a9-b17122d47656"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rqlgp", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rqlgp", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rqlgp", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T15:41:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T15:41:41+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T15:41:41+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T15:41:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d243fdcb7c46e0062ed4c036a7c52eb25885c3be53cd195eb2b6cb7322870a82", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:41:39+00:00"}}}, {"containerID": "containerd://bfe59522afb60984d6c0ac77b1b7d3a27c8d4254185a063372dc95d9a17a961f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T15:41:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-15T15:41:37+00:00"}}, "message": "migration complete!", "migration_id": "e663258b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.499, "checkpoint_files_delay": 15.176, "checkpoint_files_transfer": 48.805, "file_system_delay": 1.679, "file_system_transfer": 4.931, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 48.805, "creation": 3.029761, "restoration": 22.522744, "total": 74.458202}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "09f763801f64ef4136f3e953d9efdf6c87584111b2604859c12e19961d7615ed", "cni.projectcalico.org/podIP": "10.42.54.196/32", "cni.projectcalico.org/podIPs": "10.42.54.196/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-zd9rz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-zd9rz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-zd9rz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"09f763801f64ef4136f3e953d9efdf6c87584111b2604859c12e19961d7615ed\",\"cni.projectcalico.org/podIP\":\"10.42.54.196/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.196/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e19e2323\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32657\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32657", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:23:30+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:23:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:23:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:23:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.196\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:23:34+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78057984", "uid": "4ab46ffd-ca2c-4a09-a36c-caa7e8e62909"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zd9rz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-zd9rz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-zd9rz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:23:30+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:23:34+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:23:34+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:23:30+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d02db9e2f4faeeac64698c2e526feae1eedc7305645d3a4d1b0a153544de764d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:23:32+00:00"}}}, {"containerID": "containerd://f6370ab18b80c38bca0fc6efb2f01e0fc61fbdc153da92859e621aa99805d397", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:23:31+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.196", "podIPs": [{"ip": "10.42.54.196"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:23:30+00:00"}}, "message": "migration complete!", "migration_id": "e19e2323", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.032, "checkpoint_files_delay": 16.243, "checkpoint_files_transfer": 50.475, "file_system_delay": 1.803, "file_system_transfer": 4.981, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.475, "creation": 3.18915, "restoration": 27.903231, "total": 81.657096}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "442caad08afcd9e8d72584b9ab244de5413ee8c5e783446bf7798cae9a298279", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-6nn7k\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-6nn7k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-6nn7k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"442caad08afcd9e8d72584b9ab244de5413ee8c5e783446bf7798cae9a298279\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5ce20344\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31982\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31982", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:25:43+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:25:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:25:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:25:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:25:47+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78058816", "uid": "ee7805b1-39aa-429e-84cf-2d9c59522700"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6nn7k", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6nn7k", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-6nn7k", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:25:44+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:25:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:25:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:25:44+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3f222321f1ef598e0978c510fb90becb779967f253e99bfb2992885f52451a2c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:25:45+00:00"}}}, {"containerID": "containerd://0f7abfc69c15224c2ff339293d1b78e3c4fc782056b90ac6678a832cbb2187a4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:25:45+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:25:44+00:00"}}, "message": "migration complete!", "migration_id": "5ce20344", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.241, "checkpoint_files_delay": 15.222, "checkpoint_files_transfer": 49.578, "file_system_delay": 0.575, "file_system_transfer": 3.598, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.578, "creation": 3.253061, "restoration": 23.231943, "total": 76.194433}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "118db32a3004a0bfce347eb049b673759c910f0a81b7a2d1f48de6d261fdfd63", "cni.projectcalico.org/podIP": "10.42.54.194/32", "cni.projectcalico.org/podIPs": "10.42.54.194/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-96z2b\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-96z2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-96z2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"118db32a3004a0bfce347eb049b673759c910f0a81b7a2d1f48de6d261fdfd63\",\"cni.projectcalico.org/podIP\":\"10.42.54.194/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.194/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"08a24502\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30259\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30259", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:27:52+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:27:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:27:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:27:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.194\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:27:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78059648", "uid": "a88743ce-3894-408c-ac54-4c34fb2b7c30"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-96z2b", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-96z2b", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-96z2b", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:27:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:27:56+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:27:56+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:27:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://15cabfdb3bb626ca9dbe7c3b663dab6c0b80c41ed7fb079de898243d9812ce73", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:27:54+00:00"}}}, {"containerID": "containerd://b07006fdddc1cf484ecbd84616638aa78d4397206a46ed72f100f3f8df91bad2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:27:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.194", "podIPs": [{"ip": "10.42.54.194"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:27:52+00:00"}}, "message": "migration complete!", "migration_id": "08a24502", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.097, "checkpoint_files_delay": 16.638, "checkpoint_files_transfer": 50.492, "file_system_delay": 1.7, "file_system_transfer": 4.848, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.492, "creation": 3.282438, "restoration": 22.8519, "total": 76.731761}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3c16bbde54d1df6bfdde26411c653438af37a36dce1603b27c78a14f43c58037", "cni.projectcalico.org/podIP": "10.42.54.242/32", "cni.projectcalico.org/podIPs": "10.42.54.242/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4nskk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4nskk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4nskk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3c16bbde54d1df6bfdde26411c653438af37a36dce1603b27c78a14f43c58037\",\"cni.projectcalico.org/podIP\":\"10.42.54.242/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.242/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c61a55ea\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31257\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31257", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:30:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:30:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:30:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:30:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.242\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:30:04+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78060473", "uid": "86509234-906e-4a35-9d9e-670a225b5462"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4nskk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4nskk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4nskk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:30:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:30:04+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:30:04+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:30:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5e1ac9537939d1ac0fbae5fc5e8f5da2a7d9adc50ba6211d3216c655c188739a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:30:03+00:00"}}}, {"containerID": "containerd://c612871c7d7457a73a10a50fd6225b5fcb059b7df77f2e2890c5fd00a7e74b3e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:30:02+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.242", "podIPs": [{"ip": "10.42.54.242"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:30:01+00:00"}}, "message": "migration complete!", "migration_id": "c61a55ea", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.349, "checkpoint_files_delay": 15.614, "checkpoint_files_transfer": 49.811, "file_system_delay": 0.672, "file_system_transfer": 3.847, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.811, "creation": 3.219567, "restoration": 23.081348, "total": 76.210683}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cd303c84b56ef3f267b7271a5bc8eb6be761bb2bff337bdea8366a5b6da856be", "cni.projectcalico.org/podIP": "10.42.54.200/32", "cni.projectcalico.org/podIPs": "10.42.54.200/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-gk2bn\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-gk2bn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-gk2bn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cd303c84b56ef3f267b7271a5bc8eb6be761bb2bff337bdea8366a5b6da856be\",\"cni.projectcalico.org/podIP\":\"10.42.54.200/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.200/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"141a8cba\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30100\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30100", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T06:32:10+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T06:32:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:32:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T06:32:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.200\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T06:32:14+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78061310", "uid": "77dc0b85-458c-4a31-8de3-1987d5480bac"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gk2bn", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gk2bn", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-gk2bn", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T06:32:10+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T06:32:14+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T06:32:14+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T06:32:10+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cf3e4b1df3c7ebf8d59c5dc70b4af12243a2fce6ed802e306d8fa37333e2c4f7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:32:12+00:00"}}}, {"containerID": "containerd://c5af9440cda25162887753f50f0e774d3bf3a57e906c7c60026636c943bbd5b3", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T06:32:11+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.200", "podIPs": [{"ip": "10.42.54.200"}], "qosClass": "BestEffort", "startTime": "2023-02-23T06:32:10+00:00"}}, "message": "migration complete!", "migration_id": "141a8cba", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.176, "checkpoint_files_delay": 15.089, "checkpoint_files_transfer": 48.377, "file_system_delay": 0.672, "file_system_transfer": 3.768, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 48.377, "creation": 3.157514, "restoration": 24.754195, "total": 76.379168}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "fec67ef384e3550ca04a19a181cd70c6015281256a5f4f3ac08026a65822c387", "cni.projectcalico.org/podIP": "10.42.54.221/32", "cni.projectcalico.org/podIPs": "10.42.54.221/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7t49c\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7t49c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7t49c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"fec67ef384e3550ca04a19a181cd70c6015281256a5f4f3ac08026a65822c387\",\"cni.projectcalico.org/podIP\":\"10.42.54.221/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.221/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"03aec503\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30185\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30185", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:31:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:31:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:31:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:31:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.221\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:31:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78273942", "uid": "5b12f709-aa3a-4876-b737-78fcc2bd9b4e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7t49c", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7t49c", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7t49c", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:31:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:31:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:31:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:31:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cc506739fc80188ea1d62d1c5bf507f6e09b4a106b4bb33e81eb0c66d140dbfe", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:31:52+00:00"}}}, {"containerID": "containerd://53b37d65b8e4c37206ce0374b1911634bf63ccb7b90cb8a4aee2cfd25d21c9ea", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:31:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.221", "podIPs": [{"ip": "10.42.54.221"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:31:51+00:00"}}, "message": "migration complete!", "migration_id": "03aec503", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.541, "checkpoint_files_delay": 16.034, "checkpoint_files_transfer": 50.571, "file_system_delay": 1.684, "file_system_transfer": 4.755, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.571, "creation": 3.049619, "restoration": 23.779084, "total": 77.491106}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "89b7d0d401bd193b5825cb119c6a4cfcef034fd5f358ec0e90a2ece663c572c2", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-knt7j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-knt7j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-knt7j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"89b7d0d401bd193b5825cb119c6a4cfcef034fd5f358ec0e90a2ece663c572c2\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7a292cd2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32353\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32353", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:34:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:34:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:34:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:34:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:34:06+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78274787", "uid": "db843e9f-8db3-40e3-8f9c-d6f397baa384"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-knt7j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-knt7j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-knt7j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:34:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:34:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:34:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:34:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://89cc3990dd7b0e632714797c215f0ea67c3a7413afaaa4fac0efdcff0eefc5a5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:34:03+00:00"}}}, {"containerID": "containerd://6a9e11a9a09f8f003a3b64db1ac36b0ef7542450a1809a8eb6becc952bcf7094", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:34:02+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:34:01+00:00"}}, "message": "migration complete!", "migration_id": "7a292cd2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.257, "checkpoint_files_delay": 15.166, "checkpoint_files_transfer": 48.752, "file_system_delay": 1.707, "file_system_transfer": 4.789, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 48.752, "creation": 3.259124, "restoration": 24.35592, "total": 76.460914}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "63de4e62b3651c782f46a2b2085d748862860ae502da4b407c9f9b5835c4f2dd", "cni.projectcalico.org/podIP": "10.42.54.198/32", "cni.projectcalico.org/podIPs": "10.42.54.198/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jh6mp\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jh6mp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jh6mp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"63de4e62b3651c782f46a2b2085d748862860ae502da4b407c9f9b5835c4f2dd\",\"cni.projectcalico.org/podIP\":\"10.42.54.198/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.198/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d553bc15\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32160\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32160", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:36:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:36:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:36:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:36:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.198\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:36:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78275624", "uid": "46c11d8f-4785-4344-9a90-b178027375de"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jh6mp", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jh6mp", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jh6mp", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:36:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:36:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:36:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:36:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e6b2079378b73504774a48d8c914046a5782bbf1a6975f1bdfe595b2ad35b7a3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:36:13+00:00"}}}, {"containerID": "containerd://43703da4d9fde9a44dc83a43f02614316a7f177099b9be9a4a9765560f85ae8e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:36:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.198", "podIPs": [{"ip": "10.42.54.198"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:36:11+00:00"}}, "message": "migration complete!", "migration_id": "d553bc15", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 50.382, "checkpoint_files_delay": 17.183, "checkpoint_files_transfer": 51.596, "file_system_delay": 1.678, "file_system_transfer": 4.728, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 51.596, "creation": 3.068263, "restoration": 23.219679, "total": 77.98778}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c7bc151968b053b5efdc230046084fbe28862e91b243ca4922640a3b878694b2", "cni.projectcalico.org/podIP": "10.42.54.220/32", "cni.projectcalico.org/podIPs": "10.42.54.220/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4h42h\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4h42h\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4h42h\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c7bc151968b053b5efdc230046084fbe28862e91b243ca4922640a3b878694b2\",\"cni.projectcalico.org/podIP\":\"10.42.54.220/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.220/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"537a1213\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30948\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30948", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:38:21+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:38:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:38:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:38:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.220\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:38:26+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78276458", "uid": "99926562-4ef6-4c05-9ef4-a70cc3b733ca"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4h42h", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4h42h", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4h42h", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:38:21+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:38:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:38:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:38:21+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0819fdd70d4a9c990c84cdd2c9c432b38e463a77b1cb4835b5d63b49591b1432", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:38:23+00:00"}}}, {"containerID": "containerd://f02b07b829dcb0d85391d9f3703520a51c6552dff53e8c3438b8adb012faa93b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:38:22+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.220", "podIPs": [{"ip": "10.42.54.220"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:38:21+00:00"}}, "message": "migration complete!", "migration_id": "537a1213", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.904, "checkpoint_files_delay": 15.772, "checkpoint_files_transfer": 50.447, "file_system_delay": 1.695, "file_system_transfer": 4.98, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.447, "creation": 3.21768, "restoration": 22.846995, "total": 76.607059}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "52ce4345cb2d5cdbb3574921fce4a6711676307f075ac5476149378fb9c6f349", "cni.projectcalico.org/podIP": "10.42.54.225/32", "cni.projectcalico.org/podIPs": "10.42.54.225/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rpmz5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rpmz5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rpmz5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"52ce4345cb2d5cdbb3574921fce4a6711676307f075ac5476149378fb9c6f349\",\"cni.projectcalico.org/podIP\":\"10.42.54.225/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.225/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"388a3d5a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31559\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31559", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:40:31+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:40:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:40:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:40:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.225\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:40:35+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78277292", "uid": "81e8aeca-fd8a-4f12-b7cd-9b02821826c4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rpmz5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rpmz5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rpmz5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:40:31+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:40:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:40:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:40:31+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6908bd4de21bf5f132280958b072a42810d21bc6f69135efe35d9a63faa26b5b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:40:33+00:00"}}}, {"containerID": "containerd://b40775a2682ea19f252b83fcfe5316cb9caa821fd47bf8206d7bca04e1a73735", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:40:32+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.225", "podIPs": [{"ip": "10.42.54.225"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:40:31+00:00"}}, "message": "migration complete!", "migration_id": "388a3d5a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.63, "checkpoint_files_delay": 15.261, "checkpoint_files_transfer": 49.96, "file_system_delay": 1.701, "file_system_transfer": 4.926, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.96, "creation": 3.102342, "restoration": 23.099913, "total": 76.264342}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "cdbf7813ee180a3d449d283b5a9addfd4ac4cf317c23c350a50526387d7c3d66", "cni.projectcalico.org/podIP": "10.42.54.235/32", "cni.projectcalico.org/podIPs": "10.42.54.235/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-6vx2c\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-6vx2c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-6vx2c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"cdbf7813ee180a3d449d283b5a9addfd4ac4cf317c23c350a50526387d7c3d66\",\"cni.projectcalico.org/podIP\":\"10.42.54.235/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.235/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"579234e2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31830\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31830", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:42:40+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:42:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:42:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:42:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.235\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:42:44+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78278123", "uid": "1c1346c7-f002-4382-98d1-d35c301e1006"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6vx2c", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6vx2c", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-6vx2c", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:42:40+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:42:44+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:42:44+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:42:40+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d4ece97a62570ace979510423586dd3f5a30ba09e9450ce2e747f7243294771c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:42:41+00:00"}}}, {"containerID": "containerd://0da04fdd8c2b0f7489dc1ce9e2c32867ddb577868762f751ecbb047827cc946f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:42:41+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.235", "podIPs": [{"ip": "10.42.54.235"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:42:40+00:00"}}, "message": "migration complete!", "migration_id": "579234e2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.501, "checkpoint_files_delay": 14.945, "checkpoint_files_transfer": 49.78, "file_system_delay": 1.685, "file_system_transfer": 4.702, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.78, "creation": 3.116844, "restoration": 23.232466, "total": 76.220697}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2fae5f8a71729668e275b711a2a6033001658a5aac55b8d3b2918ddec8d3c1f0", "cni.projectcalico.org/podIP": "10.42.54.218/32", "cni.projectcalico.org/podIPs": "10.42.54.218/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-txtqx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-txtqx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-txtqx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2fae5f8a71729668e275b711a2a6033001658a5aac55b8d3b2918ddec8d3c1f0\",\"cni.projectcalico.org/podIP\":\"10.42.54.218/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.218/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1d90b000\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30652\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30652", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:44:48+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:44:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:44:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:44:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.218\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:44:52+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78278948", "uid": "d656face-f1d4-47c5-91f5-29a56d5e9283"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-txtqx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-txtqx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-txtqx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:44:48+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:44:52+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:44:52+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:44:48+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3a64bd5951be90b4a26b0ac906648edc61caf9c45c1b2ff548f6b9ce7d71a5b0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:44:50+00:00"}}}, {"containerID": "containerd://d8478cafd613bb9841dfcf3e87423b81a0eaa21284c83397151c50a94f2345f5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:44:49+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.218", "podIPs": [{"ip": "10.42.54.218"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:44:48+00:00"}}, "message": "migration complete!", "migration_id": "1d90b000", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.32, "checkpoint_files_delay": 15.199, "checkpoint_files_transfer": 49.629, "file_system_delay": 1.708, "file_system_transfer": 4.755, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.629, "creation": 3.093718, "restoration": 23.460847, "total": 76.279098}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "953248af1c5d556bce0d111ea556e589d9944a76d4afb11f79f946ab141e4490", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ssw5j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ssw5j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ssw5j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"953248af1c5d556bce0d111ea556e589d9944a76d4afb11f79f946ab141e4490\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"6faaaa7b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32197\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32197", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:46:57+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:46:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:46:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:47:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:47:01+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78279839", "uid": "ac80fdbb-cc26-46a0-8555-b140bbe2b244"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ssw5j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ssw5j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ssw5j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:46:57+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:47:01+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:47:01+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:46:57+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://afdbd5eb179cc512247cb867dfab8399b94da6ad06c571454f8810d71c62a643", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:46:58+00:00"}}}, {"containerID": "containerd://33018599b8d740c675be3b43ab6ce109504c1f9db7f06bad540deebe2361b77a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:46:58+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:46:57+00:00"}}, "message": "migration complete!", "migration_id": "6faaaa7b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.731, "checkpoint_files_delay": 15.074, "checkpoint_files_transfer": 48.681, "file_system_delay": 1.699, "file_system_transfer": 4.883, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 48.681, "creation": 3.14798, "restoration": 23.227644, "total": 75.153662}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a7a74124c947c5c856e4b381fb142d693add3f81eb609b9b806fc7a6a45a956e", "cni.projectcalico.org/podIP": "10.42.54.194/32", "cni.projectcalico.org/podIPs": "10.42.54.194/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xd6d4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xd6d4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xd6d4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a7a74124c947c5c856e4b381fb142d693add3f81eb609b9b806fc7a6a45a956e\",\"cni.projectcalico.org/podIP\":\"10.42.54.194/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.194/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c1534d83\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31316\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31316", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:49:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:49:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:49:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:49:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.194\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:49:08+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78280674", "uid": "06538ba3-2d7a-41f2-b8ee-e3672962951e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xd6d4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xd6d4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xd6d4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:49:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:49:08+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:49:08+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:49:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://c7197db69426e12eb2776c6638673372c6712a5d5b4b106b9a8d1ccba99a8f4d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:49:06+00:00"}}}, {"containerID": "containerd://dd97ca3650781d8ee65e67e4ad27d00aa9b594d1cf16d1cdaadaaaa1d55803ee", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:49:05+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.194", "podIPs": [{"ip": "10.42.54.194"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:49:04+00:00"}}, "message": "migration complete!", "migration_id": "c1534d83", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.634, "checkpoint_files_delay": 15.857, "checkpoint_files_transfer": 49.565, "file_system_delay": 1.718, "file_system_transfer": 4.783, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.565, "creation": 3.073811, "restoration": 25.219019, "total": 77.955278}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "21cc43757b215a25afc024e710202179f8c67a4dca382d03be41f98059623187", "cni.projectcalico.org/podIP": "10.42.54.242/32", "cni.projectcalico.org/podIPs": "10.42.54.242/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2r759\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2r759\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2r759\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"21cc43757b215a25afc024e710202179f8c67a4dca382d03be41f98059623187\",\"cni.projectcalico.org/podIP\":\"10.42.54.242/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.242/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"fa89d537\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30289\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30289", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:51:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:51:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:51:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:51:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.242\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:51:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78281514", "uid": "40038899-7b49-4421-8ede-0052a2b7af9c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2r759", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2r759", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2r759", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:51:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:51:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:51:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:51:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b197415f1fdc8f07164aaad9ec63bbc0574fd943b9b8c7369fd8e5b4bd7703ec", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:51:17+00:00"}}}, {"containerID": "containerd://f23c311ee70ac44e3d5ffecd2bf81176414f9a1312bb6f6e70f9436dfa5f43e2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:51:16+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.242", "podIPs": [{"ip": "10.42.54.242"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:51:15+00:00"}}, "message": "migration complete!", "migration_id": "fa89d537", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.932, "checkpoint_files_delay": 16.238, "checkpoint_files_transfer": 50.43, "file_system_delay": 1.686, "file_system_transfer": 4.755, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.43, "creation": 3.195816, "restoration": 24.149536, "total": 77.874276}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "db6926379d2b368c6beeac2dd3a845fed8952f4b2ae96fb7b82971e445f9843b", "cni.projectcalico.org/podIP": "10.42.54.200/32", "cni.projectcalico.org/podIPs": "10.42.54.200/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9fh57\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9fh57\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9fh57\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"db6926379d2b368c6beeac2dd3a845fed8952f4b2ae96fb7b82971e445f9843b\",\"cni.projectcalico.org/podIP\":\"10.42.54.200/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.200/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f6dc3202\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31355\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31355", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:53:25+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:53:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:53:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.200\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:53:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:53:30+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78282344", "uid": "a37d530e-e32c-43d9-b0e9-73ddad45a920"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9fh57", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9fh57", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9fh57", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:53:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:53:29+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:53:29+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:53:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0b3f74a2a36067ebe7722d8a292172a51491a3f8c5245900a2d647c906f20a9d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:53:27+00:00"}}}, {"containerID": "containerd://c35dbda0e1d02906e1f1a1f291534029875a28151a8ff49ea87a8e318ac2e999", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:53:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.200", "podIPs": [{"ip": "10.42.54.200"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:53:25+00:00"}}, "message": "migration complete!", "migration_id": "f6dc3202", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.915, "checkpoint_files_delay": 15.51, "checkpoint_files_transfer": 49.11, "file_system_delay": 1.679, "file_system_transfer": 4.771, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.11, "creation": 3.342443, "restoration": 23.140968, "total": 75.692464}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "06a97b019ea8b07ea6afe8006de1061800458914856eb9b60b0813f29ee97838", "cni.projectcalico.org/podIP": "10.42.54.202/32", "cni.projectcalico.org/podIPs": "10.42.54.202/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-bbklz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-bbklz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-bbklz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"06a97b019ea8b07ea6afe8006de1061800458914856eb9b60b0813f29ee97838\",\"cni.projectcalico.org/podIP\":\"10.42.54.202/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.202/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"ca4932f5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30556\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30556", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:55:34+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:55:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:55:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:55:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.202\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:55:38+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78283174", "uid": "db59cce2-3286-4a4d-94e5-e31bd5f2e010"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bbklz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bbklz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-bbklz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:55:34+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:55:38+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:55:38+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:55:34+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://c3eb802dd0c96dcef89889a9ee29364ac51d014c7368bbaeea8e0b4028345291", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:55:36+00:00"}}}, {"containerID": "containerd://90341a672fc3200a3f6a8fee2517ccc43ba55f28653cf84a875e2c2dac134555", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:55:35+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.202", "podIPs": [{"ip": "10.42.54.202"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:55:34+00:00"}}, "message": "migration complete!", "migration_id": "ca4932f5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.817, "checkpoint_files_delay": 15.751, "checkpoint_files_transfer": 49.023, "file_system_delay": 1.687, "file_system_transfer": 4.895, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.023, "creation": 3.324338, "restoration": 23.295666, "total": 75.736744}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "01cbd1fa31bdd206d2e2dcb657e14efc292ba9d354df34169ba355368ca6ad02", "cni.projectcalico.org/podIP": "10.42.54.208/32", "cni.projectcalico.org/podIPs": "10.42.54.208/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g5lb9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g5lb9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g5lb9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"01cbd1fa31bdd206d2e2dcb657e14efc292ba9d354df34169ba355368ca6ad02\",\"cni.projectcalico.org/podIP\":\"10.42.54.208/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.208/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8bf5ee46\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31906\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31906", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:57:42+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:57:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:57:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:57:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.208\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:57:47+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78284000", "uid": "676d0993-6bf2-4879-824e-8f1c49590df4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g5lb9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g5lb9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g5lb9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:57:42+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:57:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:57:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:57:42+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b1644cafdbed4a889cd2017b8858f6e0a386421ff910a0e8473b55ff304a2688", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:57:44+00:00"}}}, {"containerID": "containerd://b3cf255ec3d3bc55bc0a05c41f503cf30c23d0644441fbab2a2b063938a35307", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:57:43+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.208", "podIPs": [{"ip": "10.42.54.208"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:57:42+00:00"}}, "message": "migration complete!", "migration_id": "8bf5ee46", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.641, "checkpoint_files_delay": 15.337, "checkpoint_files_transfer": 49.123, "file_system_delay": 1.673, "file_system_transfer": 4.803, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.123, "creation": 3.038009, "restoration": 23.763955, "total": 76.015512}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0efa6264b3ae44079cb178b8cd15c639ffb64b0e67c2850bcb194ec5998d7ea8", "cni.projectcalico.org/podIP": "10.42.54.226/32", "cni.projectcalico.org/podIPs": "10.42.54.226/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dj2kg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dj2kg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dj2kg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0efa6264b3ae44079cb178b8cd15c639ffb64b0e67c2850bcb194ec5998d7ea8\",\"cni.projectcalico.org/podIP\":\"10.42.54.226/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.226/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e745c5e9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30226\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30226", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T16:59:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:59:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T16:59:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T16:59:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.226\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T16:59:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78284821", "uid": "e55a9fd9-ed0a-49eb-ab2e-2896cbb11809"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dj2kg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dj2kg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dj2kg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T16:59:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T16:59:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T16:59:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T16:59:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b214ece18cf9e3a2d234f68eb5c32d0c40cefc425b28e9a17b592cb70dfe7d8b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:59:53+00:00"}}}, {"containerID": "containerd://62dc66395617f7136f418dee24215901403a546cd3e6e9889b9cf60e74d4a933", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T16:59:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.226", "podIPs": [{"ip": "10.42.54.226"}], "qosClass": "BestEffort", "startTime": "2023-02-23T16:59:51+00:00"}}, "message": "migration complete!", "migration_id": "e745c5e9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 47.326, "checkpoint_files_delay": 15.548, "checkpoint_files_transfer": 48.28, "file_system_delay": 1.704, "file_system_transfer": 4.861, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 48.28, "creation": 3.114507, "restoration": 22.831612, "total": 74.319102}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "eb82f0c193e0cf2255fb9cdeb1cb9e04397d17ec426b4cded06f803b43b504e1", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7rsst\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7rsst\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7rsst\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"eb82f0c193e0cf2255fb9cdeb1cb9e04397d17ec426b4cded06f803b43b504e1\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"860946fe\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30463\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30463", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T17:01:59+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T17:01:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T17:01:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T17:02:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T17:02:03+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78285715", "uid": "c0dabc29-6624-4383-9f3e-8652b4d8618e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7rsst", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7rsst", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7rsst", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T17:01:59+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T17:02:03+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T17:02:03+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T17:01:59+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0649a2d48732c7f90b577bba86138ed757231b9b5ee491c1f9265916c2821df8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T17:02:00+00:00"}}}, {"containerID": "containerd://ab34a3e79e6c38eb8d5951b8ce27ac9ea4a078e97fa66f8b2b45dc53aa956ef9", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T17:02:00+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-23T17:01:59+00:00"}}, "message": "migration complete!", "migration_id": "860946fe", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.264, "checkpoint_files_delay": 15.259, "checkpoint_files_transfer": 49.192, "file_system_delay": 1.687, "file_system_transfer": 4.97, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.192, "creation": 3.140615, "restoration": 23.707579, "total": 76.135825}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "34da8153acde9669e8da5f881c1f09e3bd998110dd4c6cfa2f5fd61847b3d04e", "cni.projectcalico.org/podIP": "10.42.54.223/32", "cni.projectcalico.org/podIPs": "10.42.54.223/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9xwpv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9xwpv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9xwpv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"34da8153acde9669e8da5f881c1f09e3bd998110dd4c6cfa2f5fd61847b3d04e\",\"cni.projectcalico.org/podIP\":\"10.42.54.223/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.223/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"6da493d0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30954\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30954", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:28:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:28:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:28:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:28:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.223\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:28:43+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78358790", "uid": "c6823acb-2904-4764-bbf4-28b1520bb0e9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9xwpv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9xwpv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9xwpv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:28:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:28:43+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:28:43+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:28:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a7f6cc68efc0a875516f848a35640d5982791fc1f7eb9e78071722fd7c7d0bcc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:28:40+00:00"}}}, {"containerID": "containerd://8b7d844fbe813cc31ef14c01a212cd69e1cd354229d04916d061b13412d9d8fd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:28:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.223", "podIPs": [{"ip": "10.42.54.223"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:28:39+00:00"}}, "message": "migration complete!", "migration_id": "6da493d0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.329, "checkpoint_files_delay": 16.93, "checkpoint_files_transfer": 50.458, "file_system_delay": 1.681, "file_system_transfer": 4.911, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.458, "creation": 3.478007, "restoration": 26.265625, "total": 80.29015}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e9eddddc5603fa80228f698c1357ce915043c4072dca7356f7c9c5154ba35b67", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ltjq7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ltjq7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ltjq7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e9eddddc5603fa80228f698c1357ce915043c4072dca7356f7c9c5154ba35b67\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"72be5699\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30663\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30663", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:30:52+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:30:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:30:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:30:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:30:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78359638", "uid": "3d55186a-a9cd-4ca1-a3a1-d15fa013f149"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ltjq7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ltjq7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ltjq7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:30:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:30:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:30:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:30:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b1ae01576727f9eac6fa82aa2492ca290e003e7550c3b6554ac84e9292d066ec", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:30:54+00:00"}}}, {"containerID": "containerd://ef7645ca2f2e3d5330c586771d4f171451edcb6f93b773d67361945ed3329142", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:30:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:30:52+00:00"}}, "message": "migration complete!", "migration_id": "72be5699", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.654, "checkpoint_files_delay": 16.777, "checkpoint_files_transfer": 50.601, "file_system_delay": 0.479, "file_system_transfer": 3.593, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.601, "creation": 3.17934, "restoration": 22.999915, "total": 76.897531}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "787c4ec795cbe71f218723fbbab97e82ce44cd5208ff9619888d4eadd191d4e8", "cni.projectcalico.org/podIP": "10.42.54.215/32", "cni.projectcalico.org/podIPs": "10.42.54.215/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-q7n4q\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-q7n4q\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-q7n4q\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"787c4ec795cbe71f218723fbbab97e82ce44cd5208ff9619888d4eadd191d4e8\",\"cni.projectcalico.org/podIP\":\"10.42.54.215/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.215/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b4aca18d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31315\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31315", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:33:01+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:33:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:33:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:33:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.215\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:33:05+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78360471", "uid": "71ad8a75-d804-4759-bfc5-756207a6080e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-q7n4q", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-q7n4q", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-q7n4q", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:33:01+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:33:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:33:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:33:01+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8bed43989cd7e76842c4b26e1d53ad466c90fa4fc58ac3888fc3b5def3a54c19", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:33:03+00:00"}}}, {"containerID": "containerd://88776f99ab276640e721a02a39103d8e1900ee4ce6df560ac86807a564f991d4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:33:03+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.215", "podIPs": [{"ip": "10.42.54.215"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:33:01+00:00"}}, "message": "migration complete!", "migration_id": "b4aca18d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.064, "checkpoint_files_delay": 16.238, "checkpoint_files_transfer": 49.521, "file_system_delay": 0.457, "file_system_transfer": 3.644, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.521, "creation": 3.17341, "restoration": 25.157582, "total": 77.94193}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "341164ac62d794a4a6def786cb492b6fbb99882edf00c6d356d63b7360dbd008", "cni.projectcalico.org/podIP": "10.42.54.193/32", "cni.projectcalico.org/podIPs": "10.42.54.193/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-s8k5b\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-s8k5b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-s8k5b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"341164ac62d794a4a6def786cb492b6fbb99882edf00c6d356d63b7360dbd008\",\"cni.projectcalico.org/podIP\":\"10.42.54.193/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.193/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d23b35a2\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30657\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30657", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:35:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:35:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:35:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:35:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.193\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:35:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78361379", "uid": "1f6a39d3-224a-45f9-90ba-909ee211376c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-s8k5b", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-s8k5b", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-s8k5b", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:35:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:35:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:35:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:35:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5f7d86ddc540a9436e5ec2d00cbd23dd38aa4c716c5f69403b0b3bf4c4bdbe44", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:35:14+00:00"}}}, {"containerID": "containerd://f50626267f3dcd79363eec23f294c6071ebaf2534580ecc0373dd2514db495ea", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:35:13+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.193", "podIPs": [{"ip": "10.42.54.193"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:35:12+00:00"}}, "message": "migration complete!", "migration_id": "d23b35a2", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 49.098, "checkpoint_files_delay": 15.479, "checkpoint_files_transfer": 50.243, "file_system_delay": 0.573, "file_system_transfer": 3.788, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 50.243, "creation": 3.169785, "restoration": 24.744173, "total": 78.267888}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d75979fb9a0b4353dd285d63d519e0329749093a307d016fad6525f65968386c", "cni.projectcalico.org/podIP": "10.42.54.238/32", "cni.projectcalico.org/podIPs": "10.42.54.238/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-685gm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-685gm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-685gm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d75979fb9a0b4353dd285d63d519e0329749093a307d016fad6525f65968386c\",\"cni.projectcalico.org/podIP\":\"10.42.54.238/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.238/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"155f40df\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32567\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32567", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:37:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:37:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:37:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:37:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.238\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:37:26+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78362203", "uid": "0c348a06-e05c-498f-943a-93913b113b03"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-685gm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-685gm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-685gm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:37:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:37:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:37:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:37:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://be6c4c644a2401dadaeef62bc9bc391d8dd1de70587a7dbbf994ea340932d58b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:37:24+00:00"}}}, {"containerID": "containerd://d4c96ec69439f83e59fff01dd3fcc7f3c06c49284d4373720528e5203a220b18", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:37:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.238", "podIPs": [{"ip": "10.42.54.238"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:37:23+00:00"}}, "message": "migration complete!", "migration_id": "155f40df", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 48.076, "checkpoint_files_delay": 15.286, "checkpoint_files_transfer": 49.137, "file_system_delay": 0.458, "file_system_transfer": 3.568, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 49.137, "creation": 3.297886, "restoration": 23.49913, "total": 76.024197}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2a9c56e6416659cf13938f231628cb3876a37798840c2f3a487ad793423667aa", "cni.projectcalico.org/podIP": "10.42.54.249/32", "cni.projectcalico.org/podIPs": "10.42.54.249/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g55g7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g55g7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g55g7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2a9c56e6416659cf13938f231628cb3876a37798840c2f3a487ad793423667aa\",\"cni.projectcalico.org/podIP\":\"10.42.54.249/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.249/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"43010337\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30194\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30194", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:39:31+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:39:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:39:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:39:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.249\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:39:35+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78363027", "uid": "dd65048c-9372-467a-930f-957d04435826"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g55g7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g55g7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g55g7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:39:31+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:39:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:39:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:39:31+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e5ff9dbd7e67a835427a29b9b87c5b38ee1f8ae5d8e3fed55780e77900066ac2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:39:33+00:00"}}}, {"containerID": "containerd://e7ede7e591620e9c976949c953a8632c26d1d8e2d2300e21fed9873d6a36a65e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:39:32+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.249", "podIPs": [{"ip": "10.42.54.249"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:39:31+00:00"}}, "message": "migration complete!", "migration_id": "43010337", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 46.818, "checkpoint_files_delay": 15.149, "checkpoint_files_transfer": 47.934, "file_system_delay": 0.671, "file_system_transfer": 3.771, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 47.934, "creation": 3.099902, "restoration": 23.496816, "total": 74.614447}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e84126f83fe36e9ff83291f05cdeb2b7854aa8fd98b55c32e12872b0691b522a", "cni.projectcalico.org/podIP": "10.42.54.252/32", "cni.projectcalico.org/podIPs": "10.42.54.252/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-nq4mg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-nq4mg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-nq4mg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e84126f83fe36e9ff83291f05cdeb2b7854aa8fd98b55c32e12872b0691b522a\",\"cni.projectcalico.org/podIP\":\"10.42.54.252/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.252/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"1024\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"229b52b9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32302\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"1024\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32302", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T20:41:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:41:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T20:41:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T20:41:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.252\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T20:41:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78363875", "uid": "d78658ed-7672-4143-a9a1-b74e3b622a7b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-nq4mg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-nq4mg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-nq4mg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T20:41:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T20:41:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T20:41:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T20:41:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://bb7b8215621f1251faedae7c29018d8d3b104840a30bdc754ace497c7fe33410", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:41:41+00:00"}}}, {"containerID": "containerd://f1075cae175e5b6dbeefb7ebaf639adb579773b514ccdb14bf1ed5cf5be337c5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T20:41:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.252", "podIPs": [{"ip": "10.42.54.252"}], "qosClass": "BestEffort", "startTime": "2023-02-23T20:41:39+00:00"}}, "message": "migration complete!", "migration_id": "229b52b9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 50.055, "checkpoint_files_delay": 15.169, "checkpoint_files_transfer": 51.478, "file_system_delay": 0.248, "file_system_transfer": 3.372, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 51.478, "creation": 3.358185, "restoration": 23.562585, "total": 78.482372}}], "64": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "10b0bfb1ad50fbabb3a2b8d73a29b6f3f0f497ca386bd4f62b4249fd0231b492", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-bqv9m\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-bqv9m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-bqv9m\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"10b0bfb1ad50fbabb3a2b8d73a29b6f3f0f497ca386bd4f62b4249fd0231b492\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"24734057\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31522\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31522", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T16:24:36+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:24:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T16:24:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T16:24:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:24:40+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74171262", "uid": "a986243e-67c2-4498-8214-379aa806139b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bqv9m", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-bqv9m", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-bqv9m", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T16:24:36+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T16:24:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T16:24:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T16:24:36+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://85c0c4b28a981bdc4744a6acb37d7e60f09dc0e23e4639d2b6cba71523dcdc35", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:24:38+00:00"}}}, {"containerID": "containerd://577cec4b1655f2d160b0367607cee15509a0a83fe5e6e331bc4cb2b97994bf31", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:24:37+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-15T16:24:36+00:00"}}, "message": "migration complete!", "migration_id": "24734057", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.529, "checkpoint_files_delay": 1.308, "checkpoint_files_transfer": 4.605, "file_system_delay": 0.558, "file_system_transfer": 3.931, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.605, "creation": 3.32233, "restoration": 2.303095, "total": 10.326369}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "dd8886cae024070347ab33bcbb192d0367d253ec73716bcb65c8513d6cf7ce4a", "cni.projectcalico.org/podIP": "10.42.54.220/32", "cni.projectcalico.org/podIPs": "10.42.54.220/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-l5v2j\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-l5v2j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-l5v2j\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"dd8886cae024070347ab33bcbb192d0367d253ec73716bcb65c8513d6cf7ce4a\",\"cni.projectcalico.org/podIP\":\"10.42.54.220/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.220/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"04bc97b7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32194\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32194", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T16:25:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T16:25:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:25:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T16:25:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.220\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:25:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74171621", "uid": "0ead513f-182b-4a36-bb2b-cb4569bf5524"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l5v2j", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-l5v2j", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-l5v2j", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T16:25:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T16:25:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T16:25:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T16:25:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://dedff24fc11ca3c87c7695b67d89431237db86925d71f1c31ea8c1c06a7f1a36", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:25:25+00:00"}}}, {"containerID": "containerd://efec47b4cb76b59b8bc6c9e2ee8a40e1a30461c19320586d296aad6bcf1fe0ed", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:25:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.220", "podIPs": [{"ip": "10.42.54.220"}], "qosClass": "BestEffort", "startTime": "2023-02-15T16:25:23+00:00"}}, "message": "migration complete!", "migration_id": "04bc97b7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.497, "checkpoint_files_delay": 1.704, "checkpoint_files_transfer": 4.814, "file_system_delay": 1.698, "file_system_transfer": 5.255, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.255, "creation": 2.987142, "restoration": 2.236172, "total": 10.566627}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "98dd76c7e1ac4ef330492cf8497fb537bd20e7fa2fb3457d20746c7528f00e79", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-f4chc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-f4chc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-f4chc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"98dd76c7e1ac4ef330492cf8497fb537bd20e7fa2fb3457d20746c7528f00e79\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"213a90ce\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31262\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31262", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-15T16:26:10+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-15T16:26:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:26:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-15T16:26:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-15T16:26:14+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "74171973", "uid": "a4677fcf-85aa-495d-8a22-f1ba3531fa69"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-f4chc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-f4chc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-f4chc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-15T16:26:10+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-15T16:26:14+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-15T16:26:14+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-15T16:26:10+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b6dba1459d37491a145bbba637f8d7440054d1451bfd8be4aa67541ca2cf51de", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:26:12+00:00"}}}, {"containerID": "containerd://f845e2ca55d169357f26114e20f8a6067ecd1c54ab5307f6a5c5f160cf920e7e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-15T16:26:11+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-15T16:26:10+00:00"}}, "message": "migration complete!", "migration_id": "213a90ce", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.42, "checkpoint_files_delay": 1.282, "checkpoint_files_transfer": 4.644, "file_system_delay": 0.667, "file_system_transfer": 4.176, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.644, "creation": 3.260928, "restoration": 2.202734, "total": 10.203176}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "934077c4cbdcbbebb295808efc2655ac2f6737ebb38040c9273160fc91d74f4f", "cni.projectcalico.org/podIP": "10.42.54.223/32", "cni.projectcalico.org/podIPs": "10.42.54.223/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9jskd\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9jskd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9jskd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"934077c4cbdcbbebb295808efc2655ac2f6737ebb38040c9273160fc91d74f4f\",\"cni.projectcalico.org/podIP\":\"10.42.54.223/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.223/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8c357316\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32170\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32170", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:48:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:48:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:48:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:48:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.223\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:48:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77887892", "uid": "04b2989a-eef3-4d0a-8162-af4bccb8f115"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9jskd", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9jskd", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9jskd", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:48:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:48:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:48:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:48:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://24a8f20acae5699120f1d86a5467007a6f0a42f06b4bd1b2415afe754666e65b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:48:17+00:00"}}}, {"containerID": "containerd://83bbb263db6fe1dd6e19c6062759950f1b2143f1f9c07073fe80e196663a3318", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:48:16+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.223", "podIPs": [{"ip": "10.42.54.223"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:48:15+00:00"}}, "message": "migration complete!", "migration_id": "8c357316", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.5, "checkpoint_files_delay": 2.81, "checkpoint_files_transfer": 5.04, "file_system_delay": 2.803, "file_system_transfer": 6.245, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.245, "creation": 3.218395, "restoration": 2.42933, "total": 11.972314}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9191a3dfa509eea3021d3c5471d2f99a759cf3ccffc45c48e3fbb9972d381c97", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8chgz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8chgz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8chgz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9191a3dfa509eea3021d3c5471d2f99a759cf3ccffc45c48e3fbb9972d381c97\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"69a14bed\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32761\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32761", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:49:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:49:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:49:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:49:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:49:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77888238", "uid": "24b999ba-8370-455f-a178-4876c6415dab"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8chgz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8chgz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8chgz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:49:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:49:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:49:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:49:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6f1ed4a202f76ba6112578bddab4d30be585541ec7bef86eb7966d2a93e89736", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:49:05+00:00"}}}, {"containerID": "containerd://e6643278b860404afff2c8205494ff2e9be0c6892a69a16e64181ccd354174ca", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:49:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:49:03+00:00"}}, "message": "migration complete!", "migration_id": "69a14bed", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.501, "checkpoint_files_delay": 1.706, "checkpoint_files_transfer": 4.862, "file_system_delay": 1.697, "file_system_transfer": 4.995, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.995, "creation": 3.108121, "restoration": 2.210597, "total": 10.410541}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "31ef126d339469c0b8942451dc16d09f2641614f05dc54b2ae3bcacddf128a06", "cni.projectcalico.org/podIP": "10.42.54.228/32", "cni.projectcalico.org/podIPs": "10.42.54.228/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-v9g56\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-v9g56\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-v9g56\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"31ef126d339469c0b8942451dc16d09f2641614f05dc54b2ae3bcacddf128a06\",\"cni.projectcalico.org/podIP\":\"10.42.54.228/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.228/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f4faffae\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31812\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31812", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T00:58:58+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T00:58:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T00:58:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T00:59:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.228\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T00:59:02+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77934163", "uid": "fabaa7d7-abd7-4646-a3ee-76e4009ba888"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v9g56", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v9g56", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-v9g56", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T00:58:58+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T00:59:02+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T00:59:02+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T00:58:58+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ce56ceb8344612ce4dfbfd11d2647aa022ace295ab49ca3b1d1f7bee83ccf7fa", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T00:59:00+00:00"}}}, {"containerID": "containerd://d1e7d38e49bc2935544a44cd20cccb8b676c32a6e3f7dec1cc2b1a13942c26b2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T00:58:59+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.228", "podIPs": [{"ip": "10.42.54.228"}], "qosClass": "BestEffort", "startTime": "2023-02-23T00:58:58+00:00"}}, "message": "migration complete!", "migration_id": "f4faffae", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.552, "checkpoint_files_delay": 1.696, "checkpoint_files_transfer": 4.854, "file_system_delay": 1.679, "file_system_transfer": 5.137, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.137, "creation": 3.276891, "restoration": 2.385341, "total": 10.892299}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b3f49f2d2ff0c713e1dbad97eef5adf715fe3fea9911a23bf45c0af0955bc817", "cni.projectcalico.org/podIP": "10.42.54.222/32", "cni.projectcalico.org/podIPs": "10.42.54.222/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-npzkw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-npzkw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-npzkw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b3f49f2d2ff0c713e1dbad97eef5adf715fe3fea9911a23bf45c0af0955bc817\",\"cni.projectcalico.org/podIP\":\"10.42.54.222/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.222/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"71587016\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30403\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30403", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T00:59:47+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T00:59:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T00:59:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T00:59:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.222\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T00:59:51+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77934535", "uid": "80081344-8836-4e8c-af7e-6bef65d2f76d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-npzkw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-npzkw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-npzkw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T00:59:47+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T00:59:51+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T00:59:51+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T00:59:47+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6475497bb66d854658999adeb9613f460aa9b26d0747ad72ff2ee09f33ca7a61", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T00:59:49+00:00"}}}, {"containerID": "containerd://5e6281355ff70cf37104fd9edda38b8c3d6fdaad56b2cdd00f7711fbc0a1043b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T00:59:48+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.222", "podIPs": [{"ip": "10.42.54.222"}], "qosClass": "BestEffort", "startTime": "2023-02-23T00:59:47+00:00"}}, "message": "migration complete!", "migration_id": "71587016", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.381, "checkpoint_files_delay": 2.822, "checkpoint_files_transfer": 5.043, "file_system_delay": 2.813, "file_system_transfer": 6.094, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.094, "creation": 3.083491, "restoration": 2.24719, "total": 11.514891}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "977d1093025191fdcd640d862066e7a4ef5efedf890fab5b4f6d1f8f05daa6c0", "cni.projectcalico.org/podIP": "10.42.54.204/32", "cni.projectcalico.org/podIPs": "10.42.54.204/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-22nfd\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-22nfd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-22nfd\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"977d1093025191fdcd640d862066e7a4ef5efedf890fab5b4f6d1f8f05daa6c0\",\"cni.projectcalico.org/podIP\":\"10.42.54.204/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.204/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"19618118\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30979\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30979", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:00:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:00:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:00:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.204\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:00:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:00:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77934896", "uid": "a31b52f0-a00b-4415-8096-01059c28d686"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-22nfd", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-22nfd", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-22nfd", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:00:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:00:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:00:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:00:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://8e7c5138b6e210b1b6e8c7764f201eafc0ef6c78791a14942b88e995676c085c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:00:38+00:00"}}}, {"containerID": "containerd://52960d88f3e52ff1f25dd5a9c818e69cc155b4d8c93de6efe9caa0d65f9640be", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:00:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.204", "podIPs": [{"ip": "10.42.54.204"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:00:37+00:00"}}, "message": "migration complete!", "migration_id": "19618118", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.399, "checkpoint_files_delay": 1.689, "checkpoint_files_transfer": 4.736, "file_system_delay": 1.68, "file_system_transfer": 5.075, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.075, "creation": 3.297455, "restoration": 2.189988, "total": 10.644917}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f2c25299fcaf51e72a7c7d7b4efcd46a602df930020302c585e145a9aff90c50", "cni.projectcalico.org/podIP": "10.42.54.231/32", "cni.projectcalico.org/podIPs": "10.42.54.231/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-n7fzw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-n7fzw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-n7fzw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f2c25299fcaf51e72a7c7d7b4efcd46a602df930020302c585e145a9aff90c50\",\"cni.projectcalico.org/podIP\":\"10.42.54.231/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.231/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"549849b0\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32332\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32332", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:01:24+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:01:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:01:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:01:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.231\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:01:28+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77935256", "uid": "ac7d250a-d40f-4a0e-9231-b649dba06b9f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-n7fzw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-n7fzw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-n7fzw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:01:24+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:01:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:01:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:01:24+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://da7a3fa4edb4205cf010415e24b8215c4eceafc34e928d62913140c0f48405cc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:01:25+00:00"}}}, {"containerID": "containerd://3fe7c093b85d56b75fa3708b0305e9c24154697bcbb239844ba24be04e6cee19", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:01:25+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.231", "podIPs": [{"ip": "10.42.54.231"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:01:24+00:00"}}, "message": "migration complete!", "migration_id": "549849b0", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.229, "checkpoint_files_delay": 2.803, "checkpoint_files_transfer": 4.937, "file_system_delay": 2.795, "file_system_transfer": 5.943, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.943, "creation": 3.118797, "restoration": 2.359454, "total": 11.509222}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5dd4be96a891b99ee84924134d356cfa05d6b5744559eada2be964459ad00823", "cni.projectcalico.org/podIP": "10.42.54.227/32", "cni.projectcalico.org/podIPs": "10.42.54.227/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ht6rn\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ht6rn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ht6rn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5dd4be96a891b99ee84924134d356cfa05d6b5744559eada2be964459ad00823\",\"cni.projectcalico.org/podIP\":\"10.42.54.227/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.227/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2781403b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32334\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32334", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:02:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:02:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:02:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:02:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.227\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:02:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77935605", "uid": "5c19556f-f62f-4ba4-889c-287d947d171b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ht6rn", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ht6rn", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ht6rn", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:02:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:02:16+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:02:16+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:02:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://de150becbab54bc8edc8ee65e75230e51d9e43f7096de7a94eab253bb05f4996", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:02:14+00:00"}}}, {"containerID": "containerd://3b2ab56eae50009c03f97dbd1219ce83329e98bd59af659a6c4fc0a18829ef91", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:02:13+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.227", "podIPs": [{"ip": "10.42.54.227"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:02:12+00:00"}}, "message": "migration complete!", "migration_id": "2781403b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.406, "checkpoint_files_delay": 1.703, "checkpoint_files_transfer": 4.621, "file_system_delay": 1.695, "file_system_transfer": 4.992, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.992, "creation": 3.184525, "restoration": 2.302188, "total": 10.564585}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7031ef84774fabb719ae4952f9e07ab67446a62c368944a55dc2b9fb61e39867", "cni.projectcalico.org/podIP": "10.42.54.237/32", "cni.projectcalico.org/podIPs": "10.42.54.237/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-fkhp4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-fkhp4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-fkhp4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7031ef84774fabb719ae4952f9e07ab67446a62c368944a55dc2b9fb61e39867\",\"cni.projectcalico.org/podIP\":\"10.42.54.237/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.237/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"65e78959\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31336\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31336", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:03:00+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:03:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:03:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:03:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.237\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:03:04+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77935968", "uid": "2a0c24bb-fafe-4c53-be70-c750f3c9615a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fkhp4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fkhp4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-fkhp4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:03:00+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:03:04+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:03:04+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:03:00+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ba49adf0aace0a875e9559709df58669aaa1bb5dfcaa119d5f8f9747d435bd38", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:03:02+00:00"}}}, {"containerID": "containerd://1a3ca47c2557e227106286f48494e6b3964ba43655e83c01e3e01ba2188878f7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:03:01+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.237", "podIPs": [{"ip": "10.42.54.237"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:03:00+00:00"}}, "message": "migration complete!", "migration_id": "65e78959", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.396, "checkpoint_files_delay": 1.683, "checkpoint_files_transfer": 4.616, "file_system_delay": 1.675, "file_system_transfer": 5.208, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.208, "creation": 3.033754, "restoration": 2.191486, "total": 10.538736}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "6c9a3e5566c15ebff3955556c79024613ad88656a3097c3dc90a021b2b5fbfec", "cni.projectcalico.org/podIP": "10.42.54.245/32", "cni.projectcalico.org/podIPs": "10.42.54.245/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-sfsj5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-sfsj5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-sfsj5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"6c9a3e5566c15ebff3955556c79024613ad88656a3097c3dc90a021b2b5fbfec\",\"cni.projectcalico.org/podIP\":\"10.42.54.245/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.245/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f3270e34\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32006\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32006", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:03:48+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:03:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:03:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:03:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.245\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:03:52+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77936325", "uid": "fbe83660-20ed-4c50-9f5a-0ef6b68d0e34"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sfsj5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-sfsj5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-sfsj5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:03:48+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:03:52+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:03:52+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:03:48+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://182acb27f6a9a4feff2fe960616b267345cc9d1cc1c66480ccecd618402290a1", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:03:50+00:00"}}}, {"containerID": "containerd://ac24b61a0b80a830910fde0e19ed80eeef7d535f8431fa82eb87a71ac1d595d8", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:03:49+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.245", "podIPs": [{"ip": "10.42.54.245"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:03:48+00:00"}}, "message": "migration complete!", "migration_id": "f3270e34", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.392, "checkpoint_files_delay": 1.693, "checkpoint_files_transfer": 4.689, "file_system_delay": 1.686, "file_system_transfer": 5.086, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.086, "creation": 3.086536, "restoration": 2.200204, "total": 10.463015}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "534b1599d82847ead0e13bff8cc79e262588181454e827d1d804651597fcca05", "cni.projectcalico.org/podIP": "10.42.54.219/32", "cni.projectcalico.org/podIPs": "10.42.54.219/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2rfls\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2rfls\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2rfls\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"534b1599d82847ead0e13bff8cc79e262588181454e827d1d804651597fcca05\",\"cni.projectcalico.org/podIP\":\"10.42.54.219/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.219/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b5f61891\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30859\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30859", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:04:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:04:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:04:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:04:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.219\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:04:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77936684", "uid": "e7a5d872-4ad1-4adb-8cdf-2348f97bf2ad"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2rfls", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2rfls", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2rfls", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:04:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:04:41+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:04:41+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:04:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e681f77620c74fabc59538c4aa3fb7c1465103006675f4e8bfd3427fedf42ce9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:04:38+00:00"}}}, {"containerID": "containerd://78bc6b653dad6af7bfcf93545ab0e3c2e910441d68542d565b93468a6d3ffeae", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:04:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.219", "podIPs": [{"ip": "10.42.54.219"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:04:37+00:00"}}, "message": "migration complete!", "migration_id": "b5f61891", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.482, "checkpoint_files_delay": 2.847, "checkpoint_files_transfer": 5.018, "file_system_delay": 2.838, "file_system_transfer": 6.121, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.121, "creation": 3.009886, "restoration": 2.225077, "total": 11.449631}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "660e8a204eb6c1debc3b4b39d8e6e838b3f4fcd32d9b41106e03505c2b7479d7", "cni.projectcalico.org/podIP": "10.42.54.251/32", "cni.projectcalico.org/podIPs": "10.42.54.251/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-flp58\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-flp58\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-flp58\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"660e8a204eb6c1debc3b4b39d8e6e838b3f4fcd32d9b41106e03505c2b7479d7\",\"cni.projectcalico.org/podIP\":\"10.42.54.251/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.251/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7663da5e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31251\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31251", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:05:26+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:05:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:05:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:05:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.251\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:05:30+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77937044", "uid": "887aaca6-7b65-4b57-a0e1-0d5692e9410b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-flp58", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-flp58", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-flp58", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:05:26+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:05:30+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:05:30+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:05:26+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b7f9d4d81379544379097cecff3fa70483e00da7af916380621d5f36eb84d4df", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:05:28+00:00"}}}, {"containerID": "containerd://843f8fb9b7fa1887ae48c11d7ef1f8c44c395a57ea71cbb0bac9de07bfbfb8b7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:05:27+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.251", "podIPs": [{"ip": "10.42.54.251"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:05:26+00:00"}}, "message": "migration complete!", "migration_id": "7663da5e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.407, "checkpoint_files_delay": 1.72, "checkpoint_files_transfer": 4.694, "file_system_delay": 1.695, "file_system_transfer": 5.146, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.146, "creation": 3.094686, "restoration": 2.242557, "total": 10.582021}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0854818e9fa0d5c0582a6147f3b8ec02e3542b50b1f0e327ea368c898559fa32", "cni.projectcalico.org/podIP": "10.42.54.205/32", "cni.projectcalico.org/podIPs": "10.42.54.205/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-j64fx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-j64fx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-j64fx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0854818e9fa0d5c0582a6147f3b8ec02e3542b50b1f0e327ea368c898559fa32\",\"cni.projectcalico.org/podIP\":\"10.42.54.205/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.205/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"92fdf849\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30768\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30768", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:06:14+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:06:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:06:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:06:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.205\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:06:18+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77937411", "uid": "52be5351-7009-403e-a5cf-dafb9f9b0dc9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j64fx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j64fx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-j64fx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:06:14+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:06:18+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:06:18+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:06:14+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://178185b3071c8fed82e68486cb7bc9360548b5ca97905356e946ce8e91eaccce", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:06:16+00:00"}}}, {"containerID": "containerd://7ae0f327016ba20dd80eb688e7b2cb48efec4a6931a366800d656c7fc7044c34", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:06:15+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.205", "podIPs": [{"ip": "10.42.54.205"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:06:14+00:00"}}, "message": "migration complete!", "migration_id": "92fdf849", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.369, "checkpoint_files_delay": 2.826, "checkpoint_files_transfer": 5.012, "file_system_delay": 2.817, "file_system_transfer": 6.014, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.014, "creation": 3.051316, "restoration": 2.143385, "total": 11.297752}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "95c3429c613392998b6b90ae36c663db266138b20a0bd8101dd1977b923a6764", "cni.projectcalico.org/podIP": "10.42.54.214/32", "cni.projectcalico.org/podIPs": "10.42.54.214/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-m7rqg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-m7rqg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-m7rqg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"95c3429c613392998b6b90ae36c663db266138b20a0bd8101dd1977b923a6764\",\"cni.projectcalico.org/podIP\":\"10.42.54.214/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.214/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"cbbe9843\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30848\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30848", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:07:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:07:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:07:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:07:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.214\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:07:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77937774", "uid": "e451013e-f751-443a-b6b7-c3f14c1bc617"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-m7rqg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-m7rqg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-m7rqg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:07:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:07:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:07:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:07:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://7148544eb59106509fc7b8a8a6eb7b2f7bc55c99a435b67576aea4fb37e8c3a7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:07:05+00:00"}}}, {"containerID": "containerd://1b710b2621bb696efe5f9bae6598a400390bdd76a0136ae646b5c2871aef4a19", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:07:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.214", "podIPs": [{"ip": "10.42.54.214"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:07:03+00:00"}}, "message": "migration complete!", "migration_id": "cbbe9843", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.429, "checkpoint_files_delay": 2.802, "checkpoint_files_transfer": 5.016, "file_system_delay": 2.795, "file_system_transfer": 5.941, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.941, "creation": 2.991157, "restoration": 2.219168, "total": 11.240765}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "40d17b1af7b7c9182a83702edd755acf9366ecd32e15e37c7dc84e63940e5860", "cni.projectcalico.org/podIP": "10.42.54.243/32", "cni.projectcalico.org/podIPs": "10.42.54.243/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8x6zv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8x6zv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8x6zv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"40d17b1af7b7c9182a83702edd755acf9366ecd32e15e37c7dc84e63940e5860\",\"cni.projectcalico.org/podIP\":\"10.42.54.243/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.243/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"62bfdcd6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32468\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32468", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:07:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:07:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:07:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.243\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:07:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:07:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77938122", "uid": "860768e2-63d3-4642-8c71-77e1e2fa01f0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8x6zv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8x6zv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8x6zv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:07:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:07:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:07:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:07:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f0f78a3a99932155d2b6403e46fb2b460fc4bcfc17f2f185215a3d60490243c6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:07:53+00:00"}}}, {"containerID": "containerd://e5ebec19a8d7bfc99d8ddf484cb3a538452bc2443dfdbeff03cd83c6268bdec1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:07:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.243", "podIPs": [{"ip": "10.42.54.243"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:07:51+00:00"}}, "message": "migration complete!", "migration_id": "62bfdcd6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.41, "checkpoint_files_delay": 1.714, "checkpoint_files_transfer": 4.822, "file_system_delay": 1.702, "file_system_transfer": 5.129, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.129, "creation": 3.001545, "restoration": 2.194378, "total": 10.41612}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "fb9fce0907f06fe8f3cbc4dd3e5089b78bab9ce2d1431df6567a1c643872462b", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tdshk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tdshk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tdshk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"fb9fce0907f06fe8f3cbc4dd3e5089b78bab9ce2d1431df6567a1c643872462b\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2a238bba\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31663\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31663", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:08:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:08:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:08:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:08:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:08:43+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77938472", "uid": "2663a012-1213-43b1-9d83-ebf32cbd6e93"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tdshk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tdshk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tdshk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:08:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:08:43+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:08:43+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:08:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://df7e8fbd69027b37cf0bcbc8f8af5dd8166c5084b8fc67dcb356321133adee90", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:08:40+00:00"}}}, {"containerID": "containerd://8baaca85dfedef08123fc23a8e4d37c1f4791d8d9ff52d27833c5a07b36b73ac", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:08:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:08:39+00:00"}}, "message": "migration complete!", "migration_id": "2a238bba", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.36, "checkpoint_files_delay": 1.695, "checkpoint_files_transfer": 4.877, "file_system_delay": 1.685, "file_system_transfer": 5.187, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.187, "creation": 3.166916, "restoration": 2.228353, "total": 10.669136}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "701b0e830cc1767f8b6b7d978342623d806f12675bc7f7a69a8bf828fd1fd19e", "cni.projectcalico.org/podIP": "10.42.54.226/32", "cni.projectcalico.org/podIPs": "10.42.54.226/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-859s8\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-859s8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-859s8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"701b0e830cc1767f8b6b7d978342623d806f12675bc7f7a69a8bf828fd1fd19e\",\"cni.projectcalico.org/podIP\":\"10.42.54.226/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.226/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4a369ffe\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31077\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31077", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:09:27+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:09:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:09:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:09:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.226\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:09:31+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77938834", "uid": "84fe559a-1cfb-4524-a559-d9a4a8b30345"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-859s8", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-859s8", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-859s8", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:09:27+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:09:31+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:09:31+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:09:27+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://bdb212af7cac0c6fff9f189754b3c3bb41f821f15f4ae6d3470c13fcca043b5d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:09:29+00:00"}}}, {"containerID": "containerd://c4b3f26f6acaa26f8642fb5c042a68d09074149ae8778c5b4ad3521cfe928531", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:09:28+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.226", "podIPs": [{"ip": "10.42.54.226"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:09:27+00:00"}}, "message": "migration complete!", "migration_id": "4a369ffe", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.358, "checkpoint_files_delay": 1.693, "checkpoint_files_transfer": 4.697, "file_system_delay": 1.685, "file_system_transfer": 5.139, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.139, "creation": 3.031148, "restoration": 2.203976, "total": 10.468442}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0d250d6aadf535235f9362c93ce9c42d903c6a23a30f2ccfcfebdcf10f86d22a", "cni.projectcalico.org/podIP": "10.42.54.229/32", "cni.projectcalico.org/podIPs": "10.42.54.229/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-cvhcl\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-cvhcl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-cvhcl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0d250d6aadf535235f9362c93ce9c42d903c6a23a30f2ccfcfebdcf10f86d22a\",\"cni.projectcalico.org/podIP\":\"10.42.54.229/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.229/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3040219e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32582\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32582", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:10:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:10:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:10:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:10:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.229\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:10:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77939208", "uid": "970a922a-5eeb-4cb3-b646-9940c02ab6da"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cvhcl", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-cvhcl", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-cvhcl", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:10:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:10:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:10:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:10:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://183788aa77f5796b15f37a937d9236e8e862c3689bd26c0c2deb9d1c5f3d8abc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:10:17+00:00"}}}, {"containerID": "containerd://573149fa8d500c426627efa603c05a723ea66445ded4b40a913604c9d18b1f99", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:10:16+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.229", "podIPs": [{"ip": "10.42.54.229"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:10:15+00:00"}}, "message": "migration complete!", "migration_id": "3040219e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.197, "checkpoint_files_delay": 2.825, "checkpoint_files_transfer": 4.944, "file_system_delay": 2.816, "file_system_transfer": 6.07, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.07, "creation": 3.080264, "restoration": 2.190281, "total": 11.428269}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a55a156922a25c8168d76cdb835ced68b27f0641807ea233ff24bdbe9294520f", "cni.projectcalico.org/podIP": "10.42.54.234/32", "cni.projectcalico.org/podIPs": "10.42.54.234/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-q686v\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-q686v\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-q686v\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a55a156922a25c8168d76cdb835ced68b27f0641807ea233ff24bdbe9294520f\",\"cni.projectcalico.org/podIP\":\"10.42.54.234/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.234/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"a7f2b1bb\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31815\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31815", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:11:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:11:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:11:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:11:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.234\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:11:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77939555", "uid": "aac6aead-66e4-4e26-9037-8c03fb412aaf"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-q686v", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-q686v", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-q686v", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:11:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:11:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:11:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:11:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f19836c8bd5b30a752a2c4f85daf4b9b131da9b8db6ff40fc888201ab00f850c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:11:05+00:00"}}}, {"containerID": "containerd://355de95b48e4e73c206d0df46b5bf8103e77d22c334e695899cf8bd35de35325", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:11:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.234", "podIPs": [{"ip": "10.42.54.234"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:11:03+00:00"}}, "message": "migration complete!", "migration_id": "a7f2b1bb", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.492, "checkpoint_files_delay": 1.683, "checkpoint_files_transfer": 4.929, "file_system_delay": 1.677, "file_system_transfer": 5.104, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.104, "creation": 3.086606, "restoration": 2.171429, "total": 10.453112}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ab257ccd759b2aa389f8f8f35bec569f06ff0fba61ad555d2824da94a8f0d1b9", "cni.projectcalico.org/podIP": "10.42.54.240/32", "cni.projectcalico.org/podIPs": "10.42.54.240/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xgr7g\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xgr7g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xgr7g\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ab257ccd759b2aa389f8f8f35bec569f06ff0fba61ad555d2824da94a8f0d1b9\",\"cni.projectcalico.org/podIP\":\"10.42.54.240/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.240/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f61b9c89\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30093\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30093", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T01:11:52+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:11:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T01:11:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T01:11:56+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.240\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T01:11:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77939915", "uid": "acec3db4-8c6e-4fb1-b57c-d74678ea3adb"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xgr7g", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xgr7g", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xgr7g", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T01:11:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T01:11:56+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T01:11:56+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T01:11:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://7fc7dee9e56350301d0c05c0c35fe110ae3d714e6d788777d9fd1ea4dc437898", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:11:54+00:00"}}}, {"containerID": "containerd://862326a107c2e513b31d758bae03ebe5633695b867794601608990d8cfb35dc8", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T01:11:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.240", "podIPs": [{"ip": "10.42.54.240"}], "qosClass": "BestEffort", "startTime": "2023-02-23T01:11:52+00:00"}}, "message": "migration complete!", "migration_id": "f61b9c89", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.886, "checkpoint_files_delay": 1.715, "checkpoint_files_transfer": 5.148, "file_system_delay": 1.703, "file_system_transfer": 5.457, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.457, "creation": 3.080586, "restoration": 2.342219, "total": 10.97624}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e24ab91c27de83062614ce3c8148ad2170206c00ba6dd1780b91479150d8264d", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-snzl5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-snzl5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-snzl5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e24ab91c27de83062614ce3c8148ad2170206c00ba6dd1780b91479150d8264d\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"90572ce9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30456\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30456", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:47:14+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:47:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:47:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:47:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:47:18+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78016961", "uid": "c9526e1e-661f-43bd-b29d-4d944239721f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-snzl5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-snzl5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-snzl5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:47:14+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:47:18+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:47:18+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:47:14+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://9fd006b4e38797b6d8d47dfd9d2549a988d073212553ca7ed6b3e4d0d2ae2431", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:47:16+00:00"}}}, {"containerID": "containerd://9b3b7d04e3c28baa3f0b3f12c3f86af5276f81170de972c83989f037bff86b1c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:47:15+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:47:14+00:00"}}, "message": "migration complete!", "migration_id": "90572ce9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.459, "checkpoint_files_delay": 1.369, "checkpoint_files_transfer": 4.538, "file_system_delay": 0.578, "file_system_transfer": 4.312, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.538, "creation": 3.424651, "restoration": 2.209851, "total": 10.273272}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "8363118f44eefd4dbf105e861b51db327aeff6385982e4389ea52bdac5241bf2", "cni.projectcalico.org/podIP": "10.42.54.213/32", "cni.projectcalico.org/podIPs": "10.42.54.213/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-qt42k\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-qt42k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-qt42k\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"8363118f44eefd4dbf105e861b51db327aeff6385982e4389ea52bdac5241bf2\",\"cni.projectcalico.org/podIP\":\"10.42.54.213/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.213/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"605acd30\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31077\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31077", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:48:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:48:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:48:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:48:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.213\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:48:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78017454", "uid": "5f82ca73-f5d1-49e3-93af-ba8e63fc1b38"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qt42k", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-qt42k", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-qt42k", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:48:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:48:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:48:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:48:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3c855655893063bd9b77b0518295ba73e850f47d7813fe2faf5df3a2dc2d8b51", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:48:17+00:00"}}}, {"containerID": "containerd://bd5c52a1d54bdc4ebf58dd6999e652201d37369b5d7c27cb6cddb9343cd22201", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:48:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.213", "podIPs": [{"ip": "10.42.54.213"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:48:16+00:00"}}, "message": "migration complete!", "migration_id": "605acd30", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.397, "checkpoint_files_delay": 1.324, "checkpoint_files_transfer": 4.597, "file_system_delay": 0.25, "file_system_transfer": 3.845, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.597, "creation": 3.416642, "restoration": 2.226227, "total": 10.324811}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0ba4df7e97fc927fc9129bc8f3f2f973f6069adfd864e259132edd9ab029301d", "cni.projectcalico.org/podIP": "10.42.54.239/32", "cni.projectcalico.org/podIPs": "10.42.54.239/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mnzlf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mnzlf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mnzlf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0ba4df7e97fc927fc9129bc8f3f2f973f6069adfd864e259132edd9ab029301d\",\"cni.projectcalico.org/podIP\":\"10.42.54.239/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.239/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"990f0c7e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32218\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32218", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:49:03+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:49:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:49:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:49:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.239\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:49:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78017821", "uid": "014d4b0f-ef5a-4905-91d3-27125091ba7e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mnzlf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mnzlf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mnzlf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:49:03+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:49:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:49:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:49:03+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://9841279fe17ac329a9f4b961e3378b35dad688666ba178d51f2dc8a5d893909c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:49:05+00:00"}}}, {"containerID": "containerd://a53a75a05e648f2f7e58bc72f3729c77dccbadd7edf0b5f4d0a2651126a79799", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:49:04+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.239", "podIPs": [{"ip": "10.42.54.239"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:49:03+00:00"}}, "message": "migration complete!", "migration_id": "990f0c7e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.342, "checkpoint_files_delay": 2.824, "checkpoint_files_transfer": 4.92, "file_system_delay": 2.812, "file_system_transfer": 5.985, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.985, "creation": 3.112159, "restoration": 2.31395, "total": 11.507658}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ac8406d474aa09a094780eacd39bbd634503dc7f275a812ce639636e90ffc880", "cni.projectcalico.org/podIP": "10.42.54.223/32", "cni.projectcalico.org/podIPs": "10.42.54.223/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vvl5s\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vvl5s\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vvl5s\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ac8406d474aa09a094780eacd39bbd634503dc7f275a812ce639636e90ffc880\",\"cni.projectcalico.org/podIP\":\"10.42.54.223/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.223/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"89edf051\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31545\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31545", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:49:52+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:49:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:49:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.223\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:49:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:49:56+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78018172", "uid": "d4dea1d1-ea20-44f8-a8d8-4666e78116b1"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vvl5s", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vvl5s", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vvl5s", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:49:52+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:49:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:49:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:49:52+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://7f7c01992dd027f55f90832c4dab9aea6a863b9ea81f1d7d8122001369ba89e4", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:49:53+00:00"}}}, {"containerID": "containerd://e99d8c743cc2691632e5104ba87e0c1a009dc8cad55cd9a451c8c883729cb91d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:49:53+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.223", "podIPs": [{"ip": "10.42.54.223"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:49:52+00:00"}}, "message": "migration complete!", "migration_id": "89edf051", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.458, "checkpoint_files_delay": 1.696, "checkpoint_files_transfer": 4.937, "file_system_delay": 1.69, "file_system_transfer": 5.106, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.106, "creation": 3.121596, "restoration": 2.207221, "total": 10.5142}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "4e8aec9a87d7076c58069823a79f04c44c340e99ac08826673054771099086ef", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dsccf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dsccf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dsccf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"4e8aec9a87d7076c58069823a79f04c44c340e99ac08826673054771099086ef\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f4d91a72\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30099\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30099", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:50:40+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:50:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:50:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:50:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:50:44+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78018533", "uid": "a8358f4a-1247-40ab-b1ba-62beb5eb482a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dsccf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dsccf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dsccf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:50:40+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:50:44+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:50:44+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:50:40+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://92c69b89c88cd4020473a0e07cedb03adf305262ac069152d76940e61f81f387", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:50:41+00:00"}}}, {"containerID": "containerd://f25bdc94b608aa32750a708b95c28312cfda2cb31443fcb216f41bdaf68f16e1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:50:41+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:50:40+00:00"}}, "message": "migration complete!", "migration_id": "f4d91a72", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.344, "checkpoint_files_delay": 1.719, "checkpoint_files_transfer": 4.835, "file_system_delay": 1.708, "file_system_transfer": 5.133, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.133, "creation": 3.021895, "restoration": 2.213331, "total": 10.448409}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e37b81b944be68d7ce086438649840b65d62754a8a831170065b240635c1edbc", "cni.projectcalico.org/podIP": "10.42.54.215/32", "cni.projectcalico.org/podIPs": "10.42.54.215/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mwvdh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mwvdh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mwvdh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e37b81b944be68d7ce086438649840b65d62754a8a831170065b240635c1edbc\",\"cni.projectcalico.org/podIP\":\"10.42.54.215/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.215/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"66ab3965\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31550\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31550", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:51:28+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:51:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:51:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:51:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.215\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:51:32+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78018895", "uid": "32e00505-25a1-4768-9dd5-5cdc80bab8dd"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mwvdh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mwvdh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mwvdh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:51:28+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:51:32+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:51:32+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:51:28+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5f270088d6e1ae19ccb52fe0e716602576d78bcc00a1df7ec7c3c8b710a8f541", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:51:30+00:00"}}}, {"containerID": "containerd://2b8af23338d239cbd0223ac6df93867b884e7e19ebaf15ebc271b7907b7accdd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:51:29+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.215", "podIPs": [{"ip": "10.42.54.215"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:51:28+00:00"}}, "message": "migration complete!", "migration_id": "66ab3965", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.382, "checkpoint_files_delay": 1.706, "checkpoint_files_transfer": 4.928, "file_system_delay": 1.7, "file_system_transfer": 5.032, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.032, "creation": 3.039866, "restoration": 2.227252, "total": 10.395057}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f8330a78509261dc577f95a8630005f9e46908ccf520dccad034cf1c2df7d1ae", "cni.projectcalico.org/podIP": "10.42.54.193/32", "cni.projectcalico.org/podIPs": "10.42.54.193/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2v665\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2v665\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2v665\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f8330a78509261dc577f95a8630005f9e46908ccf520dccad034cf1c2df7d1ae\",\"cni.projectcalico.org/podIP\":\"10.42.54.193/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.193/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"dd728871\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30423\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30423", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:52:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:52:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:52:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:52:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.193\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:52:20+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78019249", "uid": "f25db539-fb0f-409b-be20-add1fcccde10"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2v665", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2v665", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2v665", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:52:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:52:20+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:52:20+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:52:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f7a02dfe77bc28cdbee08a2849698a23046bfc852f1f7c8815a8904662b1b98c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:52:18+00:00"}}}, {"containerID": "containerd://04898b244a9bd3b946f46d1182436fd2d98a41479b141f7834f7a160e498df8d", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:52:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.193", "podIPs": [{"ip": "10.42.54.193"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:52:16+00:00"}}, "message": "migration complete!", "migration_id": "dd728871", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.435, "checkpoint_files_delay": 1.705, "checkpoint_files_transfer": 4.826, "file_system_delay": 1.695, "file_system_transfer": 5.053, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.053, "creation": 3.06391, "restoration": 2.276577, "total": 10.494027}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c784d21c2f6dafb42c89b89978d3629f0f0f9d72c15e6e18b76e86ebce04e8d0", "cni.projectcalico.org/podIP": "10.42.54.247/32", "cni.projectcalico.org/podIPs": "10.42.54.247/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-kx4bj\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-kx4bj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-kx4bj\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c784d21c2f6dafb42c89b89978d3629f0f0f9d72c15e6e18b76e86ebce04e8d0\",\"cni.projectcalico.org/podIP\":\"10.42.54.247/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.247/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"64\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"72681154\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31577\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"64\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31577", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:53:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:53:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:53:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:53:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.247\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:53:07+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78019606", "uid": "156e0b15-07a0-43a8-894f-f68a03c5b335"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kx4bj", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-kx4bj", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-kx4bj", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:53:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:53:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:53:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:53:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://dc58de436920ee89319abd668909a696a46bfab3d83caff86198e1961d6d65c5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:53:05+00:00"}}}, {"containerID": "containerd://b7a405dc34e415e9a42270da567a8d513f18f5d90abb31242afb5b9ae5021d13", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:53:05+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.247", "podIPs": [{"ip": "10.42.54.247"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:53:04+00:00"}}, "message": "migration complete!", "migration_id": "72681154", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.319, "checkpoint_files_delay": 2.818, "checkpoint_files_transfer": 4.83, "file_system_delay": 2.812, "file_system_transfer": 6.048, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.048, "creation": 3.156767, "restoration": 2.222339, "total": 11.511665}}], "4": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "63d557d419faa5bb9d74f76885cf844d54263ad4044fdb11f48231e832553aed", "cni.projectcalico.org/podIP": "10.42.54.216/32", "cni.projectcalico.org/podIPs": "10.42.54.216/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-nzxww\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-nzxww\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-nzxww\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"63d557d419faa5bb9d74f76885cf844d54263ad4044fdb11f48231e832553aed\",\"cni.projectcalico.org/podIP\":\"10.42.54.216/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.216/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"17ed472b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31939\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31939", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:09:21+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:09:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:09:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:09:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.216\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:09:25+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77848599", "uid": "04bbc02c-983e-491f-9aa0-50eeba61f984"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-nzxww", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-nzxww", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-nzxww", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:09:21+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:09:25+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:09:25+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:09:21+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0ff211f7d72810aacf1577759f1a068bd402c9c22ac4f04735b673b827ecf15d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:09:23+00:00"}}}, {"containerID": "containerd://28a42aed1ce72645c139c2c872b5fd72bb26f6153fd4346305180907fd51eeb1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:09:22+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.216", "podIPs": [{"ip": "10.42.54.216"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:09:21+00:00"}}, "message": "migration complete!", "migration_id": "17ed472b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.541, "checkpoint_files_delay": 1.698, "checkpoint_files_transfer": 4.816, "file_system_delay": 1.692, "file_system_transfer": 5.145, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.145, "creation": 3.070184, "restoration": 2.409394, "total": 10.725266}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "1ce6d6fb1ca49a0c726e07fc1d08efe6fc79e4554e53ae24dda927bc844ab81f", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-b6n5t\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-b6n5t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-b6n5t\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"1ce6d6fb1ca49a0c726e07fc1d08efe6fc79e4554e53ae24dda927bc844ab81f\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2763b6e7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32548\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32548", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:10:09+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:10:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:10:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:10:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:10:13+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77848947", "uid": "27a20663-7352-47d0-948b-aa42f1405b93"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b6n5t", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-b6n5t", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-b6n5t", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:10:09+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:10:12+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:10:12+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:10:09+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6f5e60bf406fcb49e048a9f1ebe6a6d32c50c7a5d2a0aaad81797d1ee09fd3a7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:10:10+00:00"}}}, {"containerID": "containerd://cb7cb171bf837eac7a7cac1975c8bf37e28838097e20dbb463ce9148c270027f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:10:10+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:10:09+00:00"}}, "message": "migration complete!", "migration_id": "2763b6e7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.699, "checkpoint_files_delay": 1.819, "checkpoint_files_transfer": 4.92, "file_system_delay": 1.81, "file_system_transfer": 5.295, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.295, "creation": 3.131589, "restoration": 2.173535, "total": 10.69233}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b845b266cbd84cff9a4f6be30fe67f469272668e054e74bac0d84cb9442a1def", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mb6sh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mb6sh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mb6sh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b845b266cbd84cff9a4f6be30fe67f469272668e054e74bac0d84cb9442a1def\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8518cf50\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32756\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32756", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:10:57+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:10:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:10:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:11:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:11:01+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77849307", "uid": "ba313414-953c-4a3a-834d-b017cd291498"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mb6sh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mb6sh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mb6sh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:10:57+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:11:01+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:11:01+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:10:57+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3c09da871a0cdf6659c983ff90fd8567217220ce97d70c9771333bf0dcbe920d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:10:59+00:00"}}}, {"containerID": "containerd://f424501fd10eb4c98912f7457ff5f000161968d5344862dbca4904a952d8c7d1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:10:58+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:10:57+00:00"}}, "message": "migration complete!", "migration_id": "8518cf50", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.378, "checkpoint_files_delay": 1.314, "checkpoint_files_transfer": 4.476, "file_system_delay": 0.68, "file_system_transfer": 4.432, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.476, "creation": 3.142047, "restoration": 2.262872, "total": 9.973899}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "436ae9bb4575e31c1843bff3d84c36f571c5b233b7bab8c73a59b0d25c9f9478", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4d4gz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4d4gz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4d4gz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"436ae9bb4575e31c1843bff3d84c36f571c5b233b7bab8c73a59b0d25c9f9478\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d27c5809\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31509\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31509", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:11:43+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:11:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:11:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:11:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:11:47+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77849659", "uid": "1950a3ce-4e40-4ba8-8a00-7a0c9ab6a57b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4d4gz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4d4gz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4d4gz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:11:43+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:11:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:11:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:11:43+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4bac3d061f9a0e9dd6726945dcfcd21501f4e6aa3554b0ddd8e12b2d1fbb46c5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:11:45+00:00"}}}, {"containerID": "containerd://4f84b535c4cde69743e6fc0e9792421bfddc2c0a5e020b546e1df638c046127b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:11:44+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:11:43+00:00"}}, "message": "migration complete!", "migration_id": "d27c5809", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.676, "checkpoint_files_delay": 1.693, "checkpoint_files_transfer": 4.879, "file_system_delay": 1.681, "file_system_transfer": 5.126, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.126, "creation": 3.083464, "restoration": 2.22317, "total": 10.521789}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5a92fc710e67cefc50b7f871c70e4c6f942077038d036ba553dfce27fd2e5f32", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vtfgf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vtfgf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vtfgf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5a92fc710e67cefc50b7f871c70e4c6f942077038d036ba553dfce27fd2e5f32\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3d8029a8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31859\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31859", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:12:29+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:12:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:12:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:12:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:12:33+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77850009", "uid": "a0d9bd4f-9bdf-4cea-a184-af9b67a280a4"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vtfgf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vtfgf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vtfgf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:12:29+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:12:33+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:12:33+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:12:29+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://2f139a4e0fb1eb42fd06d364379cbd787fa2d729de9d466ff22edc41741d7603", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:12:31+00:00"}}}, {"containerID": "containerd://e05031c544db5b8dbc0f891b5d710d1009a84858d3543cee2adce4ae87e89464", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:12:30+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:12:29+00:00"}}, "message": "migration complete!", "migration_id": "3d8029a8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.482, "checkpoint_files_delay": 1.683, "checkpoint_files_transfer": 4.698, "file_system_delay": 1.677, "file_system_transfer": 5.077, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.077, "creation": 3.168756, "restoration": 2.232655, "total": 10.56642}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "986c635b3c9f83e2605f860f2e74de020f00e788ec2fdff3532f9c59bad82e27", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g87tf\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g87tf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g87tf\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"986c635b3c9f83e2605f860f2e74de020f00e788ec2fdff3532f9c59bad82e27\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4263cd6d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30975\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30975", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:13:18+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:13:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:13:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:13:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:13:21+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77850366", "uid": "5ff30415-ecb8-4d39-b60d-a021aa475fe9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g87tf", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g87tf", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g87tf", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:13:18+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:13:21+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:13:21+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:13:18+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f5b5fbf8e1c87bee94162bc58fc8a98cbf7f489b87d2abddf852d7bffa497aeb", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:13:19+00:00"}}}, {"containerID": "containerd://f91279b033f287d97d25cc0a8a00d1e0007e961124c24986f657f41379165cc4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:13:19+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:13:18+00:00"}}, "message": "migration complete!", "migration_id": "4263cd6d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.464, "checkpoint_files_delay": 1.352, "checkpoint_files_transfer": 4.636, "file_system_delay": 0.674, "file_system_transfer": 4.286, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.636, "creation": 3.058709, "restoration": 2.24077, "total": 10.032705}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e18c47e0155b021a03d29d892d0d8fcb3d3174d06ed7e9e5cf97418e4eb7bddb", "cni.projectcalico.org/podIP": "10.42.54.213/32", "cni.projectcalico.org/podIPs": "10.42.54.213/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jvfcq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jvfcq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jvfcq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e18c47e0155b021a03d29d892d0d8fcb3d3174d06ed7e9e5cf97418e4eb7bddb\",\"cni.projectcalico.org/podIP\":\"10.42.54.213/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.213/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c30bff8c\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31582\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31582", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:14:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:14:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:14:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.213\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:14:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:14:08+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77850711", "uid": "4b121c87-3888-4467-876b-2a04bbddfee3"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jvfcq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jvfcq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jvfcq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:14:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:14:07+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:14:07+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:14:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://976805940a1b17cd7edd4bf72d6c89b06ca5b251a79b93594ecc939625b0803d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:14:06+00:00"}}}, {"containerID": "containerd://2a7b903d49e69f01d2befbf34d0a6a0e410bff71b088f7587625b81d41588dc9", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:14:05+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.213", "podIPs": [{"ip": "10.42.54.213"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:14:04+00:00"}}, "message": "migration complete!", "migration_id": "c30bff8c", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.479, "checkpoint_files_delay": 1.69, "checkpoint_files_transfer": 4.71, "file_system_delay": 1.682, "file_system_transfer": 5.127, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.127, "creation": 3.049317, "restoration": 2.210738, "total": 10.476257}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "afce357d1ac0dffeada8f82eff90012f9db50952e61c5b0f2b0eb35954161076", "cni.projectcalico.org/podIP": "10.42.54.209/32", "cni.projectcalico.org/podIPs": "10.42.54.209/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-t9g8b\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-t9g8b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-t9g8b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"afce357d1ac0dffeada8f82eff90012f9db50952e61c5b0f2b0eb35954161076\",\"cni.projectcalico.org/podIP\":\"10.42.54.209/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.209/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d96cd874\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31705\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31705", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:14:50+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:14:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:14:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:14:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.209\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:14:54+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77851054", "uid": "97351084-83a9-4baa-99d9-cce9b74d70f6"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-t9g8b", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-t9g8b", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-t9g8b", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:14:50+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:14:54+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:14:54+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:14:50+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://93de2918f7b06732b151cf869454bce05c4c2c17db7e7e48af3797ad3b7e6cc8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:14:52+00:00"}}}, {"containerID": "containerd://bada574ed1f76416c5c3f2d8f1e524d324652e62536e9288443be9416c553ad0", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:14:51+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.209", "podIPs": [{"ip": "10.42.54.209"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:14:50+00:00"}}, "message": "migration complete!", "migration_id": "d96cd874", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.445, "checkpoint_files_delay": 1.698, "checkpoint_files_transfer": 4.724, "file_system_delay": 1.692, "file_system_transfer": 5.062, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.062, "creation": 3.159123, "restoration": 2.257601, "total": 10.574188}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b0588ebbc6c8e4716d5856673d9cc709d04d01b08475d4a54c96ecbbadd8f8f4", "cni.projectcalico.org/podIP": "10.42.54.207/32", "cni.projectcalico.org/podIPs": "10.42.54.207/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-g59r2\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-g59r2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-g59r2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b0588ebbc6c8e4716d5856673d9cc709d04d01b08475d4a54c96ecbbadd8f8f4\",\"cni.projectcalico.org/podIP\":\"10.42.54.207/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.207/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"40f907a1\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31327\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31327", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:22:18+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:22:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:22:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:22:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.207\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:22:22+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77853890", "uid": "2c98996d-4e42-4a06-986f-5f9dbd4ca300"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g59r2", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-g59r2", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-g59r2", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:22:18+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:22:22+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:22:22+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:22:18+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b9dd63ccae87ac248acf8fb0c5d1555ae61507eca37c1c3699580065357bd7d0", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:22:20+00:00"}}}, {"containerID": "containerd://b547b40020b016a633a37619c6e7f0055d28d44e72430405a61ac878067c9709", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:22:19+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.207", "podIPs": [{"ip": "10.42.54.207"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:22:18+00:00"}}, "message": "migration complete!", "migration_id": "40f907a1", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.483, "checkpoint_files_delay": 1.353, "checkpoint_files_transfer": 4.553, "file_system_delay": 0.675, "file_system_transfer": 4.122, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.553, "creation": 3.211252, "restoration": 2.440548, "total": 10.288776}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "60dbde84e9843e0c972c052de3edb939a61a78cce2204b177f808d9f6c4b1fba", "cni.projectcalico.org/podIP": "10.42.54.193/32", "cni.projectcalico.org/podIPs": "10.42.54.193/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-9gcbw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-9gcbw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-9gcbw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"60dbde84e9843e0c972c052de3edb939a61a78cce2204b177f808d9f6c4b1fba\",\"cni.projectcalico.org/podIP\":\"10.42.54.193/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.193/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"121afe51\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30607\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30607", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:23:04+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:23:04+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:23:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:23:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.193\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:23:08+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77854234", "uid": "3b1eb869-7937-461b-89da-dfab83a8041c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9gcbw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-9gcbw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-9gcbw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:23:04+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:23:08+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:23:08+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:23:04+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://96ac8545d05ec09130a93507a9afcab6c4f9ee7b06c4d351f3e31b6ac6e6e947", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:23:06+00:00"}}}, {"containerID": "containerd://a5081d7a13c15e51ae0d8af51fa1690be7c1cf8ddfa9874d952d2ab675cd2914", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:23:05+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.193", "podIPs": [{"ip": "10.42.54.193"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:23:04+00:00"}}, "message": "migration complete!", "migration_id": "121afe51", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.423, "checkpoint_files_delay": 1.313, "checkpoint_files_transfer": 4.573, "file_system_delay": 0.671, "file_system_transfer": 4.139, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.573, "creation": 3.230398, "restoration": 2.336756, "total": 10.233645}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "3b178f7ca5879f4395454ed25c21411928258a7456fce3157d45dd496f8943ad", "cni.projectcalico.org/podIP": "10.42.54.238/32", "cni.projectcalico.org/podIPs": "10.42.54.238/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vjh4x\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vjh4x\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vjh4x\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"3b178f7ca5879f4395454ed25c21411928258a7456fce3157d45dd496f8943ad\",\"cni.projectcalico.org/podIP\":\"10.42.54.238/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.238/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"93d502d8\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31054\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31054", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:23:50+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:23:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:23:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:23:54+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.238\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:23:54+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77854644", "uid": "346164fd-8261-465f-b235-1596a6064871"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vjh4x", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vjh4x", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vjh4x", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:23:50+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:23:54+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:23:54+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:23:50+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://4f6ddd9849104ad53327c71e384abbd0be64c54cde55b06d2f94b2574e470551", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:23:52+00:00"}}}, {"containerID": "containerd://63490e4890dab570ea6b19524b104537bde4379d2ddd6a41a1d2ae5ccfb788d3", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:23:51+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.238", "podIPs": [{"ip": "10.42.54.238"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:23:50+00:00"}}, "message": "migration complete!", "migration_id": "93d502d8", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.528, "checkpoint_files_delay": 2.831, "checkpoint_files_transfer": 4.952, "file_system_delay": 2.822, "file_system_transfer": 5.876, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.876, "creation": 3.087321, "restoration": 3.129843, "total": 12.177949}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "8cef65a6dcda2ccd39e60f53dc56de4df58d604ed15b4775496ca814128dee8a", "cni.projectcalico.org/podIP": "10.42.54.252/32", "cni.projectcalico.org/podIPs": "10.42.54.252/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jsjvp\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jsjvp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jsjvp\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"8cef65a6dcda2ccd39e60f53dc56de4df58d604ed15b4775496ca814128dee8a\",\"cni.projectcalico.org/podIP\":\"10.42.54.252/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.252/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e54c720b\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31721\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31721", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:24:40+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:24:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:24:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:24:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.252\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:24:43+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77855002", "uid": "54e918a3-38b0-41e0-aad6-e320c7089327"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jsjvp", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jsjvp", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jsjvp", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:24:40+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:24:43+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:24:43+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:24:40+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://c939f67f5bee263b9be580b813acc3fff5d37460d5a446bc43613f490db66e06", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:24:41+00:00"}}}, {"containerID": "containerd://2bddce0874338096d0c607ba488185759f4e61d524eae4f5dd150a731ed02713", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:24:41+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.252", "podIPs": [{"ip": "10.42.54.252"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:24:40+00:00"}}, "message": "migration complete!", "migration_id": "e54c720b", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.578, "checkpoint_files_delay": 1.695, "checkpoint_files_transfer": 4.699, "file_system_delay": 1.688, "file_system_transfer": 5.082, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.082, "creation": 3.3051, "restoration": 2.507166, "total": 10.986373}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f97765ec690e7039b3898a6492743c5858eafeac08db864dee9ff41f12e1afe3", "cni.projectcalico.org/podIP": "10.42.54.198/32", "cni.projectcalico.org/podIPs": "10.42.54.198/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4fdjs\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4fdjs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4fdjs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f97765ec690e7039b3898a6492743c5858eafeac08db864dee9ff41f12e1afe3\",\"cni.projectcalico.org/podIP\":\"10.42.54.198/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.198/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"09620628\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31916\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31916", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:25:27+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:25:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:25:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:25:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.198\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:25:31+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77855366", "uid": "709e46ac-7c99-4b66-b284-e5126c33eb10"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4fdjs", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4fdjs", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4fdjs", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:25:27+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:25:31+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:25:31+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:25:27+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cbe67d6e61bce71ea1aab1f051e2afb6f07e5bce09d254ec78355f119b9599c2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:25:29+00:00"}}}, {"containerID": "containerd://cbb870ed270e53f94fe5102e978c5d866c239a32c7beb8d9afa887cd3961a07a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:25:28+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.198", "podIPs": [{"ip": "10.42.54.198"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:25:27+00:00"}}, "message": "migration complete!", "migration_id": "09620628", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.505, "checkpoint_files_delay": 1.716, "checkpoint_files_transfer": 4.766, "file_system_delay": 1.708, "file_system_transfer": 5.385, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.385, "creation": 3.105657, "restoration": 2.381085, "total": 10.976582}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "4bd89f48bbd695fe7f686a3e26edafdad8b6b92200b5f50cf6f9829618d63479", "cni.projectcalico.org/podIP": "10.42.54.221/32", "cni.projectcalico.org/podIPs": "10.42.54.221/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4597f\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4597f\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4597f\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"4bd89f48bbd695fe7f686a3e26edafdad8b6b92200b5f50cf6f9829618d63479\",\"cni.projectcalico.org/podIP\":\"10.42.54.221/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.221/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"45064dc6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31819\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31819", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:26:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:26:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:26:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:26:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.221\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:26:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77855721", "uid": "1f5999cf-36c2-4950-b15d-a264e2032432"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4597f", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4597f", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4597f", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:26:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:26:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:26:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:26:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e800076be80f7ec6b73f895dda1e86ca63bc49eb6e6256b0b5c9f37e06b7bc34", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:26:17+00:00"}}}, {"containerID": "containerd://fc799feb092a9a58c81455ff20472b4ce34c07d3c559db12b5870bb7b4d2e397", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:26:16+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.221", "podIPs": [{"ip": "10.42.54.221"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:26:15+00:00"}}, "message": "migration complete!", "migration_id": "45064dc6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.431, "checkpoint_files_delay": 1.709, "checkpoint_files_transfer": 4.853, "file_system_delay": 1.703, "file_system_transfer": 4.942, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.942, "creation": 3.139833, "restoration": 2.318382, "total": 10.536772}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f05f467b414dcb8e8f4e0f34c95d94fbe96be349c3d7f041c15e9cca16920dab", "cni.projectcalico.org/podIP": "10.42.54.228/32", "cni.projectcalico.org/podIPs": "10.42.54.228/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-fwcdx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-fwcdx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-fwcdx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f05f467b414dcb8e8f4e0f34c95d94fbe96be349c3d7f041c15e9cca16920dab\",\"cni.projectcalico.org/podIP\":\"10.42.54.228/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.228/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"5ec6b2a6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30540\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30540", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:27:02+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:27:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:27:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:27:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.228\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:27:06+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77856073", "uid": "e96666f5-3498-4d67-b8a9-ff89efee76d7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fwcdx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fwcdx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-fwcdx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:27:02+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:27:06+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:27:06+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:27:02+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ae1ae3e80cea867fea647d05c428ccbaaa35a6db341977a4e966da1e94b675fc", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:27:04+00:00"}}}, {"containerID": "containerd://96216f3e8598b5b2faf7bc416074381735a0959677bf247737062e1c447b17fc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:27:03+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.228", "podIPs": [{"ip": "10.42.54.228"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:27:02+00:00"}}, "message": "migration complete!", "migration_id": "5ec6b2a6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.464, "checkpoint_files_delay": 1.683, "checkpoint_files_transfer": 4.897, "file_system_delay": 1.676, "file_system_transfer": 5.174, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.174, "creation": 3.319484, "restoration": 2.203695, "total": 10.795566}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "07730cd2db4df70ace32a0bd18861e1823092802618cfb201ad79a53fd6ac2e5", "cni.projectcalico.org/podIP": "10.42.54.222/32", "cni.projectcalico.org/podIPs": "10.42.54.222/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xbzxn\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xbzxn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xbzxn\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"07730cd2db4df70ace32a0bd18861e1823092802618cfb201ad79a53fd6ac2e5\",\"cni.projectcalico.org/podIP\":\"10.42.54.222/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.222/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"386dfdc9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31952\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31952", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:27:50+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:27:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:27:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:27:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.222\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:27:53+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77856423", "uid": "6993d264-d018-46be-89a4-e1a6669c5958"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xbzxn", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xbzxn", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xbzxn", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:27:50+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:27:53+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:27:53+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:27:50+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e70bec456cf0c6683a6f02b22d4608d24e39bba95331e3bb804cdeba996c8582", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:27:51+00:00"}}}, {"containerID": "containerd://5bd6f4af265804ce784395d13391621c071f29dd5f056f70ec2482882120f77c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:27:51+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.222", "podIPs": [{"ip": "10.42.54.222"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:27:50+00:00"}}, "message": "migration complete!", "migration_id": "386dfdc9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.343, "checkpoint_files_delay": 2.826, "checkpoint_files_transfer": 5.039, "file_system_delay": 2.815, "file_system_transfer": 5.945, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.945, "creation": 3.112345, "restoration": 2.282426, "total": 11.425875}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "758c294a7929f2c604c2188221c1c1248cec4ca7a93086e5869e1dd81849c3b5", "cni.projectcalico.org/podIP": "10.42.54.204/32", "cni.projectcalico.org/podIPs": "10.42.54.204/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dlkf8\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dlkf8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dlkf8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"758c294a7929f2c604c2188221c1c1248cec4ca7a93086e5869e1dd81849c3b5\",\"cni.projectcalico.org/podIP\":\"10.42.54.204/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.204/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e25a4cca\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31849\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31849", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:28:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:28:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:28:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:28:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.204\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:28:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77856776", "uid": "119d236c-807b-48f3-8c73-7412437c93b2"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dlkf8", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dlkf8", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dlkf8", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:28:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:28:41+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:28:41+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:28:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3adfcb3a889a6e209c9e2430aaf0820cf9d347d0175963d409d6427f18efa14c", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:28:38+00:00"}}}, {"containerID": "containerd://5831e3c7d8fb8eab8ac2d57e32b46f5dabf22d14cd2bf3cb10fd8bfb3cece560", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:28:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.204", "podIPs": [{"ip": "10.42.54.204"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:28:37+00:00"}}, "message": "migration complete!", "migration_id": "e25a4cca", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.23, "checkpoint_files_delay": 2.822, "checkpoint_files_transfer": 4.975, "file_system_delay": 2.813, "file_system_transfer": 5.96, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.96, "creation": 3.021465, "restoration": 2.207353, "total": 11.271797}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "0cfdad6413e1945055d22930df94de95782f661a0b904e3176ff8046462be55e", "cni.projectcalico.org/podIP": "10.42.54.231/32", "cni.projectcalico.org/podIPs": "10.42.54.231/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-6n9v8\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-6n9v8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-6n9v8\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"0cfdad6413e1945055d22930df94de95782f661a0b904e3176ff8046462be55e\",\"cni.projectcalico.org/podIP\":\"10.42.54.231/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.231/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2a6b2fc6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30286\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30286", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:29:25+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:29:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:29:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:29:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.231\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:29:29+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77857129", "uid": "5db0c2a0-3663-4598-ba79-ba59362eb878"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6n9v8", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6n9v8", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-6n9v8", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:29:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:29:29+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:29:29+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:29:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e14b3cab9534dae954e9beec9ef0d9ed44f3707db192264386893d7ae3e2f90b", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:29:27+00:00"}}}, {"containerID": "containerd://00c84fe71b5a4f648873066126b974f396667d675fa2263d6c549a5019645a93", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:29:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.231", "podIPs": [{"ip": "10.42.54.231"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:29:25+00:00"}}, "message": "migration complete!", "migration_id": "2a6b2fc6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.384, "checkpoint_files_delay": 1.688, "checkpoint_files_transfer": 4.736, "file_system_delay": 1.679, "file_system_transfer": 4.774, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.774, "creation": 3.153988, "restoration": 2.180196, "total": 10.192321}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "854b4514f3209d405e21c79632a2440a8db9a907572cd23b265facee76e59a88", "cni.projectcalico.org/podIP": "10.42.54.227/32", "cni.projectcalico.org/podIPs": "10.42.54.227/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ftd2c\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ftd2c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ftd2c\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"854b4514f3209d405e21c79632a2440a8db9a907572cd23b265facee76e59a88\",\"cni.projectcalico.org/podIP\":\"10.42.54.227/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.227/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"73efd642\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30850\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30850", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:30:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:30:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:30:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:30:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.227\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:30:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77857479", "uid": "21917f3f-9d69-4a4b-95f2-b399a6a29412"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ftd2c", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ftd2c", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ftd2c", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:30:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:30:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:30:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:30:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://579490972a3fb69940e56a0de69a5ca64ceaf471b473717a407b5caf2ac27471", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:30:13+00:00"}}}, {"containerID": "containerd://9d7f758f02aba748e0544fb05b705b2dff6211bc70c5893456476f4837007bc4", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:30:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.227", "podIPs": [{"ip": "10.42.54.227"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:30:11+00:00"}}, "message": "migration complete!", "migration_id": "73efd642", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.386, "checkpoint_files_delay": 1.72, "checkpoint_files_transfer": 4.841, "file_system_delay": 1.711, "file_system_transfer": 4.985, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.985, "creation": 3.039474, "restoration": 2.178365, "total": 10.297275}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5d5a27abe37c55fe848408ef9ba4148b7e83bf918534160b106d707b2c5e8485", "cni.projectcalico.org/podIP": "10.42.54.237/32", "cni.projectcalico.org/podIPs": "10.42.54.237/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rzj2b\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rzj2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rzj2b\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5d5a27abe37c55fe848408ef9ba4148b7e83bf918534160b106d707b2c5e8485\",\"cni.projectcalico.org/podIP\":\"10.42.54.237/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.237/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"616aa0c9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30501\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30501", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:30:58+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:30:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:30:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:31:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.237\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:31:02+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77857832", "uid": "ad67fe35-a6ba-4d20-b7c8-f3661fc8f7f8"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rzj2b", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rzj2b", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rzj2b", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:30:58+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:31:02+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:31:02+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:30:58+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cec6788414935348c4d4cc4b464d3f7357d5f0f72c6e67e94f823af9d32b5a21", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:31:00+00:00"}}}, {"containerID": "containerd://c1fee7f95c13e9221a8afb397118f28b584f5b75d87d82b04fc82fca923be73c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:30:59+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.237", "podIPs": [{"ip": "10.42.54.237"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:30:58+00:00"}}, "message": "migration complete!", "migration_id": "616aa0c9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.417, "checkpoint_files_delay": 1.7, "checkpoint_files_transfer": 4.941, "file_system_delay": 1.694, "file_system_transfer": 5.055, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.055, "creation": 3.066342, "restoration": 2.225105, "total": 10.436907}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "570ab55ccd65588eb059d97100b5639467613c6f42987d021f5123e13f1cdb42", "cni.projectcalico.org/podIP": "10.42.54.245/32", "cni.projectcalico.org/podIPs": "10.42.54.245/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-prhb2\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-prhb2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-prhb2\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"570ab55ccd65588eb059d97100b5639467613c6f42987d021f5123e13f1cdb42\",\"cni.projectcalico.org/podIP\":\"10.42.54.245/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.245/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"355de12d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32727\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32727", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:31:46+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:31:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:31:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:31:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.245\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:31:50+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77858193", "uid": "273faa49-4816-49f8-be42-48981f0a3959"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-prhb2", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-prhb2", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-prhb2", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:31:46+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:31:49+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:31:49+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:31:46+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://cfba3f037b9c8c2286e29f4fc5d6deb946087a793b61f0ad7fba8fe6f7d5b407", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:31:47+00:00"}}}, {"containerID": "containerd://8a7cac02fa7309cc40522de866c36f84005f0c7c5ca9cd94e7a2e0426efbc7a5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:31:47+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.245", "podIPs": [{"ip": "10.42.54.245"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:31:46+00:00"}}, "message": "migration complete!", "migration_id": "355de12d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.485, "checkpoint_files_delay": 1.705, "checkpoint_files_transfer": 4.857, "file_system_delay": 1.699, "file_system_transfer": 5.135, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.135, "creation": 3.11107, "restoration": 2.222228, "total": 10.564256}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "1acd6933b55cd712d732effd50f5c95a111f92b553efb89c5b9356bd05946ae0", "cni.projectcalico.org/podIP": "10.42.54.219/32", "cni.projectcalico.org/podIPs": "10.42.54.219/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-t4hcw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-t4hcw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-t4hcw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"1acd6933b55cd712d732effd50f5c95a111f92b553efb89c5b9356bd05946ae0\",\"cni.projectcalico.org/podIP\":\"10.42.54.219/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.219/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b6e2fa2a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30260\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30260", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:32:33+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:32:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:32:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:32:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.219\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:32:37+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77858538", "uid": "95433bec-aff4-42cc-aa9c-e567951c599b"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-t4hcw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-t4hcw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-t4hcw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:32:33+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:32:37+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:32:37+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:32:33+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://67d7e15a5c2b93d571bff5a2034e4a2901fa6d603991d7522402911ed98ab7e8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:32:35+00:00"}}}, {"containerID": "containerd://cffaecfa5ad590fed9f406c5672f335711b3a04cc3d034d4ad7ea14b5451834b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:32:34+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.219", "podIPs": [{"ip": "10.42.54.219"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:32:33+00:00"}}, "message": "migration complete!", "migration_id": "b6e2fa2a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.35, "checkpoint_files_delay": 1.292, "checkpoint_files_transfer": 4.56, "file_system_delay": 0.779, "file_system_transfer": 4.486, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.56, "creation": 3.321875, "restoration": 2.222423, "total": 10.191341}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a5c46a113c5e8eb6a6cbf5c5a85a3b2a33312d98af3de8f585c1a1788f49a840", "cni.projectcalico.org/podIP": "10.42.54.251/32", "cni.projectcalico.org/podIPs": "10.42.54.251/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rk26z\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rk26z\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rk26z\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a5c46a113c5e8eb6a6cbf5c5a85a3b2a33312d98af3de8f585c1a1788f49a840\",\"cni.projectcalico.org/podIP\":\"10.42.54.251/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.251/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"4ff83d20\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30670\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30670", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:33:20+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:33:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:33:21+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:33:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.251\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:33:24+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77858887", "uid": "3f7b61e6-00d8-40d0-84d5-f70160000509"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rk26z", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rk26z", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rk26z", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:33:20+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:33:24+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:33:24+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:33:20+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://10cfda614710d22cb5a3ad9fcc916790e2e00f8ce6c7f0551b52a69255fd5acf", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:33:22+00:00"}}}, {"containerID": "containerd://620c2873beadd10e7a59f0e35da7e373fbc69c1b23dfdeec9c83015d5177ee29", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:33:21+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.251", "podIPs": [{"ip": "10.42.54.251"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:33:20+00:00"}}, "message": "migration complete!", "migration_id": "4ff83d20", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.346, "checkpoint_files_delay": 1.705, "checkpoint_files_transfer": 4.655, "file_system_delay": 1.698, "file_system_transfer": 5.17, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.17, "creation": 3.072248, "restoration": 2.273027, "total": 10.612644}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "43410663c09363f5cfd51600203ecb849f0fadc71bc598c5a0947b79ee14ed94", "cni.projectcalico.org/podIP": "10.42.54.205/32", "cni.projectcalico.org/podIPs": "10.42.54.205/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7srlz\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7srlz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7srlz\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"43410663c09363f5cfd51600203ecb849f0fadc71bc598c5a0947b79ee14ed94\",\"cni.projectcalico.org/podIP\":\"10.42.54.205/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.205/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"7e963ebf\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30457\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30457", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:34:07+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:34:07+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:34:08+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:34:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.205\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:34:11+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77859239", "uid": "f662e867-4eb9-44fa-97aa-5f4bf3548cd2"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7srlz", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7srlz", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7srlz", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:34:07+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:34:11+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:34:11+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:34:07+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://96a6843d4fee1f0337697750761f6e2885d369c6b0e9590f1d5b5f332d19d4c3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:34:09+00:00"}}}, {"containerID": "containerd://4b31a2d40e987ea8ea2391ac8cebd32d8dcd964c3f27cf0a6d8bc74e0bb3f407", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:34:08+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.205", "podIPs": [{"ip": "10.42.54.205"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:34:07+00:00"}}, "message": "migration complete!", "migration_id": "7e963ebf", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.495, "checkpoint_files_delay": 1.295, "checkpoint_files_transfer": 4.328, "file_system_delay": 0.569, "file_system_transfer": 4.065, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.328, "creation": 3.450908, "restoration": 2.210148, "total": 10.080877}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "c23f58f70f4f5adfe4c5177710266e0294c7a68e919056cf8c4faa3e443896c7", "cni.projectcalico.org/podIP": "10.42.54.214/32", "cni.projectcalico.org/podIPs": "10.42.54.214/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-4bcqg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-4bcqg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-4bcqg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"c23f58f70f4f5adfe4c5177710266e0294c7a68e919056cf8c4faa3e443896c7\",\"cni.projectcalico.org/podIP\":\"10.42.54.214/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.214/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e83ad612\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31179\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31179", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:34:55+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:34:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:34:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.214\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:34:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:34:59+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77859602", "uid": "caa727f5-05a2-4284-8445-4633a22bb73f"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4bcqg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-4bcqg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-4bcqg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:34:55+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:34:58+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:34:58+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:34:55+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6f52083b1fc646629059cc5c36c930e6e424cee0e4784465da1721bbe582acca", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:34:56+00:00"}}}, {"containerID": "containerd://404910b482dc53047cdefd4caaff4c83fece1ee8fe0fbf5beb35219dacb65419", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:34:56+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.214", "podIPs": [{"ip": "10.42.54.214"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:34:55+00:00"}}, "message": "migration complete!", "migration_id": "e83ad612", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.403, "checkpoint_files_delay": 2.82, "checkpoint_files_transfer": 4.994, "file_system_delay": 2.812, "file_system_transfer": 6.064, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.064, "creation": 3.078458, "restoration": 2.295045, "total": 11.530198}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "060d56bac5bff5ba83aa43e01819d10e889d3f1937ec33ad902a2ea06003b1d7", "cni.projectcalico.org/podIP": "10.42.54.243/32", "cni.projectcalico.org/podIPs": "10.42.54.243/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-46hbg\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-46hbg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-46hbg\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"060d56bac5bff5ba83aa43e01819d10e889d3f1937ec33ad902a2ea06003b1d7\",\"cni.projectcalico.org/podIP\":\"10.42.54.243/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.243/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"59f8bb62\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32212\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32212", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:35:43+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:35:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:35:43+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:35:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.243\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:35:47+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77859959", "uid": "ebc88162-e70c-43ed-ac65-c3652877e126"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-46hbg", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-46hbg", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-46hbg", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:35:43+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:35:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:35:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:35:43+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://05e745212fc2f6dc5e419f18dcfad4c7961b5c66d8f74c3b083b2b68d1d13c8d", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:35:44+00:00"}}}, {"containerID": "containerd://86f930da83767e5ad04f099e465f7a6b26c33e91a040dfc6ddc844b85044a66a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:35:44+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.243", "podIPs": [{"ip": "10.42.54.243"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:35:43+00:00"}}, "message": "migration complete!", "migration_id": "59f8bb62", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.351, "checkpoint_files_delay": 1.698, "checkpoint_files_transfer": 4.731, "file_system_delay": 1.691, "file_system_transfer": 5.132, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.132, "creation": 3.098771, "restoration": 2.237915, "total": 10.552026}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ddfbe422cd8580f159bfb64cf82a0256a8f584c5a6b7080a1e116dd7916580f6", "cni.projectcalico.org/podIP": "10.42.54.203/32", "cni.projectcalico.org/podIPs": "10.42.54.203/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-hmhnw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-hmhnw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-hmhnw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ddfbe422cd8580f159bfb64cf82a0256a8f584c5a6b7080a1e116dd7916580f6\",\"cni.projectcalico.org/podIP\":\"10.42.54.203/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.203/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1fa8417f\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32171\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32171", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:36:30+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:36:30+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:36:31+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:36:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.203\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:36:34+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77860314", "uid": "62b77cac-c3c8-4247-a637-1d6c0459123a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hmhnw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-hmhnw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-hmhnw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:36:30+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:36:34+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:36:34+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:36:30+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://95fa537b2731d2f97f25880a431d09d399c5971518b8a93a0e0cbd8dbad897a4", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:36:32+00:00"}}}, {"containerID": "containerd://2b7da4a9e59243683c8b2b20d382f651064a19af46147d809bc7734e6910659f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:36:31+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.203", "podIPs": [{"ip": "10.42.54.203"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:36:30+00:00"}}, "message": "migration complete!", "migration_id": "1fa8417f", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.453, "checkpoint_files_delay": 1.715, "checkpoint_files_transfer": 4.782, "file_system_delay": 1.704, "file_system_transfer": 5.066, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.066, "creation": 3.049685, "restoration": 2.223962, "total": 10.431331}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "8fd214896bc57b758d2792ae6d81edcd3e2c1cde3610ddbd6105a20cf505afa3", "cni.projectcalico.org/podIP": "10.42.54.226/32", "cni.projectcalico.org/podIPs": "10.42.54.226/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-lvszr\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-lvszr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-lvszr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"8fd214896bc57b758d2792ae6d81edcd3e2c1cde3610ddbd6105a20cf505afa3\",\"cni.projectcalico.org/podIP\":\"10.42.54.226/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.226/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b6f3fb78\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32220\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32220", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:37:16+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:37:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:37:17+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:37:20+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.226\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:37:20+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77860656", "uid": "122711f4-342d-45bf-9ee2-34b4a2447888"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lvszr", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-lvszr", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-lvszr", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:37:16+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:37:20+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:37:20+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:37:16+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6e4ee17e328694ae7a2b1cfb7240c3866b1eb8bd0f372990c0ba33a967932fa6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:37:18+00:00"}}}, {"containerID": "containerd://5f47bcdc73992ac4ca9b73c83ede0785460b3472d10298b9d358ff154755369e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:37:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.226", "podIPs": [{"ip": "10.42.54.226"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:37:16+00:00"}}, "message": "migration complete!", "migration_id": "b6f3fb78", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.38, "checkpoint_files_delay": 1.693, "checkpoint_files_transfer": 4.8, "file_system_delay": 1.684, "file_system_transfer": 5.094, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.094, "creation": 3.095547, "restoration": 2.183021, "total": 10.517908}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "2f09de514850d504afeec252477b91b1324ccdc7ad693d16c37477e4ad86f367", "cni.projectcalico.org/podIP": "10.42.54.229/32", "cni.projectcalico.org/podIPs": "10.42.54.229/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7vc6r\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7vc6r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7vc6r\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"2f09de514850d504afeec252477b91b1324ccdc7ad693d16c37477e4ad86f367\",\"cni.projectcalico.org/podIP\":\"10.42.54.229/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.229/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"98cff8e3\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30244\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30244", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:38:02+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:38:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:38:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:38:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.229\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:38:06+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77861005", "uid": "7e4b7933-946c-44d2-b13c-1a6dfcd32a03"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7vc6r", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7vc6r", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7vc6r", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:38:02+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:38:06+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:38:06+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:38:02+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://318589a6ead28490e0a23f0bea99f81f6197fe6f7fec1ddac9d4e6a651a0fb72", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:38:04+00:00"}}}, {"containerID": "containerd://2f710ff9527feebc837b78b281be2335c3f5b274ef59bc9ad32dbade51d136b2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:38:03+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.229", "podIPs": [{"ip": "10.42.54.229"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:38:02+00:00"}}, "message": "migration complete!", "migration_id": "98cff8e3", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.389, "checkpoint_files_delay": 2.829, "checkpoint_files_transfer": 4.966, "file_system_delay": 2.821, "file_system_transfer": 6.015, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.015, "creation": 3.150112, "restoration": 2.26882, "total": 11.527901}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e21cc9e89b2d0c0b45007369fd1199964bb703ec0e51d6dec1eeb4b3e2bd7f48", "cni.projectcalico.org/podIP": "10.42.54.234/32", "cni.projectcalico.org/podIPs": "10.42.54.234/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-rlqdw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-rlqdw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-rlqdw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e21cc9e89b2d0c0b45007369fd1199964bb703ec0e51d6dec1eeb4b3e2bd7f48\",\"cni.projectcalico.org/podIP\":\"10.42.54.234/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.234/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"4\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"cd853378\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32437\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"4\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32437", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:38:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:38:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:38:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:38:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.234\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:38:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77861356", "uid": "84262080-1f47-4ebd-a486-5356fd6f22d8"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rlqdw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-rlqdw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-rlqdw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:38:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:38:54+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:38:54+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:38:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://f4e00f116043131b6a73ea9ee30bd958d754d8fc39cd7649adebd1ddfc7615a7", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:38:53+00:00"}}}, {"containerID": "containerd://4dc8542266a13e78f2380dd48d214f7df0a4d706bca8f933939a247e78266ad7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:38:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.234", "podIPs": [{"ip": "10.42.54.234"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:38:51+00:00"}}, "message": "migration complete!", "migration_id": "cd853378", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.371, "checkpoint_files_delay": 1.342, "checkpoint_files_transfer": 4.541, "file_system_delay": 0.68, "file_system_transfer": 4.106, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.541, "creation": 3.34096, "restoration": 2.16803, "total": 10.138576}}], "16": [{"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "a9c03c6f39b8f89fbe9501237a9c9662c4e07402659dc3009a60f3ba37c4f8be", "cni.projectcalico.org/podIP": "10.42.54.240/32", "cni.projectcalico.org/podIPs": "10.42.54.240/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-h5k8d\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-h5k8d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-h5k8d\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"a9c03c6f39b8f89fbe9501237a9c9662c4e07402659dc3009a60f3ba37c4f8be\",\"cni.projectcalico.org/podIP\":\"10.42.54.240/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.240/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"c35df1e9\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32482\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32482", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:39:38+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:39:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:39:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:39:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.240\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:39:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77861707", "uid": "05da636d-7295-47a2-9934-44fe68e03e99"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-h5k8d", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-h5k8d", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-h5k8d", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:39:38+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:39:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:39:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:39:38+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://0e0e4d4504b7e303fc6bdff14912b8ad271793ef939d0ae57f5c388aed24caaa", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:39:40+00:00"}}}, {"containerID": "containerd://9b3fa8ee1cbc577248ba46159003ab967406b1dfa7202d2104fe7d3505546bb2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:39:39+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.240", "podIPs": [{"ip": "10.42.54.240"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:39:38+00:00"}}, "message": "migration complete!", "migration_id": "c35df1e9", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.234, "checkpoint_files_delay": 1.724, "checkpoint_files_transfer": 4.878, "file_system_delay": 1.716, "file_system_transfer": 5.087, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.087, "creation": 3.136911, "restoration": 2.204154, "total": 10.53019}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9bbff818ade8e27782aeeed5f66b0f2431503c3db6e6c0cd893da268523b3e5f", "cni.projectcalico.org/podIP": "10.42.54.206/32", "cni.projectcalico.org/podIPs": "10.42.54.206/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-r4764\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-r4764\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-r4764\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9bbff818ade8e27782aeeed5f66b0f2431503c3db6e6c0cd893da268523b3e5f\",\"cni.projectcalico.org/podIP\":\"10.42.54.206/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.206/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2e9131db\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32715\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32715", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:40:25+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:40:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:40:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:40:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.206\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:40:29+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77862061", "uid": "2d6309a2-ea2d-4167-95c4-b943c25e836d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-r4764", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-r4764", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-r4764", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:40:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:40:29+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:40:29+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:40:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a9277f4984dfc4321cddcf2425804bcd98891ea830b420c9bc476c9167383ba3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:40:27+00:00"}}}, {"containerID": "containerd://364dbee79618d390c29096be3ac2b1cc2ef93c804734639740a3414264cc30dc", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:40:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.206", "podIPs": [{"ip": "10.42.54.206"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:40:25+00:00"}}, "message": "migration complete!", "migration_id": "2e9131db", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.421, "checkpoint_files_delay": 1.237, "checkpoint_files_transfer": 4.273, "file_system_delay": 0.771, "file_system_transfer": 4.304, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.304, "creation": 3.164636, "restoration": 2.260642, "total": 9.815116}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "56c2d1d8febbef55fda469e474025ead7aa7b0c9d4efd489417e1cdb7b475890", "cni.projectcalico.org/podIP": "10.42.54.246/32", "cni.projectcalico.org/podIPs": "10.42.54.246/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wzvd5\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wzvd5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wzvd5\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"56c2d1d8febbef55fda469e474025ead7aa7b0c9d4efd489417e1cdb7b475890\",\"cni.projectcalico.org/podIP\":\"10.42.54.246/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.246/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"1f764b29\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30290\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30290", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:41:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:41:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:41:13+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:41:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.246\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:41:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77862420", "uid": "0a3ebe07-1452-4f1f-b673-2cf323a71966"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wzvd5", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wzvd5", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wzvd5", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:41:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:41:16+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:41:16+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:41:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://c54782aa0b89e4a828bf89caa3d5f2f33352ed549be06ed0b64e81b6666640e1", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:41:14+00:00"}}}, {"containerID": "containerd://c894ba1e3687317575d9e85ff4d074978de376007beefc4203b81c2abea5653a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:41:14+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.246", "podIPs": [{"ip": "10.42.54.246"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:41:12+00:00"}}, "message": "migration complete!", "migration_id": "1f764b29", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.372, "checkpoint_files_delay": 1.689, "checkpoint_files_transfer": 4.814, "file_system_delay": 1.683, "file_system_transfer": 4.875, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.875, "creation": 3.038959, "restoration": 2.191519, "total": 10.206903}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ed226eae53dd4db23c0a0f533988ae2df1bf9103e1de3f76fa0353277aafacc0", "cni.projectcalico.org/podIP": "10.42.54.235/32", "cni.projectcalico.org/podIPs": "10.42.54.235/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-grdbb\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-grdbb\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-grdbb\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ed226eae53dd4db23c0a0f533988ae2df1bf9103e1de3f76fa0353277aafacc0\",\"cni.projectcalico.org/podIP\":\"10.42.54.235/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.235/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"e4fb5f39\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31510\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31510", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:56:37+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:56:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:56:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:56:41+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.235\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:56:41+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77868107", "uid": "3da08f64-4eb0-49ba-bd1a-ad309c47e91e"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-grdbb", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-grdbb", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-grdbb", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:56:37+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:56:41+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:56:41+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:56:37+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://36ceae6139d66c808245860f7351f1282aa697f3c7a27469ae9753ae2a5e11e6", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:56:39+00:00"}}}, {"containerID": "containerd://9fc97c6603865fbf42f556a0d6c1731ecb33607df151bd013bbc625cb3254382", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:56:38+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.235", "podIPs": [{"ip": "10.42.54.235"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:56:37+00:00"}}, "message": "migration complete!", "migration_id": "e4fb5f39", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.26, "checkpoint_files_delay": 1.714, "checkpoint_files_transfer": 4.711, "file_system_delay": 1.707, "file_system_transfer": 5.102, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.102, "creation": 3.11254, "restoration": 2.416942, "total": 10.723232}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "9e24e9c4562e6c5c47f332cc00b6662db10a09103e96251d130c39e88131c700", "cni.projectcalico.org/podIP": "10.42.54.218/32", "cni.projectcalico.org/podIPs": "10.42.54.218/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-j5gpv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-j5gpv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-j5gpv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"9e24e9c4562e6c5c47f332cc00b6662db10a09103e96251d130c39e88131c700\",\"cni.projectcalico.org/podIP\":\"10.42.54.218/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.218/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"40a0d130\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30857\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30857", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:57:25+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:57:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:57:25+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.218\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:57:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:57:29+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77868459", "uid": "03dd2210-dffa-4d29-935f-3d89b2ee094d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j5gpv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-j5gpv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-j5gpv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:57:25+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:57:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:57:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:57:25+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b10aa24210b1fdc0c3961481d3817d892bbb61824bfd204ab71f8eecf55b0567", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:57:27+00:00"}}}, {"containerID": "containerd://d2adf28075147401e679c2c0769bdba7b5abc3c92513f0537d3fb442aaa981bd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:57:26+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.218", "podIPs": [{"ip": "10.42.54.218"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:57:25+00:00"}}, "message": "migration complete!", "migration_id": "40a0d130", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.375, "checkpoint_files_delay": 1.315, "checkpoint_files_transfer": 4.348, "file_system_delay": 0.667, "file_system_transfer": 4.074, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.348, "creation": 3.416192, "restoration": 2.23058, "total": 10.086096}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d693fc3762881e7e68821663a440ab0f30be0d6fc42e34010cb8bcbe1f99555b", "cni.projectcalico.org/podIP": "10.42.54.196/32", "cni.projectcalico.org/podIPs": "10.42.54.196/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-k4rhw\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-k4rhw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-k4rhw\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d693fc3762881e7e68821663a440ab0f30be0d6fc42e34010cb8bcbe1f99555b\",\"cni.projectcalico.org/podIP\":\"10.42.54.196/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.196/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8f563d86\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31591\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31591", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:58:12+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:58:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:58:12+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:58:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.196\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:58:16+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77868820", "uid": "44235f28-0e44-4f51-9914-5f847b57bf65"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-k4rhw", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-k4rhw", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-k4rhw", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:58:12+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:58:16+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:58:16+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:58:12+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5d0fa6d08a5d9406ce521292b29694069479fc5269100ce01b0293a228159c7e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:58:13+00:00"}}}, {"containerID": "containerd://d8beb3bfbfc1ecf602a81ebbbd747cb73cd6a976493d59ef0d5db6afcfe4947e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:58:13+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.196", "podIPs": [{"ip": "10.42.54.196"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:58:12+00:00"}}, "message": "migration complete!", "migration_id": "8f563d86", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.536, "checkpoint_files_delay": 1.713, "checkpoint_files_transfer": 4.686, "file_system_delay": 1.705, "file_system_transfer": 4.876, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.876, "creation": 3.026822, "restoration": 2.231575, "total": 10.224529}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "b4cc63c75335ba0a4c21d0135fc672a91ddc7caeb9e1f33503941afcf54a14d8", "cni.projectcalico.org/podIP": "10.42.54.244/32", "cni.projectcalico.org/podIPs": "10.42.54.244/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-69ftx\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-69ftx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-69ftx\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"b4cc63c75335ba0a4c21d0135fc672a91ddc7caeb9e1f33503941afcf54a14d8\",\"cni.projectcalico.org/podIP\":\"10.42.54.244/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.244/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8aa38bff\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31498\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31498", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:58:59+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:58:59+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:59:00+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:59:03+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.244\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:59:03+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77869185", "uid": "7b8911cb-4073-4345-bf83-dc368a9b9e91"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-69ftx", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-69ftx", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-69ftx", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:58:59+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:59:03+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:59:03+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:58:59+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ff3f80ee92e733b02fa7d537743c82459535ddd489d79aeee58e9aee0eb2c826", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:59:01+00:00"}}}, {"containerID": "containerd://e26cbffc706e1b75cd7e4ebeaf566b799926597c39a315997bdf590962cc17cd", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:59:00+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.244", "podIPs": [{"ip": "10.42.54.244"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:58:59+00:00"}}, "message": "migration complete!", "migration_id": "8aa38bff", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.415, "checkpoint_files_delay": 2.807, "checkpoint_files_transfer": 5.096, "file_system_delay": 2.798, "file_system_transfer": 6.058, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.058, "creation": 3.084697, "restoration": 2.224559, "total": 11.454324}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "914be807d1c321790f536b188bcf1760e10f765cc29b475d393752b1e7ed27e9", "cni.projectcalico.org/podIP": "10.42.54.242/32", "cni.projectcalico.org/podIPs": "10.42.54.242/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-tx5zr\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-tx5zr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-tx5zr\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"914be807d1c321790f536b188bcf1760e10f765cc29b475d393752b1e7ed27e9\",\"cni.projectcalico.org/podIP\":\"10.42.54.242/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.242/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"6a18b361\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31434\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31434", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T21:59:47+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T21:59:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:59:48+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T21:59:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.242\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T21:59:51+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77869532", "uid": "979140e4-2813-453f-8d76-57e7d33d95fc"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tx5zr", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-tx5zr", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-tx5zr", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T21:59:47+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T21:59:51+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T21:59:51+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T21:59:47+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a2606b91bd4fa2fdb069d6e19938abd3f385254b11165017709319fad39810c2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:59:49+00:00"}}}, {"containerID": "containerd://d8b4be6c319aaf25c1915f36e92b4297c3e31e51a8a49eaf7a96c6fb75e31e7c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T21:59:48+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.242", "podIPs": [{"ip": "10.42.54.242"}], "qosClass": "BestEffort", "startTime": "2023-02-22T21:59:47+00:00"}}, "message": "migration complete!", "migration_id": "6a18b361", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.355, "checkpoint_files_delay": 1.708, "checkpoint_files_transfer": 4.678, "file_system_delay": 1.702, "file_system_transfer": 5.208, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.208, "creation": 3.095326, "restoration": 2.263921, "total": 10.662207}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "203994f75f1894968b3edc6768c057a6106b3068f092c3882bf7b594c6d75b2c", "cni.projectcalico.org/podIP": "10.42.54.194/32", "cni.projectcalico.org/podIPs": "10.42.54.194/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-5kkx4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-5kkx4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-5kkx4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"203994f75f1894968b3edc6768c057a6106b3068f092c3882bf7b594c6d75b2c\",\"cni.projectcalico.org/podIP\":\"10.42.54.194/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.194/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"6e1b37f6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32456\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32456", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:00:34+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:00:34+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:00:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:00:38+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.194\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:00:38+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77869893", "uid": "605129fd-95d9-456a-9289-8b3549964fcf"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5kkx4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-5kkx4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-5kkx4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:00:34+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:00:38+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:00:38+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:00:34+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://a3ef149656233ab6c4cb7b53c368bdcc93622ebca7459fe9cb0263f8715f77f3", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:00:36+00:00"}}}, {"containerID": "containerd://ca72d8f24b558a211817528b6767154d6f7f045fa5862105f4f7199ac0d60394", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:00:35+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.194", "podIPs": [{"ip": "10.42.54.194"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:00:34+00:00"}}, "message": "migration complete!", "migration_id": "6e1b37f6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.325, "checkpoint_files_delay": 2.815, "checkpoint_files_transfer": 5.086, "file_system_delay": 2.805, "file_system_transfer": 6.003, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 6.003, "creation": 3.047186, "restoration": 2.200186, "total": 11.340199}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "07e6de48c137ebc1d72e4dafbf81a71a0551e79135256f7ec6fbc12f5a685cea", "cni.projectcalico.org/podIP": "10.42.54.232/32", "cni.projectcalico.org/podIPs": "10.42.54.232/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-fnkzh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-fnkzh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-fnkzh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"07e6de48c137ebc1d72e4dafbf81a71a0551e79135256f7ec6fbc12f5a685cea\",\"cni.projectcalico.org/podIP\":\"10.42.54.232/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.232/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"345e705d\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30920\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30920", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:01:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:01:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:01:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:01:27+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.232\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:01:27+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77870252", "uid": "a9882cb0-618c-4041-ae9f-489692b2c21c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fnkzh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-fnkzh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-fnkzh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:01:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:01:27+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:01:27+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:01:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d8b8350e8440074cef668e144ab75334791443103475a6fb4a90a0b50e42cfca", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:01:24+00:00"}}}, {"containerID": "containerd://76c89a518eda112e4c4ce841dfd65515615414e78c9371fec35d2253494784ca", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:01:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.232", "podIPs": [{"ip": "10.42.54.232"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:01:23+00:00"}}, "message": "migration complete!", "migration_id": "345e705d", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.434, "checkpoint_files_delay": 2.829, "checkpoint_files_transfer": 5.098, "file_system_delay": 2.818, "file_system_transfer": 5.967, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.967, "creation": 3.143151, "restoration": 2.162525, "total": 11.362645}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "88dd3ef88c1f5c22a407972a136ae24b7103dc7f7f88b66601ee0e44027fbbc8", "cni.projectcalico.org/podIP": "10.42.54.200/32", "cni.projectcalico.org/podIPs": "10.42.54.200/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-6lfc4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-6lfc4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-6lfc4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"88dd3ef88c1f5c22a407972a136ae24b7103dc7f7f88b66601ee0e44027fbbc8\",\"cni.projectcalico.org/podIP\":\"10.42.54.200/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.200/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"dbfd7656\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32355\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32355", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:02:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:02:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:02:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:02:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.200\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:02:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77870609", "uid": "96733e33-a8a5-436f-aff6-1c4c8692df45"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6lfc4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-6lfc4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-6lfc4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:02:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:02:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:02:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:02:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://d670cc2da2cbc00458735e072c6df2916cec2a2957ee99852a18141ba891d681", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:02:13+00:00"}}}, {"containerID": "containerd://465e4427038a9f988416d534bfdb6c50e03e08d7b3c9477e164fba4cb6d892e6", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:02:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.200", "podIPs": [{"ip": "10.42.54.200"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:02:11+00:00"}}, "message": "migration complete!", "migration_id": "dbfd7656", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.402, "checkpoint_files_delay": 1.704, "checkpoint_files_transfer": 4.699, "file_system_delay": 1.696, "file_system_transfer": 5.108, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.108, "creation": 3.39703, "restoration": 2.221743, "total": 10.819126}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "6a2282e23649e6a4f34f7f8ced70a816d92f5501be804a2b35b980e7a2349df3", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-th2p6\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-th2p6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-th2p6\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"6a2282e23649e6a4f34f7f8ced70a816d92f5501be804a2b35b980e7a2349df3\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"3eaf16eb\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31448\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31448", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:29:15+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:29:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:29:16+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:29:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:29:19+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77880394", "uid": "85cce336-781f-4b81-a243-9d3d59210822"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-th2p6", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-th2p6", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-th2p6", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:29:15+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:29:19+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:29:19+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:29:15+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3c3602f83351fb2732b35c5fd8389c77149e788f46e0312be5fb58d9f4208858", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:29:17+00:00"}}}, {"containerID": "containerd://1d007ea98448f8143e90d2f08ee23b3ec65eb5746f8a0ce34b41d19b7802212f", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:29:17+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:29:15+00:00"}}, "message": "migration complete!", "migration_id": "3eaf16eb", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.519, "checkpoint_files_delay": 1.37, "checkpoint_files_transfer": 4.744, "file_system_delay": 0.563, "file_system_transfer": 4.245, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.744, "creation": 3.104315, "restoration": 2.370825, "total": 10.311648}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "f921c54c4268b8da2507edd157f5779dd150789bf5f3fe4a9bc8584c1a35d516", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-jpjbm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-jpjbm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-jpjbm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"f921c54c4268b8da2507edd157f5779dd150789bf5f3fe4a9bc8584c1a35d516\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"2b56f6e7\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31778\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31778", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:30:02+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:30:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:30:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:30:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:30:05+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77880740", "uid": "f75ce20a-c3f0-4174-bc0d-f241905a762d"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jpjbm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-jpjbm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-jpjbm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:30:02+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:30:05+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:30:05+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:30:02+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://478950c998a7daf0df7e38a5d84ec91c846403bc9e0d4d0d85e68829370360f8", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:30:03+00:00"}}}, {"containerID": "containerd://679aca99744b3b4d0185a9c3dd882654f58286d2612ee3c6633aa87a1afea6fe", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:30:03+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:30:02+00:00"}}, "message": "migration complete!", "migration_id": "2b56f6e7", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.445, "checkpoint_files_delay": 1.708, "checkpoint_files_transfer": 4.89, "file_system_delay": 1.696, "file_system_transfer": 5.189, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.189, "creation": 3.128894, "restoration": 2.330666, "total": 10.742152}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "5359df4d4747548a25f1d44ae63bfb0f7a4e365061ed56a11c8b6e0a54bf2e7e", "cni.projectcalico.org/podIP": "10.42.54.216/32", "cni.projectcalico.org/podIPs": "10.42.54.216/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-vlzfs\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-vlzfs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-vlzfs\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"5359df4d4747548a25f1d44ae63bfb0f7a4e365061ed56a11c8b6e0a54bf2e7e\",\"cni.projectcalico.org/podIP\":\"10.42.54.216/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.216/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d816d588\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31594\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31594", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:30:50+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:30:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:30:50+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:30:53+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.216\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:30:53+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77881089", "uid": "104fabcc-3950-4f24-b995-2d963fc18b77"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vlzfs", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-vlzfs", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-vlzfs", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:30:50+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:30:53+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:30:53+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:30:50+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://b89939ba805a32c983b634b0c8e59d0eafc7e6ea4e9bde4e404a491bff3109cf", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:30:52+00:00"}}}, {"containerID": "containerd://115ec1b87e3c4c9a68895eeea64ed99b7d25ec4311228019f3208ddb54650568", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:30:51+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.216", "podIPs": [{"ip": "10.42.54.216"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:30:50+00:00"}}, "message": "migration complete!", "migration_id": "d816d588", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.486, "checkpoint_files_delay": 1.367, "checkpoint_files_transfer": 4.526, "file_system_delay": 0.478, "file_system_transfer": 4.009, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.526, "creation": 3.170294, "restoration": 2.153554, "total": 9.945507}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d0159f672cea9c3105e2cdaa96a5f4b99c20b372dd741f7fab5f6388078fb7f3", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8cxdl\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8cxdl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8cxdl\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d0159f672cea9c3105e2cdaa96a5f4b99c20b372dd741f7fab5f6388078fb7f3\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"02d25e15\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30846\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30846", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:31:36+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:31:36+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:31:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:31:40+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:31:40+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77881443", "uid": "3d752850-1422-412c-bdca-cf5b63a8c380"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8cxdl", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8cxdl", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8cxdl", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:31:36+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:31:40+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:31:40+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:31:36+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://30294ec9fc67bd24e191fb543d583191f44e15401359d191f8d274abcd92cbc1", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:31:38+00:00"}}}, {"containerID": "containerd://a2fd5b098c541544094fc3ee19065a6c6ededfea97db38a4b019a8bb09781fe1", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:31:37+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:31:36+00:00"}}, "message": "migration complete!", "migration_id": "02d25e15", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.338, "checkpoint_files_delay": 1.693, "checkpoint_files_transfer": 4.712, "file_system_delay": 1.687, "file_system_transfer": 4.952, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.952, "creation": 3.109963, "restoration": 2.288157, "total": 10.447474}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "154aac9bf0d69c227aa3b76afaacf1703c60795632d4e115646c4f91e3f0dd2e", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wjjqq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wjjqq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wjjqq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"154aac9bf0d69c227aa3b76afaacf1703c60795632d4e115646c4f91e3f0dd2e\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"41efe30a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30369\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30369", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:32:23+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:32:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:32:24+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:32:28+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:32:28+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77881788", "uid": "ec6d201e-e673-4983-a81d-6b6bb420243c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wjjqq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wjjqq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wjjqq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:32:23+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:32:28+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:32:28+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:32:23+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6305b7d5ab70fd4e7f2c7956a360b39a7d89300482b59589ad93863528bb7708", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:32:25+00:00"}}}, {"containerID": "containerd://968a16ef77ae1dfebb9aa3812ed7ebe94a61ed8ec23e6e29915c66514f8b6d29", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:32:24+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:32:23+00:00"}}, "message": "migration complete!", "migration_id": "41efe30a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.274, "checkpoint_files_delay": 1.692, "checkpoint_files_transfer": 4.922, "file_system_delay": 1.681, "file_system_transfer": 5.035, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.035, "creation": 3.134519, "restoration": 2.241217, "total": 10.499909}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "13a35bf308a4087586153c74898fcc4982b4440eb3d61de287d2d7845b6bea60", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-mx4d7\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-mx4d7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-mx4d7\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"13a35bf308a4087586153c74898fcc4982b4440eb3d61de287d2d7845b6bea60\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"d50f4e09\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32727\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32727", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:33:11+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:33:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:33:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:33:15+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:33:15+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77882145", "uid": "421a60a6-d86a-4244-89d1-366a4d72acea"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mx4d7", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-mx4d7", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-mx4d7", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:33:11+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:33:15+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:33:15+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:33:11+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://27fcc9a52a1e3b690ae1d0135bb1ad9ba41b96d40fdd0b63adff8ffc7a662e3a", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:33:12+00:00"}}}, {"containerID": "containerd://e0e169f7a17ff8a650c4c0e2d0ea5b849a982a7b3b8ab64ea0760d50a2d1abc7", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:33:12+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:33:11+00:00"}}, "message": "migration complete!", "migration_id": "d50f4e09", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.448, "checkpoint_files_delay": 1.708, "checkpoint_files_transfer": 4.873, "file_system_delay": 1.699, "file_system_transfer": 5.078, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.078, "creation": 3.241094, "restoration": 2.231237, "total": 10.642018}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "79fad76dc6f7c6a4884f1cdec03c793e396582453a82b9a3f1afab42ba39c110", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-7djgk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-7djgk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-7djgk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"79fad76dc6f7c6a4884f1cdec03c793e396582453a82b9a3f1afab42ba39c110\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"9b1b4cd5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30373\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30373", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:33:58+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:33:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:33:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:34:02+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:34:02+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77882506", "uid": "d3e9822c-af70-47fb-90dd-c187b24f98d0"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7djgk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-7djgk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-7djgk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:33:58+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:34:02+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:34:02+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:33:58+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3076f6c48e0b2d467183e1cfbf7838dacbd6dd4fd79e6536cde27b286919a809", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:34:00+00:00"}}}, {"containerID": "containerd://8f16c2cbe4d3d3e741fa86b0225803bf347b65bd83914b1fe6dc610d5b614990", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:33:59+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:33:58+00:00"}}, "message": "migration complete!", "migration_id": "9b1b4cd5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.472, "checkpoint_files_delay": 1.687, "checkpoint_files_transfer": 4.796, "file_system_delay": 1.68, "file_system_transfer": 5.195, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.195, "creation": 3.070655, "restoration": 2.287526, "total": 10.647613}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "bebce5796b3e2c35d56486616b4e7ef5df577773d104cd8c91fd3a2d528d263e", "cni.projectcalico.org/podIP": "10.42.54.201/32", "cni.projectcalico.org/podIPs": "10.42.54.201/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8h6hc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8h6hc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8h6hc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"bebce5796b3e2c35d56486616b4e7ef5df577773d104cd8c91fd3a2d528d263e\",\"cni.projectcalico.org/podIP\":\"10.42.54.201/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.201/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"ab0ab79a\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30662\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30662", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:34:45+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:34:45+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:34:46+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.201\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:34:49+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:34:50+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77882856", "uid": "67492567-abc8-44d8-aa34-a3fcbb0d6bc9"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8h6hc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8h6hc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8h6hc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:34:45+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:34:49+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:34:49+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:34:45+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://845c36d14fed1010a15210741804d127e0e4d1f2abb3711777741248526a90f9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:34:47+00:00"}}}, {"containerID": "containerd://aa51cb853344628cdd7e5a657d914271f0e93937608907763167f9341efc2de9", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:34:46+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.201", "podIPs": [{"ip": "10.42.54.201"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:34:45+00:00"}}, "message": "migration complete!", "migration_id": "ab0ab79a", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.37, "checkpoint_files_delay": 1.707, "checkpoint_files_transfer": 4.762, "file_system_delay": 1.698, "file_system_transfer": 5.118, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.118, "creation": 3.234462, "restoration": 2.189094, "total": 10.636332}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "ee03ff1995de164329628965644aeb0ba46f8ea5fb445b3dd517fc8da3aeaa80", "cni.projectcalico.org/podIP": "10.42.54.213/32", "cni.projectcalico.org/podIPs": "10.42.54.213/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-8stm4\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-8stm4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-8stm4\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"ee03ff1995de164329628965644aeb0ba46f8ea5fb445b3dd517fc8da3aeaa80\",\"cni.projectcalico.org/podIP\":\"10.42.54.213/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.213/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"0a0d736e\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30550\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30550", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-22T22:35:32+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-22T22:35:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:35:33+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-22T22:35:37+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.213\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-22T22:35:37+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "77883207", "uid": "9d96f3a6-0f17-4f51-b647-e098c34fb5f7"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8stm4", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-8stm4", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-8stm4", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-22T22:35:32+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-22T22:35:37+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-22T22:35:37+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-22T22:35:32+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://11f169b0e97fc7ef4ae68d4a286962e940bb8bf13933d3b666b5af503a13f4ae", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:35:34+00:00"}}}, {"containerID": "containerd://617cbec76ac698655adb524240109920870742dd58d554bc0a544a1c5bdd91c8", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-22T22:35:33+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.213", "podIPs": [{"ip": "10.42.54.213"}], "qosClass": "BestEffort", "startTime": "2023-02-22T22:35:32+00:00"}}, "message": "migration complete!", "migration_id": "0a0d736e", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.576, "checkpoint_files_delay": 1.686, "checkpoint_files_transfer": 4.757, "file_system_delay": 1.679, "file_system_transfer": 5.111, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.111, "creation": 3.157686, "restoration": 2.196345, "total": 10.54869}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7d2b0da5c41378b7d024c0591651328c019f2ef1a99ca5643ef1314b6cf5dc11", "cni.projectcalico.org/podIP": "10.42.54.202/32", "cni.projectcalico.org/podIPs": "10.42.54.202/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wl2cm\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wl2cm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wl2cm\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7d2b0da5c41378b7d024c0591651328c019f2ef1a99ca5643ef1314b6cf5dc11\",\"cni.projectcalico.org/podIP\":\"10.42.54.202/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.202/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"45e54fbc\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32105\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32105", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:39:22+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:39:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:39:23+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:39:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.202\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:39:26+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78013429", "uid": "6d255b64-fa0d-4e2f-a5c3-f2ed0650d421"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wl2cm", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wl2cm", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wl2cm", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:39:22+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:39:26+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:39:26+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:39:22+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://3825e1191b9d789afc46d60efae542a368ba70a2789696d5cb781ceab10cd2c9", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:39:24+00:00"}}}, {"containerID": "containerd://cb2296314a5b16e8e281517a38f9dae62fe6f08f8a47c0a4962d2d239014755c", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:39:23+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.202", "podIPs": [{"ip": "10.42.54.202"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:39:22+00:00"}}, "message": "migration complete!", "migration_id": "45e54fbc", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.696, "checkpoint_files_delay": 1.499, "checkpoint_files_transfer": 4.675, "file_system_delay": 0.488, "file_system_transfer": 4.17, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.675, "creation": 3.295886, "restoration": 2.608457, "total": 10.683574}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "e218a0623d76e058c0c5353811698d5c1b114c584d7b54301d08438a27886d09", "cni.projectcalico.org/podIP": "10.42.54.208/32", "cni.projectcalico.org/podIPs": "10.42.54.208/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-v5ln9\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-v5ln9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-v5ln9\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"e218a0623d76e058c0c5353811698d5c1b114c584d7b54301d08438a27886d09\",\"cni.projectcalico.org/podIP\":\"10.42.54.208/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.208/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"461af2be\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30295\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30295", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:40:10+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:40:10+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:40:11+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:40:14+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.208\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:40:14+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78013790", "uid": "aedf9c41-5ee8-481d-a690-9497458ba9ee"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v5ln9", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-v5ln9", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-v5ln9", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:40:10+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:40:14+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:40:14+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:40:10+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://07c34b7ba2ae912bc2876273f5b02506e03499a2a5e3566d8b8a74ecca45180f", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:40:12+00:00"}}}, {"containerID": "containerd://052d17c8eed88d905f3d290842d4af492d635e70d1642b4a591d89d0b32f8e47", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:40:11+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.208", "podIPs": [{"ip": "10.42.54.208"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:40:10+00:00"}}, "message": "migration complete!", "migration_id": "461af2be", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.548, "checkpoint_files_delay": 1.318, "checkpoint_files_transfer": 4.812, "file_system_delay": 0.577, "file_system_transfer": 4.049, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.812, "creation": 3.309843, "restoration": 2.220108, "total": 10.416761}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "176299e114071978369b0e8eb2c3b3f882e58e2b40379238595034468d462cdd", "cni.projectcalico.org/podIP": "10.42.54.249/32", "cni.projectcalico.org/podIPs": "10.42.54.249/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-87mrh\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-87mrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-87mrh\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"176299e114071978369b0e8eb2c3b3f882e58e2b40379238595034468d462cdd\",\"cni.projectcalico.org/podIP\":\"10.42.54.249/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.249/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"f14e78a5\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30568\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30568", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:40:57+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:40:57+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:40:58+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:41:01+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.249\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:41:01+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78014150", "uid": "34d049db-8a73-47d5-9bcc-8fdcb649da28"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-87mrh", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-87mrh", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-87mrh", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:40:57+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:41:01+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:41:01+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:40:57+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://eda1e236a91ad02e3e2cad0b205e853357005f4a0eaf9e6950a7e6bece826286", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:40:59+00:00"}}}, {"containerID": "containerd://221537b96def9ea5f4356029ec550f29a3b3efbea3b783fe6480f34857364bc2", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:40:58+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.249", "podIPs": [{"ip": "10.42.54.249"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:40:57+00:00"}}, "message": "migration complete!", "migration_id": "f14e78a5", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.515, "checkpoint_files_delay": 1.708, "checkpoint_files_transfer": 4.767, "file_system_delay": 1.7, "file_system_transfer": 5.168, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.168, "creation": 3.070184, "restoration": 2.222041, "total": 10.554869}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "7a0b4aca4d497404df6beaeedbeffb274d2785f2c9b24420dfaa1056196ee165", "cni.projectcalico.org/podIP": "10.42.54.195/32", "cni.projectcalico.org/podIPs": "10.42.54.195/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-2qbgc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-2qbgc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-2qbgc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"7a0b4aca4d497404df6beaeedbeffb274d2785f2c9b24420dfaa1056196ee165\",\"cni.projectcalico.org/podIP\":\"10.42.54.195/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.195/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"702816f6\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31717\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31717", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:41:44+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:41:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:41:44+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:41:47+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.195\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:41:47+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78014491", "uid": "bb22c8a7-4b97-4dcd-b3db-f0d3e99a4b89"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2qbgc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-2qbgc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-2qbgc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:41:44+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:41:47+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:41:47+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:41:44+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://81ce271ed328bcc6028edb97194279530ff683ba0a2b0a332cf881bad0cd0e17", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:41:45+00:00"}}}, {"containerID": "containerd://9d10b426cfcbd7cc167d7c1b65d2f791a44704382a9ef8c49ab467bd9e511c3e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:41:45+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.195", "podIPs": [{"ip": "10.42.54.195"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:41:44+00:00"}}, "message": "migration complete!", "migration_id": "702816f6", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.396, "checkpoint_files_delay": 1.718, "checkpoint_files_transfer": 4.712, "file_system_delay": 1.706, "file_system_transfer": 5.262, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.262, "creation": 3.06387, "restoration": 2.195279, "total": 10.609188}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "d918a9132a717ed2c6adf5e972e41074e50e3f21f4e6121c897e943a5f581d2c", "cni.projectcalico.org/podIP": "10.42.54.241/32", "cni.projectcalico.org/podIPs": "10.42.54.241/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-dg487\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-dg487\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-dg487\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"d918a9132a717ed2c6adf5e972e41074e50e3f21f4e6121c897e943a5f581d2c\",\"cni.projectcalico.org/podIP\":\"10.42.54.241/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.241/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"db5634ff\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32395\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32395", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:42:32+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:42:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:42:32+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.241\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:42:35+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:42:36+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78014853", "uid": "6107467b-232c-4aa7-b535-9658e2a5ac7a"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dg487", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-dg487", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-dg487", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:42:32+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:42:35+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:42:35+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:42:32+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://5c90b57e7aeaa8db1bfd0b26f58b11a8930b7db85967ac453916f0ab68267aa5", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:42:33+00:00"}}}, {"containerID": "containerd://95cea37141b592b1cd529f6c463307bb399f62ef2508011559fa9476ee33aa1b", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:42:33+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.241", "podIPs": [{"ip": "10.42.54.241"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:42:32+00:00"}}, "message": "migration complete!", "migration_id": "db5634ff", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.527, "checkpoint_files_delay": 1.722, "checkpoint_files_transfer": 4.854, "file_system_delay": 1.714, "file_system_transfer": 5.194, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.194, "creation": 3.041996, "restoration": 2.199716, "total": 10.519645}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "02030e7fdcc55a03c425ce232ca77ac0e5dc8d6ce35922a2f819a85ff1cdca6d", "cni.projectcalico.org/podIP": "10.42.54.216/32", "cni.projectcalico.org/podIPs": "10.42.54.216/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xqzwc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xqzwc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xqzwc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"02030e7fdcc55a03c425ce232ca77ac0e5dc8d6ce35922a2f819a85ff1cdca6d\",\"cni.projectcalico.org/podIP\":\"10.42.54.216/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.216/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"be26e233\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31273\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31273", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:43:18+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:43:18+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:43:19+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:43:22+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.216\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:43:22+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78015199", "uid": "33e6faa4-19d5-4657-95b8-8dc315d8f92c"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xqzwc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xqzwc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xqzwc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:43:18+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:43:22+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:43:22+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:43:18+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://14385aec8d5bc310e1da58fcb621e34c15dedae6b3e0952ab99ff963dad458af", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:43:20+00:00"}}}, {"containerID": "containerd://03b224f5bd5b16e0730c9d9e789f1e694c0761ac5332ba0a92b0b7a0294738e5", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:43:19+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.216", "podIPs": [{"ip": "10.42.54.216"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:43:18+00:00"}}, "message": "migration complete!", "migration_id": "be26e233", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.398, "checkpoint_files_delay": 1.35, "checkpoint_files_transfer": 4.673, "file_system_delay": 0.669, "file_system_transfer": 4.282, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.673, "creation": 3.137306, "restoration": 2.200371, "total": 10.099279}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "da89b622366dc3bc95e085c938dfac3d85d1ab809dc233ae9c86b01833f911e7", "cni.projectcalico.org/podIP": "10.42.54.236/32", "cni.projectcalico.org/podIPs": "10.42.54.236/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-ht4rq\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-ht4rq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-ht4rq\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"da89b622366dc3bc95e085c938dfac3d85d1ab809dc233ae9c86b01833f911e7\",\"cni.projectcalico.org/podIP\":\"10.42.54.236/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.236/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"88afaf03\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"32278\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "32278", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:44:05+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:44:05+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:44:06+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:44:09+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.236\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:44:09+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78015547", "uid": "8f42f918-49b0-43e5-ac64-0c4003d365ba"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ht4rq", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-ht4rq", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-ht4rq", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:44:05+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:44:09+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:44:09+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:44:05+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://e4fff72334e06362567fb9457a93bb5bd5ce633c79912f996e8f2af5abc1bbe1", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:44:07+00:00"}}}, {"containerID": "containerd://75962b6758fce30d5b84ca3078cc5168cbd47525ef940936b7beb9240c04472a", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:44:06+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.236", "podIPs": [{"ip": "10.42.54.236"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:44:05+00:00"}}, "message": "migration complete!", "migration_id": "88afaf03", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.338, "checkpoint_files_delay": 1.798, "checkpoint_files_transfer": 4.731, "file_system_delay": 1.791, "file_system_transfer": 5.088, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.088, "creation": 3.132342, "restoration": 2.191945, "total": 10.510122}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "25e55016bed4d2ffdc628974768b14aeb8fec1f5b2890c484eb2d39c9be613dc", "cni.projectcalico.org/podIP": "10.42.54.197/32", "cni.projectcalico.org/podIPs": "10.42.54.197/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-gmdnk\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-gmdnk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-gmdnk\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"25e55016bed4d2ffdc628974768b14aeb8fec1f5b2890c484eb2d39c9be613dc\",\"cni.projectcalico.org/podIP\":\"10.42.54.197/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.197/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"b709b016\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31189\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31189", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:44:51+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:44:51+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:44:52+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:44:55+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.197\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:44:55+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78015890", "uid": "ca79dee7-82a0-49b2-bdae-9b5710aff225"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gmdnk", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-gmdnk", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-gmdnk", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:44:51+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:44:55+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:44:55+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:44:51+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://37725256f7c5a381c6d4fff14f3f8fbae70a0c450c55d6c8428c85369e2be1f2", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:44:53+00:00"}}}, {"containerID": "containerd://eb469ce753f4ea5f694363218c44f374acf30b4bd3a62be9e56cfb865e53e295", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:44:52+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.197", "podIPs": [{"ip": "10.42.54.197"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:44:51+00:00"}}, "message": "migration complete!", "migration_id": "b709b016", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.473, "checkpoint_files_delay": 1.336, "checkpoint_files_transfer": 4.588, "file_system_delay": 0.684, "file_system_transfer": 4.544, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.588, "creation": 3.138465, "restoration": 2.237204, "total": 10.072}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "28523d0da0ffd5da628e001487367d0d2c263269399a1f22fed2055ed9ad2da6", "cni.projectcalico.org/podIP": "10.42.54.254/32", "cni.projectcalico.org/podIPs": "10.42.54.254/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-wj9kv\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-wj9kv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-wj9kv\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"28523d0da0ffd5da628e001487367d0d2c263269399a1f22fed2055ed9ad2da6\",\"cni.projectcalico.org/podIP\":\"10.42.54.254/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.254/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"cac8fc35\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"31131\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "31131", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:45:39+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:45:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:45:39+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:45:42+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.254\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:45:42+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78016250", "uid": "34c9b356-2172-4fd2-a14c-a416a1dd87de"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wj9kv", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-wj9kv", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-wj9kv", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:45:39+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:45:42+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:45:42+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:45:39+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://ad31b5a4997b960635778d5c74f0f0067665b57bc2eb83e2cd4dc1aae1be9223", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:45:40+00:00"}}}, {"containerID": "containerd://48a9a374a84cd43fa09b4a386db4520faeb079121e28aad924a09907a3e1f8ff", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:45:40+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.254", "podIPs": [{"ip": "10.42.54.254"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:45:39+00:00"}}, "message": "migration complete!", "migration_id": "cac8fc35", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.359, "checkpoint_files_delay": 1.28, "checkpoint_files_transfer": 4.721, "file_system_delay": 0.672, "file_system_transfer": 4.165, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 4.721, "creation": 3.209892, "restoration": 2.256682, "total": 10.26825}}, {"des_pod": {"apiVersion": "v1", "kind": "Pod", "metadata": {"annotations": {"cni.projectcalico.org/containerID": "efa7599f3843be5ea03846c0ee412cf777f2a6d6117125c2593ddef09d625219", "cni.projectcalico.org/podIP": "10.42.54.224/32", "cni.projectcalico.org/podIPs": "10.42.54.224/32", "kopf.zalando.org/last-handled-configuration": "{\"spec\":{\"volumes\":[{\"name\":\"docker-storage\",\"hostPath\":{\"path\":\"/dev/shm/dind\",\"type\":\"Directory\"}},{\"name\":\"cgroup\",\"hostPath\":{\"path\":\"/sys/fs/cgroup\",\"type\":\"Directory\"}},{\"name\":\"podinfo\",\"downwardAPI\":{\"items\":[{\"path\":\"annotations\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.annotations\"}}],\"defaultMode\":420}},{\"name\":\"kube-api-access-xptpc\",\"projected\":{\"sources\":[{\"serviceAccountToken\":{\"expirationSeconds\":3607,\"path\":\"token\"}},{\"configMap\":{\"name\":\"kube-root-ca.crt\",\"items\":[{\"key\":\"ca.crt\",\"path\":\"ca.crt\"}]}},{\"downwardAPI\":{\"items\":[{\"path\":\"namespace\",\"fieldRef\":{\"apiVersion\":\"v1\",\"fieldPath\":\"metadata.namespace\"}}]}}],\"defaultMode\":420}}],\"containers\":[{\"name\":\"runtime\",\"image\":\"core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"LOG_LEVEL\",\"value\":\"debug\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"docker-storage\",\"mountPath\":\"/var/lib/docker\"},{\"name\":\"cgroup\",\"mountPath\":\"/sys/fs/cgroup\"},{\"name\":\"podinfo\",\"mountPath\":\"/etc/podinfo\"},{\"name\":\"kube-api-access-xptpc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\",\"securityContext\":{\"privileged\":true}},{\"name\":\"memhog\",\"image\":\"ghcr.io/hpcclab/live_service_migration/migration-ambassador:main\",\"env\":[{\"name\":\"DOCKER_HOST\",\"value\":\"127.0.0.1:2375\"},{\"name\":\"CONTAINER_NAME\",\"value\":\"memhog\"},{\"name\":\"API_SERVER\",\"value\":\"127.0.0.1:8888\"}],\"resources\":{},\"volumeMounts\":[{\"name\":\"kube-api-access-xptpc\",\"readOnly\":true,\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\"}],\"startupProbe\":{\"httpGet\":{\"path\":\"/probe/memhog\",\"port\":8888,\"scheme\":\"HTTP\"},\"timeoutSeconds\":1,\"periodSeconds\":1,\"successThreshold\":1,\"failureThreshold\":3},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"imagePullPolicy\":\"Always\"}],\"restartPolicy\":\"Always\",\"terminationGracePeriodSeconds\":30,\"dnsPolicy\":\"ClusterFirst\",\"serviceAccountName\":\"migration-coordinator\",\"serviceAccount\":\"migration-coordinator\",\"nodeName\":\"service-migration-2\",\"securityContext\":{},\"schedulerName\":\"default-scheduler\",\"tolerations\":[{\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300},{\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"effect\":\"NoExecute\",\"tolerationSeconds\":300}],\"priority\":0,\"enableServiceLinks\":true,\"preemptionPolicy\":\"PreemptLowerPriority\"},\"metadata\":{\"labels\":{\"app\":\"memhog\"},\"annotations\":{\"cni.projectcalico.org/containerID\":\"efa7599f3843be5ea03846c0ee412cf777f2a6d6117125c2593ddef09d625219\",\"cni.projectcalico.org/podIP\":\"10.42.54.224/32\",\"cni.projectcalico.org/podIPs\":\"10.42.54.224/32\",\"kubernetes.io/psp\":\"global-unrestricted-psp\",\"migration-bypass\":\"True\",\"migration-containers\":\"[{\\\"env\\\": [{\\\"name\\\": \\\"MEMORY_LIMIT\\\", \\\"value\\\": \\\"16\\\"}, {\\\"name\\\": \\\"MEMORY_INCREMENT\\\", \\\"value\\\": \\\"64\\\"}], \\\"image\\\": \\\"nims/scratch\\\", \\\"name\\\": \\\"memhog\\\"}]\",\"migration-host\":\"10.131.36.32.nip.io\",\"migration-id\":\"8f39ab99\",\"migration-interface\":\"dind\",\"migration-migratable\":\"True\",\"migration-port\":\"30112\",\"migration-position\":\"destination\",\"migration-start-mode\":\"passive\",\"migration-step\":\"restoring\",\"migration-volumes\":\"[]\"}}}\n", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\": \"v1\", \"kind\": \"Pod\", \"metadata\": {\"annotations\": {\"migration-interface\": \"dind\"}, \"labels\": {\"app\": \"memhog\"}, \"name\": \"memhog\", \"namespace\": \"default\"}, \"spec\": {\"containers\": [{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}], \"serviceAccountName\": \"migration-coordinator\"}}", "kubernetes.io/psp": "global-unrestricted-psp", "migration-bypass": "True", "migration-containers": "[{\"env\": [{\"name\": \"MEMORY_LIMIT\", \"value\": \"16\"}, {\"name\": \"MEMORY_INCREMENT\", \"value\": \"64\"}], \"image\": \"nims/scratch\", \"name\": \"memhog\"}]", "migration-host": "10.131.36.32.nip.io", "migration-interface": "dind", "migration-migratable": "True", "migration-port": "30112", "migration-start-mode": "active", "migration-volumes": "[]"}, "creationTimestamp": "2023-02-23T04:46:26+00:00", "labels": {"app": "memhog"}, "managedFields": [{"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:cni.projectcalico.org/containerID": {}, "f:cni.projectcalico.org/podIP": {}, "f:cni.projectcalico.org/podIPs": {}}}}, "manager": "Go-http-client", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:46:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {".": {}, "f:kubectl.kubernetes.io/last-applied-configuration": {}, "f:migration-interface": {}, "f:migration-start-mode": {}}, "f:labels": {".": {}, "f:app": {}}}, "f:spec": {"f:containers": {"k:{\"name\":\"memhog\"}": {".": {}, "f:env": {".": {}, "k:{\"name\":\"MEMORY_INCREMENT\"}": {".": {}, "f:name": {}, "f:value": {}}, "k:{\"name\":\"MEMORY_LIMIT\"}": {".": {}, "f:name": {}, "f:value": {}}}, "f:image": {}, "f:imagePullPolicy": {}, "f:name": {}, "f:resources": {}, "f:terminationMessagePath": {}, "f:terminationMessagePolicy": {}}}, "f:dnsPolicy": {}, "f:enableServiceLinks": {}, "f:restartPolicy": {}, "f:schedulerName": {}, "f:securityContext": {}, "f:serviceAccount": {}, "f:serviceAccountName": {}, "f:terminationGracePeriodSeconds": {}}}, "manager": "OpenAPI-Generator", "operation": "Update", "time": "2023-02-23T04:46:26+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:status": {"f:conditions": {"k:{\"type\":\"ContainersReady\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Initialized\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}, "k:{\"type\":\"Ready\"}": {".": {}, "f:lastProbeTime": {}, "f:lastTransitionTime": {}, "f:status": {}, "f:type": {}}}, "f:containerStatuses": {}, "f:hostIP": {}, "f:phase": {}, "f:podIP": {}, "f:podIPs": {".": {}, "k:{\"ip\":\"10.42.54.224\"}": {".": {}, "f:ip": {}}}, "f:startTime": {}}}, "manager": "kubelet", "operation": "Update", "subresource": "status", "time": "2023-02-23T04:46:29+00:00"}, {"apiVersion": "v1", "fieldsType": "FieldsV1", "fieldsV1": {"f:metadata": {"f:annotations": {"f:kopf.zalando.org/last-handled-configuration": {}, "f:migration-host": {}, "f:migration-migratable": {}, "f:migration-port": {}}}}, "manager": "kopf", "operation": "Update", "time": "2023-02-23T04:46:30+00:00"}], "name": "memhog", "namespace": "default", "resourceVersion": "78016602", "uid": "3cdebf04-db89-47ec-aa30-a4ca95bcb8fd"}, "spec": {"containers": [{"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "LOG_LEVEL", "value": "debug"}], "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imagePullPolicy": "Always", "name": "runtime", "resources": {}, "securityContext": {"privileged": true}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/lib/docker", "name": "docker-storage"}, {"mountPath": "/sys/fs/cgroup", "name": "cgroup"}, {"mountPath": "/etc/podinfo", "name": "podinfo"}, {"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xptpc", "readOnly": true}]}, {"env": [{"name": "DOCKER_HOST", "value": "127.0.0.1:2375"}, {"name": "CONTAINER_NAME", "value": "memhog"}, {"name": "API_SERVER", "value": "127.0.0.1:8888"}], "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imagePullPolicy": "Always", "name": "memhog", "resources": {}, "startupProbe": {"failureThreshold": 3, "httpGet": {"path": "/probe/memhog", "port": 8888, "scheme": "HTTP"}, "periodSeconds": 1, "successThreshold": 1, "timeoutSeconds": 1}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/run/secrets/kubernetes.io/serviceaccount", "name": "kube-api-access-xptpc", "readOnly": true}]}], "dnsPolicy": "ClusterFirst", "enableServiceLinks": true, "nodeName": "service-migration-2", "preemptionPolicy": "PreemptLowerPriority", "priority": 0, "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "serviceAccount": "migration-coordinator", "serviceAccountName": "migration-coordinator", "terminationGracePeriodSeconds": 30, "tolerations": [{"effect": "NoExecute", "key": "node.kubernetes.io/not-ready", "operator": "Exists", "tolerationSeconds": 300}, {"effect": "NoExecute", "key": "node.kubernetes.io/unreachable", "operator": "Exists", "tolerationSeconds": 300}], "volumes": [{"hostPath": {"path": "/dev/shm/dind", "type": "Directory"}, "name": "docker-storage"}, {"hostPath": {"path": "/sys/fs/cgroup", "type": "Directory"}, "name": "cgroup"}, {"downwardAPI": {"defaultMode": 420, "items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.annotations"}, "path": "annotations"}]}, "name": "podinfo"}, {"name": "kube-api-access-xptpc", "projected": {"defaultMode": 420, "sources": [{"serviceAccountToken": {"expirationSeconds": 3607, "path": "token"}}, {"configMap": {"items": [{"key": "ca.crt", "path": "ca.crt"}], "name": "kube-root-ca.crt"}}, {"downwardAPI": {"items": [{"fieldRef": {"apiVersion": "v1", "fieldPath": "metadata.namespace"}, "path": "namespace"}]}}]}}]}, "status": {"conditions": [{"lastTransitionTime": "2023-02-23T04:46:26+00:00", "status": "True", "type": "Initialized"}, {"lastTransitionTime": "2023-02-23T04:46:29+00:00", "status": "True", "type": "Ready"}, {"lastTransitionTime": "2023-02-23T04:46:29+00:00", "status": "True", "type": "ContainersReady"}, {"lastTransitionTime": "2023-02-23T04:46:26+00:00", "status": "True", "type": "PodScheduled"}], "containerStatuses": [{"containerID": "containerd://6b4b535a4d0c99c0e74c3f9b77edf52eb640e9796563212d368293bd5882a34e", "image": "ghcr.io/hpcclab/live_service_migration/migration-ambassador:main", "imageID": "ghcr.io/hpcclab/live_service_migration/migration-ambassador@sha256:09ff3a5616de469b0f87f1cb688bc2ac3e767ad98209a3c96fa78889596dc24d", "lastState": {}, "name": "memhog", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:46:27+00:00"}}}, {"containerID": "containerd://560ec538cc1102f354d957ead8130501287549d83395d05d2d841e43f95fe51e", "image": "core.harbor.10.131.36.2.nip.io/migration/migration-dind:latest", "imageID": "core.harbor.10.131.36.2.nip.io/migration/migration-dind@sha256:41effd22e5d8cd429047bf0862e7bc01206ebafbd33df36d0927b167340d1c9e", "lastState": {}, "name": "runtime", "ready": true, "restartCount": 0, "started": true, "state": {"running": {"startedAt": "2023-02-23T04:46:27+00:00"}}}], "hostIP": "10.131.36.32", "phase": "Running", "podIP": "10.42.54.224", "podIPs": [{"ip": "10.42.54.224"}], "qosClass": "BestEffort", "startTime": "2023-02-23T04:46:26+00:00"}}, "message": "migration complete!", "migration_id": "8f39ab99", "migration_interface": "dind", "overhead": {"checkpoint_and_transfer": {"checkpoint": 3.54, "checkpoint_files_delay": 1.727, "checkpoint_files_transfer": 4.961, "file_system_delay": 1.72, "file_system_transfer": 5.067, "image_layers_delay": null, "image_layers_transfer": null, "volume_delay": null, "volume_transfer": null}, "checkpoint_and_transfer_total": 5.067, "creation": 2.993883, "restoration": 2.189334, "total": 10.341797}}]}